"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/ai/chat/[userId]/[conversationId]/page",{

/***/ "(app-pages-browser)/./src/app/ai/chat/[userId]/[conversationId]/page.tsx":
/*!************************************************************!*\
  !*** ./src/app/ai/chat/[userId]/[conversationId]/page.tsx ***!
  \************************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ConversationPage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/react */ \"(app-pages-browser)/./node_modules/next-auth/react/index.js\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _utilis_isClient__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utilis/isClient */ \"(app-pages-browser)/./src/utilis/isClient.ts\");\n/* harmony import */ var _hooks_useSessionStorage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/hooks/useSessionStorage */ \"(app-pages-browser)/./src/hooks/useSessionStorage.ts\");\n/* harmony import */ var _utilis_CheckSession__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/utilis/CheckSession */ \"(app-pages-browser)/./src/utilis/CheckSession.ts\");\n/* harmony import */ var _components_buttonComponet__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../components/buttonComponet */ \"(app-pages-browser)/./src/app/components/buttonComponet.tsx\");\n/* harmony import */ var _hooks_ConversationContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/hooks/ConversationContext */ \"(app-pages-browser)/./src/hooks/ConversationContext.tsx\");\n/* harmony import */ var _hooks_createConversation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/hooks/createConversation */ \"(app-pages-browser)/./src/hooks/createConversation.ts\");\n/* harmony import */ var _hooks_useConversations__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/hooks/useConversations */ \"(app-pages-browser)/./src/hooks/useConversations.tsx\");\n/* harmony import */ var _ChatContainer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../ChatContainer */ \"(app-pages-browser)/./src/app/ai/chat/ChatContainer.tsx\");\n/* harmony import */ var _ChatMessage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../ChatMessage */ \"(app-pages-browser)/./src/app/ai/chat/ChatMessage.tsx\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! axios */ \"(app-pages-browser)/./node_modules/axios/lib/axios.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n//Utilis and helper functions\n\n\n\n\n// import { Header } from \"@/app/components/Header\";\n// Dashboard\n\n\n\n//Chat Container\n\n\n\n// import FloatingScrollButton from \"@/app/components/ScrollToBottomButton\";\n// import OpenChatContainer from \"@/app/components/helper/openChatContainerComponent\";\n// import { useSessionGate } from \"@/app/profile/_middlewhere\";\n// import LoadingComponent from \"@/app/components/helper/Loading\";\nfunction ConversationPage() {\n    _s();\n    const chatBotUrl = \" http://127.0.0.1:5000/chat\";\n    const generatePdfUrl = \" http://127.0.0.1:5000/generate_pdf\";\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.useRouter)();\n    const formRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    //Should wrap these in a bigger function since being used multiple times?\n    const [sessionStatus, setSessionStatus] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [userId, setUserId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [showGuidelines, setShowGuidelines] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n    const [pdfImages, setPdfImages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [selectedPdfImage, setSelectedPdfImage] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    //List of Backround PDF imagse\n    const [backgroundImages, setBackgroundImages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const { userName, setUserName, splitUserName, email, setEmail, setSplitUserName } = (0,_hooks_useSessionStorage__WEBPACK_IMPORTED_MODULE_5__.useSessionStorage)();\n    const { responses, setResponses, message, setMessage } = (0,_hooks_ConversationContext__WEBPACK_IMPORTED_MODULE_8__.useChatConversation)();\n    const localStorageConvoId = localStorage.getItem(\"currentConversationId\");\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (localStorageConvoId) {\n            setCurrentConversationId(localStorageConvoId);\n        }\n    }, []);\n    const { data: session, status } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_3__.useSession)();\n    const [messagesIsLoading, setMessagesIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [isReponseLoading, setResponseLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    //Set the conversation\n    const [currentConversationId, setCurrentConversationId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    // const [newTitle, setNewTitle] = useState(\"\");\n    const { conversations, isLoading, setConversations } = (0,_hooks_useConversations__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(session);\n    //Creating a new Conversation.\n    const { createConversation, newTitle, setNewTitle, isCreateLoading, error } = (0,_hooks_createConversation__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(session, setConversations, setCurrentConversationId);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        (0,_utilis_CheckSession__WEBPACK_IMPORTED_MODULE_6__.checkSession)(status, {\n            setUserId,\n            setUserName,\n            setSessionStatus,\n            setEmail,\n            setSplitUserName,\n            isClient: _utilis_isClient__WEBPACK_IMPORTED_MODULE_4__.isClient,\n            session,\n            router,\n            email,\n            userName,\n            splitUserName\n        });\n    }, [\n        status\n    ]);\n    //This funcitno shifts and shows the mobile Chat ccontainer\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const [isAtZero, setIsAtZero] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false); // State to track the position\n    const handleMobileChatBtnClick = ()=>{\n        if (chatContainerRef.current) {\n            if (isAtZero) {\n                chatContainerRef.current.style.transform = \"translateX(-100%)\";\n            } else {\n                chatContainerRef.current.style.transform = \"translateX(0px)\";\n            }\n            setIsAtZero(!isAtZero); // Toggle the state\n        }\n    };\n    // Effect to handle viewport resize\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        const handleResize = ()=>{\n            if (window.innerWidth >= 950 && chatContainerRef.current) {\n                chatContainerRef.current.style.transform = \"translateX(0px)\";\n                setIsAtZero(false); // Reset the state\n            } else if (chatContainerRef.current) {\n                chatContainerRef.current.style.transform = \"translateX(-100%)\";\n                setIsAtZero(true); // Reset the state\n            }\n        };\n        window.addEventListener(\"resize\", handleResize);\n        // Cleanup event listener on component unmount\n        return ()=>{\n            window.removeEventListener(\"resize\", handleResize);\n        };\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (userName !== null) {\n            sessionStorage.setItem(\"userName\", userName);\n        }\n        if (splitUserName !== \"\") {\n            sessionStorage.setItem(\"splitUserName\", splitUserName);\n        }\n    }, [\n        userName,\n        splitUserName\n    ]);\n    const [editTitleId, setEditTitleId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [editedTitle, setEditedTitle] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [editingTitle, setEditingTitle] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [titleUpdated, setTitleUpdated] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false); // New state for title updates\n    //Editing the ability to change the existing title.\n    const handleTitleClick = (convoId)=>{\n        const conversation = conversations.find((convo)=>convo.conversationId === convoId);\n        if (conversation) {\n            setEditTitleId(conversation.conversationId);\n            setEditedTitle(conversation.title);\n            setEditingTitle(true);\n        } else {\n        // console.log(`Conversation with ID ${convoId} not found`);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        editTitleId,\n        editedTitle\n    ]);\n    const handleTitleChange = (event)=>{\n        setEditedTitle(event.target.value);\n    };\n    async function getConversation(conversationId) {\n        try {\n            const response = await fetch(\"/api/\".concat(conversationId));\n            if (!response.ok) {\n                throw new Error(\"Failed to fetch conversation\");\n            }\n            const updatedConversation = await response.json();\n            // console.log(\n            //   \"Logging the converations before errorw\",\n            //   updatedConversation\n            // );\n            // Update local state\n            setConversations((prevConversations)=>{\n                return prevConversations.map((convo)=>convo === conversationId ? {\n                        ...convo,\n                        title: updatedConversation.title\n                    } : convo);\n            });\n            updateLocalStorage(updatedConversation, conversationId);\n        } catch (error) {\n            console.error(\"Error fetching conversation:\", error);\n            throw error; // Re-throw to handle it in the UI layer\n        }\n    }\n    async function deleteConversation(conversationId) {\n        const currentConversations = conversations;\n        console.log(\"Conversation ID\", conversationId);\n        // Optimistically remove the conversation from UI\n        const updatedConversations = currentConversations.filter((convo)=>convo.conversationId !== conversationId);\n        setConversations(updatedConversations);\n        sessionStorage.setItem(\"conversations\", JSON.stringify(updatedConversations));\n        try {\n            const response = await fetch(\"/api/deleteConversations/\", {\n                method: \"DELETE\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    id: conversationId\n                })\n            });\n            if (!response.ok) {\n                throw new Error(\"Failed to delete the conversation\");\n            }\n            // Filter out the deleted conversation\n            const updatedConversations = conversations.filter((convo)=>convo.converatoinID !== conversationId);\n            // console.log(\"Logging out the Conversation Filter\", conversations);\n            // Update state and local storage\n            setConversations(updatedConversations); // Update React state\n            sessionStorage.setItem(\"conversations\", JSON.stringify(updatedConversations)); // Update local storage\n            if (response.ok) {\n                // Update the conversations state\n                const updatedConversations = conversations.filter((convo)=>convo.conversationId !== conversationId);\n                setConversations(updatedConversations);\n                // Update the session storage\n                sessionStorage.setItem(\"conversations\", JSON.stringify(updatedConversations));\n                router.push(\"/ai/chat\");\n            }\n        } catch (error) {\n            console.error(\"Error deleting conversation:\", error);\n            alert(\"Could not delete the conversation. Please try again.\");\n        }\n    }\n    function updateLocalStorage(updatedConversation, conversationId) {\n        const cachedConversations = sessionStorage.getItem(\"conversations\");\n        if (cachedConversations) {\n            try {\n                // Parse the cached conversations\n                const parsedConversations = JSON.parse(cachedConversations);\n                // Ensure that parsedConversations is an array\n                if (Array.isArray(parsedConversations)) {\n                    const updatedCache = parsedConversations.map((convo)=>convo.conversationId === conversationId ? {\n                            ...convo,\n                            title: updatedConversation.title\n                        } : convo);\n                    sessionStorage.setItem(\"conversations\", JSON.stringify(updatedCache));\n                } else {\n                    console.error(\"Parsed cached conversations is not an array\");\n                }\n            } catch (e) {\n                console.error(\"Error parsing cached conversations:\", e);\n            }\n        }\n    }\n    const handleSubmitTitle = async (event)=>{\n        event.preventDefault(); // Prevent form submission\n        let titleChange = \"\";\n        console.log(\"Event Key\", event.key);\n        if (event.key === \"Enter\") {\n            event.preventDefault(); // Prevent form submission\n            const newTitle = editedTitle; // Capture the title at the time of submission\n            titleChange = editTitleId !== null && editTitleId !== void 0 ? editTitleId : \"\";\n            // console.log(\"New title to be set:\", newTitle);\n            // console.log(\"New title Id being logged\", editTitleId);\n            if (editTitleId !== null && editTitleId !== \"\") {\n                const updatedConversations = conversations.map((convo)=>convo.conversationId === editTitleId ? {\n                        ...convo,\n                        title: newTitle\n                    } : convo);\n                setConversations(updatedConversations);\n                // console.log(\"Updated conversations:\", updatedConversations);\n                sessionStorage.setItem(\"conversations\", JSON.stringify(updatedConversations));\n                setEditTitleId(null); // Exit edit mode\n                setEditedTitle(\"\"); // Clear the edited title state\n                setEditingTitle(false);\n            }\n        }\n        const localConversationId = localStorage.getItem(\"currentConversationId\");\n        console.log(\"Local Conversation ID\", localConversationId);\n        try {\n            const response = await fetch(\"/api/submitTitle/\", {\n                method: \"PUT\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    title: editedTitle,\n                    id: localConversationId\n                })\n            });\n            // console.log(\"Are you sending the new Title\", editedTitle);\n            if (response.ok) {\n                // await getConversation(editTitleId);\n                setEditingTitle(false);\n                setTitleUpdated((prev)=>!prev); // Toggle the titleUpdated state\n            }\n            if (!response.ok) {\n                throw new Error(\"Failed to update title\");\n            }\n        } catch (error) {\n            console.error(\"Error updating title:\", error);\n            // If the update fails, revert the change in the UI and alert the user\n            const originalConversations = conversations.map((convo)=>convo.conversationId === editTitleId ? {\n                    ...convo,\n                    title: convo.title\n                } : convo);\n            setConversations(originalConversations);\n            sessionStorage.setItem(\"conversations\", JSON.stringify(originalConversations));\n            alert(\"Failed to update title, please try again.\"); // Inform the user\n        }\n    };\n    const chatDashBoardRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    // Check for special commands\n    const specialCommands = {\n        \"br\": \"$br\",\n        \"down\": \"$down\",\n        \"help\": \"$help\",\n        \"listbr\": \"$listbr\",\n        \"new\": \"$new\",\n        \"pdf\": \"$pdf\",\n        \"rem\": \"$rem\",\n        \"usage\": \"$usage\"\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        const loadPdfImages = ()=>{\n            // Assuming the public folder is at the root of your project\n            const pdfImagesContext = __webpack_require__(\"(app-pages-browser)/./public/pdfImage sync \\\\.(png%7Cjpe?g%7Cgif)$/\");\n            const imageFiles = pdfImagesContext.keys().map((key)=>\"/pdfImage\".concat(key.replace(\".\", \"\")));\n            setPdfImages(imageFiles);\n        };\n        loadPdfImages();\n    }, []);\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        if (!message.trim()) {\n            console.log(\"Empty message, returning\");\n            return;\n        }\n        setMessagesIsLoading(true);\n        const command = message.trim().split(\" \")[0].toLowerCase().replace(\"/\", \"\");\n        console.log(\"Command\", command);\n        if (command === \"$listbr\") {\n            setResponses((prevResponses)=>[\n                    ...prevResponses,\n                    {\n                        question: message,\n                        response: \"Here are your PDF images:\",\n                        imageUrl: pdfImages,\n                        id: Date.now().toString()\n                    }\n                ]);\n            setMessage(\"\"); // Clear the message input\n            setMessagesIsLoading(false);\n            return; // Exit the function after ha\n        }\n        // New functionality to handlendle $br <num>\n        if (command.startsWith(\"$br\")) {}\n        if (command === \"$br\") {\n            const index = parseInt(message.split(\" \")[1], 10); // Get the number after $br\n            if (!isNaN(index) && index >= 0 && index < pdfImages.length) {\n                console.log(\"Selected PDF image\", index, \"Path:\", pdfImages[index]);\n                // Log the path to the selected PDF image\n                setSelectedPdfImage(pdfImages[index]); // Set the selected PDF image by index\n            } else {\n                console.log(\"Invalid index for PDF selection\");\n            }\n            setMessagesIsLoading(false);\n            return;\n        }\n        if (command === \"$pdf\") {\n            console.log(\"Selected PDF image\", selectedPdfImage);\n            uploadImage(selectedPdfImage, message);\n            setMessagesIsLoading(false);\n            return;\n        }\n        if (command === \"$help\") {\n            const commandList = Object.keys(specialCommands).join(\", \"); // Create a list of commands\n            setResponses((prevResponses)=>[\n                    ...prevResponses,\n                    {\n                        question: message,\n                        response: \"Here are your available commands: $\".concat(commandList),\n                        id: Date.now().toString()\n                    }\n                ]);\n            setMessagesIsLoading(false);\n            return;\n        }\n        async function uploadImage(imagePath, message) {\n            // Fetch the image as a Blob\n            const response = await fetch(imagePath);\n            const blob = await response.blob(); // Convert the response to a Blob\n            const file = new File([\n                blob\n            ], \"image.png\", {\n                type: blob.type\n            }); // Create a File object\n            const formData = new FormData();\n            formData.append(\"file\", file); // Change 'files' to 'file'\n            formData.append(\"message\", message); // Add the message to the form data\n            fetch(\"http://127.0.0.1:5000/upload\", {\n                method: \"POST\",\n                body: formData\n            }).then((response)=>{\n                if (response.ok) {\n                    // Check if the response is a PDF\n                    const contentType = response.headers.get(\"content-type\");\n                    if (contentType && contentType.includes(\"application/pdf\")) {\n                        // Handle PDF download\n                        return response.blob().then((blob)=>{\n                            const url = window.URL.createObjectURL(blob);\n                            const a = document.createElement(\"a\");\n                            a.href = url;\n                            a.download = \"output.pdf\"; // Specify the download name\n                            document.body.appendChild(a);\n                            a.click();\n                            a.remove();\n                        });\n                    } else {\n                        // Handle JSON response\n                        return response.json();\n                    }\n                } else {\n                    throw new Error(\"Network response was not ok.\");\n                }\n            }).then((data)=>{\n                console.log(\"Upload successful:\", data);\n            }).catch((error)=>{\n                console.error(\"Error uploading image:\", error);\n            });\n        }\n        if (command === \"$rem\") {\n            await handleUploadFile(e); // Call handleUploadFile directly\n            console.log(\"Remove command\", message);\n            setMessage(\"\");\n            return;\n        }\n        // Check for the /upscale command\n        if (command === \"upscale\") {\n            await handleUploadFile(e); // Call handleUploadFile directly\n            return; // Exit the function after handling the upscale command\n        }\n        if (command in specialCommands) {\n            // Handle special command\n            await handleSpecialCommand(command, message, e);\n        } else {\n            // Regular chat flow\n            if ((0,_utilis_isClient__WEBPACK_IMPORTED_MODULE_4__.isClient)()) {\n                if (!currentConversationId) {\n                    console.log(\"Creating new conversation\");\n                    await createConversation().then((convoID)=>{\n                        console.log(\"New conversation created with ID:\", convoID);\n                        setCurrentConversationId(convoID);\n                        sessionStorage.setItem(\"currentConversationId\", convoID);\n                        localStorage.setItem(\"currentConversationId\", convoID);\n                    });\n                }\n                const updatedConversationId = localStorage.getItem(\"currentConversationId\");\n                // 1. Set up the new response without any bot response yet.\n                const newResponse = {\n                    question: message,\n                    response: \"\",\n                    id: \"temp\"\n                };\n                // Use functional update for state\n                setResponses((responses)=>[\n                        ...responses,\n                        newResponse\n                    ]);\n                setMessage(\"\");\n                console.log(\"Chat is still bieng called\", responses);\n                try {\n                    // 2. Fetch bot reply from the API\n                    const botReply = await fetch(chatBotUrl, {\n                        method: \"POST\",\n                        headers: {\n                            \"Content-type\": \"application/json\"\n                        },\n                        mode: \"cors\",\n                        body: JSON.stringify({\n                            userId: session === null || session === void 0 ? void 0 : session.user.id,\n                            message,\n                            conversationId: currentConversationId\n                        })\n                    }).then((res)=>res.json());\n                    setResponseLoading(false);\n                    // 3. Update the responses array with the bot's reply\n                    setResponses((prevResponses)=>prevResponses.map((resp)=>{\n                            if (resp.question === message) {\n                                return {\n                                    ...resp,\n                                    response: botReply.response\n                                };\n                            }\n                            return resp;\n                        }));\n                    // console.log(\"Logging the new Responses\", responses);\n                    console.log(\"Logging the bot reply\", botReply);\n                    await fetch(\"/api/messages\", {\n                        method: \"POST\",\n                        headers: {\n                            \"Content-type\": \"application/json\"\n                        },\n                        body: JSON.stringify({\n                            userId: session === null || session === void 0 ? void 0 : session.user.id,\n                            conversationId: updatedConversationId,\n                            userContent: message,\n                            botResponse: botReply.response,\n                            imageUrl: \"\"\n                        })\n                    });\n                //Add the conversations arrawy or update\n                } catch (error) {\n                    console.error(\"Error handling submission:\", error);\n                }\n            }\n        }\n    };\n    const [, setfileURL] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [selectedFile, setselectedFile] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [uploadedFile, setuploadedFile] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({});\n    const [isUploading, setisUploading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [isFileUploaded, setisFileUploaded] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [uploadProgress, setuploadProgress] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0);\n    let uploadInput = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2___default().createRef();\n    // Update handleDrop to work like handleSelectFile\n    const handleSelectFile = (e)=>{\n        const selectedFileList = [];\n        for(let i = 0; i < e.target.files.length; i++){\n            selectedFileList.push(e.target.files.item(i));\n        }\n        setselectedFile(selectedFileList);\n    };\n    // Upload file to server\n    const handleUploadFile = async (e)=>{\n        e.preventDefault();\n        setisUploading(true);\n        const data = new FormData();\n        console.log(\"THe upload input\", uploadInput.files);\n        // Append the file to the request body\n        for(let i = 0; i < uploadInput.files.length; i++){\n            data.append(\"file\", uploadInput.files[i], uploadInput.files[i].name);\n        }\n        const newResponse = {\n            question: message,\n            response: \"\",\n            id: \"temp\"\n        };\n        setResponses((responses)=>[\n                ...responses,\n                newResponse\n            ]);\n        setMessage(\"\");\n        console.log(\"LOggin he data\", data);\n        try {\n            const config = {\n                onUploadProgress: (progressEvent)=>{\n                    const { loaded, total } = progressEvent;\n                    setuploadProgress(Math.round(loaded / total * 100));\n                }\n            };\n            const response = await axios__WEBPACK_IMPORTED_MODULE_13__[\"default\"].post(\"http://127.0.0.1:5000/process_image\", data, config);\n            const body = response.data;\n            console.log(\"Logging the response\", response.data);\n            setResponses((prevResponses)=>prevResponses.map((resp)=>{\n                    if (resp.question === message) {\n                        // Set imageUrl directly instead of an array\n                        const newImageUrl = response.data.image_url.startsWith(\"http\") ? response.data.image_url // Use the existing URL if it already has the protocol\n                         : \"http://127.0.0.1:5000\".concat(response.data.image_url); // Prepend the base URL if not\n                        return {\n                            ...resp,\n                            imageUrl: newImageUrl\n                        };\n                    }\n                    return resp;\n                }));\n            console.log(\"Logging the responses\", responses);\n            const updatedConversationId = sessionStorage.getItem(\"currentConversationId\");\n            console.log(\"Logging the response data\", response.data.responses);\n            await fetch(\"/api/messages\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    userId: session === null || session === void 0 ? void 0 : session.user.id,\n                    conversationId: updatedConversationId,\n                    userContent: message,\n                    imageUrl: \"http://127.0.0.1:5000\".concat(response.data.image_url)\n                })\n            });\n            console.log(\"Returning the body\", body);\n            setfileURL(\"\".concat(chatBotUrl, \"/\").concat(body.filename));\n            if (response.status === 200) {\n                setisFileUploaded(true); // flag to show the uploaded file\n                setisUploading(false);\n                setuploadedFile(selectedFile); // set the uploaded file to show the name\n            }\n        } catch (error) {\n            console.error(error);\n            setisUploading(false);\n        }\n    };\n    const handleSpecialCommand = async (command, fullMessage, e)=>{\n        const baseUrl = \"http://127.0.0.1:5000\";\n        let commandEndpoint;\n        let requestBody;\n        if (command === \"upscale\") {\n            console.log(\"Upscale Command\", fullMessage);\n        } else if (command === \"generate\") {\n            console.log(\"Generate Command\", fullMessage);\n            console.log(\"User ID:\", session === null || session === void 0 ? void 0 : session.user.id);\n            console.log(\"Content:\", fullMessage.substring(fullMessage.indexOf(\" \") + 1));\n            console.log(\"Logo Image:\", selectedFile ? selectedFile[0].name : null);\n            console.log(\"Background Image:\", \"\");\n            console.log(\"Filename:\", \"user_report_\".concat(new Date().toISOString().replace(/[-:]/g, \"\").split(\".\")[0], \".pdf\"));\n            commandEndpoint = generatePdfUrl;\n            requestBody = {\n                userId: session === null || session === void 0 ? void 0 : session.user.id,\n                content: fullMessage.substring(fullMessage.indexOf(\" \") + 1),\n                logo_image: selectedFile ? selectedFile.name : null,\n                background_image: \"\",\n                filename: \"user_report_\".concat(new Date().toISOString().replace(/[-:]/g, \"\").split(\".\")[0], \".pdf\"),\n                conversationId: currentConversationId\n            };\n            console.log(\"Loggin the request body\", requestBody);\n            console.log(\"Request Body:\", JSON.stringify(requestBody, null, 2));\n        } else {\n            commandEndpoint = \"\".concat(baseUrl).concat(specialCommands[command]);\n            requestBody = {\n                userId: session === null || session === void 0 ? void 0 : session.user.id,\n                message: fullMessage,\n                conversationId: currentConversationId\n            };\n        }\n        console.log(\"Command Endpoint:\", commandEndpoint);\n        try {\n            const response = await fetch(commandEndpoint, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(requestBody)\n            });\n            if (!response.ok) {\n                throw new Error(\"HTTP error! status: \".concat(response.status));\n            }\n            if (command === \"generate\") {\n                // Handle PDF response\n                const blob = await response.blob();\n                const url = window.URL.createObjectURL(blob);\n                const a = document.createElement(\"a\");\n                a.style.display = \"none\";\n                a.href = url;\n                a.download = requestBody.filename;\n                document.body.appendChild(a);\n                a.click();\n                window.URL.revokeObjectURL(url);\n                // Update UI to indicate successful PDF generation\n                setResponses((prevResponses)=>[\n                        ...prevResponses,\n                        {\n                            question: fullMessage,\n                            response: \"PDF generated successfully. Check your downloads.\",\n                            id: Date.now().toString()\n                        }\n                    ]);\n            } else {\n                // Handle JSON response for other commands\n                const data = await response.json();\n                console.log(\"Command \".concat(command, \" response:\"), data);\n                // Update UI with command response\n                setResponses((prevResponses)=>[\n                        ...prevResponses,\n                        {\n                            question: fullMessage,\n                            response: data.response,\n                            id: Date.now().toString()\n                        }\n                    ]);\n            }\n        } catch (error) {\n            console.error(\"Error executing command \".concat(command, \":\"), error);\n            // Update UI with error message\n            setResponses((prevResponses)=>[\n                    ...prevResponses,\n                    {\n                        question: fullMessage,\n                        response: \"Error executing command: \".concat(error instanceof Error ? error.message : \"Unknown error\"),\n                        id: Date.now().toString()\n                    }\n                ]);\n            setMessagesIsLoading(false);\n        } finally{\n            setMessagesIsLoading(false);\n        }\n    };\n    const handleConversationClick = (convoId)=>{\n        const targetPath = \"/ai/chat/\".concat(session === null || session === void 0 ? void 0 : session.user.id, \"/\").concat(convoId);\n        router.push(targetPath, undefined);\n        //Store the Current converatoinID in local to persit on chaning the navigation\n        let localStorageConvoId;\n        localStorage.setItem(\"currentConversationId\", convoId);\n        // console.log(\n        //   \"Logging the current conversation ID\",\n        //   localStorage.getItem(\"currentConversationId\")\n        // );\n        localStorageConvoId = localStorage.getItem(\"currentConversationId\");\n        setCurrentConversationId(convoId);\n    };\n    //Get the full Message Conversation.\n    const clearStorage = ()=>{\n        sessionStorage.removeItem(\"initialMessage\");\n    };\n    //Another Hook Check for the local storage\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (currentConversationId) {\n            handleConversationClick(currentConversationId);\n        }\n        clearStorage();\n    }, [\n        currentConversationId\n    ]); // Dependency array includes state that triggers this effect\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        isLoading\n    ]);\n    //Checking if Chat conversations is loading\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        messagesIsLoading\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        isReponseLoading\n    ]);\n    //Fetch Message for this converations\n    const messagesRefCounter = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        messagesRefCounter\n    ]);\n    const fetchMessagesForConversation = async (conversationId)=>{\n        messagesRefCounter.current += 1;\n        if (messagesRefCounter.current > 1) {\n            return;\n        }\n        if (!session || !session.user || !session.user.id) {\n            console.error(\"No user session available\");\n            return;\n        }\n        setMessagesIsLoading(true);\n        console.log(\"Fetching messages for conversation:\", conversationId);\n        if (!conversationId) {\n            console.error(\"no conversatoin ID\");\n            return;\n        } else {\n            try {\n                const response = await fetch(\"/api/storedMessages?authorId=\".concat(session === null || session === void 0 ? void 0 : session.user.id, \"&conversationId=\").concat(conversationId));\n                if (!response.ok) {\n                    throw new Error(\"Failed to fetch messages\");\n                }\n                const messages = await response.json();\n                // console.log(\"Add the IDS\",messages.map(msgs => msgs.id))\n                // Map API response to expected format in state\n                //Naming conventions matter\n                const formattedMessages = messages.map((msg)=>({\n                        question: msg.userContent,\n                        response: msg.botResponse,\n                        imageUrl: msg.imageUrl,\n                        id: msg.id\n                    }));\n                setResponses([]);\n                if (response.ok) {\n                    setResponses(formattedMessages);\n                }\n                setMessagesIsLoading(false);\n            } catch (error) {\n                setMessagesIsLoading(true);\n                console.error(\"Error fetching messages:\", error);\n            }\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        responses\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        setResponses([]); // Clear previous messages\n        if (status === \"authenticated\" && session) {\n            // Fetch messages for the current conversation if needed\n            if (currentConversationId === null) {\n                fetchMessagesForConversation(currentConversationId || localStorageConvoId);\n            } else {\n            // console.log(\"Fech is doing good\", currentConversationId);\n            }\n        }\n    }, [\n        currentConversationId\n    ]);\n    if (!conversations) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n            children: \"No conversation found.\"\n        }, void 0, false, {\n            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n            lineNumber: 980,\n            columnNumber: 12\n        }, this);\n    }\n    const [chatContainerShown, setChatContainerShown] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const chatContainerToggle = ()=>{\n        console.log(\"IS this being clicked??? Showon yes or no\");\n        setChatContainerShown(!chatContainerShown);\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        console.log(\"Responses\", selectedFile);\n    }, [\n        selectedFile\n    ]);\n    //Function takes you to the bottom of the div by clicking the floating button.\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"chatDashboard text-white\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatContainer__WEBPACK_IMPORTED_MODULE_11__.ChatContainer, {\n                setConversations: setConversations,\n                conversations: conversations,\n                currentConversationId: currentConversationId,\n                splitUserName: splitUserName,\n                userName: userName || \"\",\n                email: email || \"\",\n                onConversationClick: handleConversationClick,\n                onDeleteConvo: deleteConversation,\n                onChangeConvoTitle: handleSubmitTitle,\n                handleTitleClick: handleTitleClick,\n                editTitleId: editTitleId,\n                editedTitle: editedTitle,\n                handleTitleChange: handleTitleChange,\n                editingTitle: editingTitle,\n                titleUpdated: titleUpdated,\n                chatContainerRef: chatContainerRef,\n                handleMobileChatBtnClick: handleMobileChatBtnClick\n            }, void 0, false, {\n                fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                lineNumber: 999,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: chatDashBoardRef,\n                className: \"chatDashboardWrapper w-full text-left\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"chatDashBoardContainer \",\n                    children: [\n                        responses.length > 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatMessage__WEBPACK_IMPORTED_MODULE_12__.ChatMessagesContainer, {\n                            responses: responses || []\n                        }, void 0, false, {\n                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                            lineNumber: 1041,\n                            columnNumber: 13\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-full flex items-center justify-center\"\n                        }, void 0, false, {\n                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                            lineNumber: 1043,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                            ref: formRef,\n                            onSubmit: handleSubmit,\n                            className: \"chatFormSubmit\",\n                            // onDrop={handleDrop}\n                            onDragOver: (e)=>e.preventDefault(),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative textAreaContainer\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                            onChange: (e)=>{\n                                                setMessage(e.target.value);\n                                            },\n                                            onKeyDown: (e)=>{\n                                                if (e.key === \"Enter\" && !e.shiftKey) {\n                                                    var _formRef_current;\n                                                    e.preventDefault();\n                                                    (_formRef_current = formRef.current) === null || _formRef_current === void 0 ? void 0 : _formRef_current.requestSubmit();\n                                                }\n                                            },\n                                            value: message,\n                                            placeholder: \"Ask Thou Question...\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                            lineNumber: 1061,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"textAreaIconWrapper flex flex-row gap-[11px]\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                    type: \"file\",\n                                                    id: \"fileInput\",\n                                                    multiple: true,\n                                                    style: {\n                                                        display: \"none\"\n                                                    },\n                                                    onChange: handleSelectFile,\n                                                    ref: (ref)=>{\n                                                        uploadInput = ref;\n                                                    }\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                    lineNumber: 1076,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: \"textAreaIcon\",\n                                                    onClick: ()=>{\n                                                        var _document_getElementById;\n                                                        return (_document_getElementById = document.getElementById(\"fileInput\")) === null || _document_getElementById === void 0 ? void 0 : _document_getElementById.click();\n                                                    },\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        width: \"18\",\n                                                        height: \"18\",\n                                                        fill: \"none\",\n                                                        viewBox: \"0 0 24 24\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fill: \"currentColor\",\n                                                            \"fill-rule\": \"evenodd\",\n                                                            d: \"M9 7a5 5 0 0 1 10 0v8a7 7 0 1 1-14 0V9a1 1 0 0 1 2 0v6a5 5 0 0 0 10 0V7a3 3 0 1 0-6 0v8a1 1 0 1 0 2 0V9a1 1 0 1 1 2 0v6a3 3 0 1 1-6 0z\",\n                                                            \"clip-rule\": \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                            lineNumber: 1097,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                        lineNumber: 1090,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                    lineNumber: 1086,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    type: \"submit\",\n                                                    className: \"textAreaIcon\",\n                                                    children: messagesIsLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_buttonComponet__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {}, void 0, false, {\n                                                        fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                        lineNumber: 1107,\n                                                        columnNumber: 41\n                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        width: \"18\",\n                                                        height: \"18\",\n                                                        fill: \"none\",\n                                                        viewBox: \"0 0 32 32\",\n                                                        className: \"\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fill: \"currentColor\",\n                                                            \"fill-rule\": \"evenodd\",\n                                                            d: \"M15.192 8.906a1.143 1.143 0 0 1 1.616 0l5.143 5.143a1.143 1.143 0 0 1-1.616 1.616l-3.192-3.192v9.813a1.143 1.143 0 0 1-2.286 0v-9.813l-3.192 3.192a1.143 1.143 0 1 1-1.616-1.616z\",\n                                                            \"clip-rule\": \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                            lineNumber: 1116,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                        lineNumber: 1108,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                    lineNumber: 1106,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                            lineNumber: 1075,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                    lineNumber: 1060,\n                                    columnNumber: 13\n                                }, this),\n                                selectedFile && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"mt-2\",\n                                    children: [\n                                        \"Selected file: \",\n                                        selectedFile[0].name\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                    lineNumber: 1128,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                            lineNumber: 1053,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                    lineNumber: 1037,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                lineNumber: 1021,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n        lineNumber: 996,\n        columnNumber: 5\n    }, this);\n}\n_s(ConversationPage, \"5oPYU849AKr6nwfeQHz62MYqVQg=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_1__.useRouter,\n        _hooks_useSessionStorage__WEBPACK_IMPORTED_MODULE_5__.useSessionStorage,\n        _hooks_ConversationContext__WEBPACK_IMPORTED_MODULE_8__.useChatConversation,\n        next_auth_react__WEBPACK_IMPORTED_MODULE_3__.useSession,\n        _hooks_useConversations__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n        _hooks_createConversation__WEBPACK_IMPORTED_MODULE_9__[\"default\"]\n    ];\n});\n_c = ConversationPage;\nvar _c;\n$RefreshReg$(_c, \"ConversationPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvYWkvY2hhdC9bdXNlcklkXS9bY29udmVyc2F0aW9uSWRdL3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFNEM7QUFVN0I7QUFDMEM7QUFJekQsNkJBQTZCO0FBQ2dCO0FBQ2lCO0FBQ1Q7QUFDc0I7QUFFM0Usb0RBQW9EO0FBQ3BELFlBQVk7QUFFc0Q7QUFDSDtBQUNQO0FBQ3hELGdCQUFnQjtBQUNvQztBQUNNO0FBR2hDO0FBRTFCLDRFQUE0RTtBQUM1RSxzRkFBc0Y7QUFDdEYsK0RBQStEO0FBQy9ELGtFQUFrRTtBQUNuRCxTQUFTZ0I7O0lBQ3RCLE1BQU1DLGFBQWE7SUFDbkIsTUFBTUMsaUJBQWlCO0lBRXZCLE1BQU1DLFNBQVNuQiwwREFBU0E7SUFDeEIsTUFBTW9CLFVBQVVoQiw2Q0FBTUEsQ0FBa0I7SUFDeEMseUVBQXlFO0lBRXpFLE1BQU0sQ0FBQ2lCLGVBQWVDLGlCQUFpQixHQUFHcEIsK0NBQVFBLENBQVM7SUFDM0QsTUFBTSxDQUFDcUIsUUFBUUMsVUFBVSxHQUFHdEIsK0NBQVFBLENBQVM7SUFDN0MsTUFBTSxDQUFDdUIsZ0JBQWdCQyxrQkFBa0IsR0FBR3hCLCtDQUFRQSxDQUFDO0lBRXJELE1BQU0sQ0FBQ3lCLFdBQVdDLGFBQWEsR0FBRzFCLCtDQUFRQSxDQUFXLEVBQUU7SUFDdkQsTUFBTSxDQUFDMkIsa0JBQWtCQyxvQkFBb0IsR0FBRzVCLCtDQUFRQSxDQUFnQjtJQUV4RSw4QkFBOEI7SUFDOUIsTUFBTSxDQUFDNkIsa0JBQWtCQyxvQkFBb0IsR0FBRzlCLCtDQUFRQSxDQUFXLEVBQUU7SUFFckUsTUFBTSxFQUNKK0IsUUFBUSxFQUNSQyxXQUFXLEVBQ1hDLGFBQWEsRUFDYkMsS0FBSyxFQUNMQyxRQUFRLEVBQ1JDLGdCQUFnQixFQUNqQixHQUFHL0IsMkVBQWlCQTtJQUVyQixNQUFNLEVBQUVnQyxTQUFTLEVBQUVDLFlBQVksRUFBRUMsT0FBTyxFQUFFQyxVQUFVLEVBQUUsR0FDcERoQywrRUFBbUJBO0lBRXZCLE1BQU1pQyxzQkFBc0JDLGFBQWFDLE9BQU8sQ0FBQztJQUMvQzFDLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSXdDLHFCQUFxQjtZQUN2QkcseUJBQXlCSDtRQUMzQjtJQUNGLEdBQUcsRUFBRTtJQUVMLE1BQU0sRUFBRUksTUFBTUMsT0FBTyxFQUFFQyxNQUFNLEVBQUUsR0FBRzVDLDJEQUFVQTtJQUM1QyxNQUFNLENBQUM2QyxtQkFBbUJDLHFCQUFxQixHQUFHakQsK0NBQVFBLENBQ3hEO0lBR0YsTUFBTSxDQUFDa0Qsa0JBQWtCQyxtQkFBbUIsR0FBR25ELCtDQUFRQSxDQUFVO0lBRWpFLHNCQUFzQjtJQUN0QixNQUFNLENBQUNvRCx1QkFBdUJSLHlCQUF5QixHQUFHNUMsK0NBQVFBLENBRWhFO0lBRUYsZ0RBQWdEO0lBRWhELE1BQU0sRUFBRXFELGFBQWEsRUFBRUMsU0FBUyxFQUFFQyxnQkFBZ0IsRUFBRSxHQUFHN0Msb0VBQWdCQSxDQUNyRW9DO0lBR0YsOEJBQThCO0lBQzlCLE1BQU0sRUFBRVUsa0JBQWtCLEVBQUVDLFFBQVEsRUFBRUMsV0FBVyxFQUFFQyxlQUFlLEVBQUVDLEtBQUssRUFBRSxHQUN6RW5ELHFFQUFxQkEsQ0FDbkJxQyxTQUNBUyxrQkFDQVg7SUFHSjNDLGdEQUFTQSxDQUFDO1FBQ1JLLGtFQUFZQSxDQUFDeUMsUUFBUTtZQUNuQnpCO1lBQ0FVO1lBQ0FaO1lBQ0FlO1lBQ0FDO1lBQ0FoQyxRQUFRQSx3REFBQUE7WUFDUjBDO1lBQ0E3QjtZQUNBaUI7WUFDQUg7WUFDQUU7UUFDRjtJQUNGLEdBQUc7UUFBQ2M7S0FBTztJQUVYLDJEQUEyRDtJQUMzRCxNQUFNYyxtQkFBbUIzRCw2Q0FBTUEsQ0FBaUI7SUFDaEQsTUFBTSxDQUFDNEQsVUFBVUMsWUFBWSxHQUFHL0QsK0NBQVFBLENBQVUsUUFBUSw4QkFBOEI7SUFFeEYsTUFBTWdFLDJCQUEyQjtRQUMvQixJQUFJSCxpQkFBaUJJLE9BQU8sRUFBRTtZQUM1QixJQUFJSCxVQUFVO2dCQUNaRCxpQkFBaUJJLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDQyxTQUFTLEdBQUc7WUFDN0MsT0FBTztnQkFDTE4saUJBQWlCSSxPQUFPLENBQUNDLEtBQUssQ0FBQ0MsU0FBUyxHQUFHO1lBQzdDO1lBQ0FKLFlBQVksQ0FBQ0QsV0FBVyxtQkFBbUI7UUFDN0M7SUFDRjtJQUVBLG1DQUFtQztJQUNuQzdELGdEQUFTQSxDQUFDO1FBQ1IsTUFBTW1FLGVBQWU7WUFDbkIsSUFBSUMsT0FBT0MsVUFBVSxJQUFJLE9BQU9ULGlCQUFpQkksT0FBTyxFQUFFO2dCQUN4REosaUJBQWlCSSxPQUFPLENBQUNDLEtBQUssQ0FBQ0MsU0FBUyxHQUFHO2dCQUMzQ0osWUFBWSxRQUFRLGtCQUFrQjtZQUN4QyxPQUFPLElBQUlGLGlCQUFpQkksT0FBTyxFQUFFO2dCQUNuQ0osaUJBQWlCSSxPQUFPLENBQUNDLEtBQUssQ0FBQ0MsU0FBUyxHQUFHO2dCQUMzQ0osWUFBWSxPQUFPLGtCQUFrQjtZQUN2QztRQUNGO1FBRUFNLE9BQU9FLGdCQUFnQixDQUFDLFVBQVVIO1FBRWxDLDhDQUE4QztRQUM5QyxPQUFPO1lBQ0xDLE9BQU9HLG1CQUFtQixDQUFDLFVBQVVKO1FBQ3ZDO0lBQ0YsR0FBRyxFQUFFO0lBRUxuRSxnREFBU0EsQ0FBQztRQUNSLElBQUk4QixhQUFhLE1BQU07WUFDckIwQyxlQUFlQyxPQUFPLENBQUMsWUFBWTNDO1FBQ3JDO1FBRUEsSUFBSUUsa0JBQWtCLElBQUk7WUFDeEJ3QyxlQUFlQyxPQUFPLENBQUMsaUJBQWlCekM7UUFDMUM7SUFDRixHQUFHO1FBQUNGO1FBQVVFO0tBQWM7SUFFNUIsTUFBTSxDQUFDMEMsYUFBYUMsZUFBZSxHQUFHNUUsK0NBQVFBLENBQU87SUFDckQsTUFBTSxDQUFDNkUsYUFBYUMsZUFBZSxHQUFHOUUsK0NBQVFBLENBQVM7SUFDdkQsTUFBTSxDQUFDK0UsY0FBY0MsZ0JBQWdCLEdBQUdoRiwrQ0FBUUEsQ0FBVTtJQUMxRCxNQUFNLENBQUNpRixjQUFjQyxnQkFBZ0IsR0FBR2xGLCtDQUFRQSxDQUFVLFFBQVEsOEJBQThCO0lBRWhHLG1EQUFtRDtJQUNuRCxNQUFNbUYsbUJBQW1CLENBQUNDO1FBQ3hCLE1BQU1DLGVBQWVoQyxjQUFjaUMsSUFBSSxDQUNyQyxDQUFDQyxRQUFVLE1BQWVDLGNBQWMsS0FBS0o7UUFHL0MsSUFBSUMsY0FBYztZQUNoQlQsZUFBZSxhQUFzQlksY0FBYztZQUNuRFYsZUFBZSxhQUFzQlcsS0FBSztZQUMxQ1QsZ0JBQWdCO1FBQ2xCLE9BQU87UUFDTCw0REFBNEQ7UUFDOUQ7SUFDRjtJQUNBL0UsZ0RBQVNBLENBQUMsS0FBTyxHQUFHO1FBQUMwRTtRQUFhRTtLQUFZO0lBRTlDLE1BQU1hLG9CQUFvQixDQUFDQztRQUN6QmIsZUFBZWEsTUFBTUMsTUFBTSxDQUFDQyxLQUFLO0lBQ25DO0lBRUEsZUFBZUMsZ0JBQWdCTixjQUFtQjtRQUNoRCxJQUFJO1lBQ0YsTUFBTU8sV0FBVyxNQUFNQyxNQUFNLFFBQXVCLE9BQWZSO1lBQ3JDLElBQUksQ0FBQ08sU0FBU0UsRUFBRSxFQUFFO2dCQUNoQixNQUFNLElBQUlDLE1BQU07WUFDbEI7WUFFQSxNQUFNQyxzQkFBc0IsTUFBTUosU0FBU0ssSUFBSTtZQUMvQyxlQUFlO1lBQ2YsOENBQThDO1lBQzlDLHdCQUF3QjtZQUN4QixLQUFLO1lBQ0wscUJBQXFCO1lBQ3JCN0MsaUJBQWlCLENBQUM4QztnQkFDaEIsT0FBT0Esa0JBQWtCQyxHQUFHLENBQUMsQ0FBQ2YsUUFDNUJBLFVBQVVDLGlCQUNOO3dCQUFFLEdBQUdELEtBQUs7d0JBQUVFLE9BQU9VLG9CQUFvQlYsS0FBSztvQkFBQyxJQUM3Q0Y7WUFFUjtZQUVBZ0IsbUJBQW1CSixxQkFBcUJYO1FBQzFDLEVBQUUsT0FBTzVCLE9BQU87WUFDZDRDLFFBQVE1QyxLQUFLLENBQUMsZ0NBQWdDQTtZQUM5QyxNQUFNQSxPQUFPLHdDQUF3QztRQUN2RDtJQUNGO0lBRUEsZUFBZTZDLG1CQUFtQmpCLGNBQStCO1FBQy9ELE1BQU1rQix1QkFBdUJyRDtRQUc3Qm1ELFFBQVFHLEdBQUcsQ0FBQyxtQkFBbUJuQjtRQUUvQixpREFBaUQ7UUFDakQsTUFBTW9CLHVCQUF1QkYscUJBQXFCRyxNQUFNLENBQ3RELENBQUN0QixRQUFVLE1BQWVDLGNBQWMsS0FBS0E7UUFHL0NqQyxpQkFBaUJxRDtRQUNqQm5DLGVBQWVDLE9BQU8sQ0FDcEIsaUJBQ0FvQyxLQUFLQyxTQUFTLENBQUNIO1FBR2pCLElBQUk7WUFDRixNQUFNYixXQUFXLE1BQU1DLE1BQU8sNkJBQTRCO2dCQUN4RGdCLFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQ1AsZ0JBQWdCO2dCQUNsQjtnQkFDQUMsTUFBTUosS0FBS0MsU0FBUyxDQUFDO29CQUFFSSxJQUFJM0I7Z0JBQWU7WUFDNUM7WUFDQSxJQUFJLENBQUNPLFNBQVNFLEVBQUUsRUFBRTtnQkFDaEIsTUFBTSxJQUFJQyxNQUFNO1lBQ2xCO1lBRUEsc0NBQXNDO1lBQ3RDLE1BQU1VLHVCQUF1QnZELGNBQWN3RCxNQUFNLENBQy9DLENBQUN0QixRQUFVLE1BQWU2QixhQUFhLEtBQUs1QjtZQUU5QyxxRUFBcUU7WUFFckUsaUNBQWlDO1lBQ2pDakMsaUJBQWlCcUQsdUJBQXVCLHFCQUFxQjtZQUM3RG5DLGVBQWVDLE9BQU8sQ0FDcEIsaUJBQ0FvQyxLQUFLQyxTQUFTLENBQUNILHdCQUNkLHVCQUF1QjtZQUkxQixJQUFJYixTQUFTRSxFQUFFLEVBQUU7Z0JBQ2YsaUNBQWlDO2dCQUNqQyxNQUFNVyx1QkFBdUJ2RCxjQUFjd0QsTUFBTSxDQUMvQyxDQUFDdEIsUUFBVSxNQUFlQyxjQUFjLEtBQUtBO2dCQUUvQ2pDLGlCQUFpQnFEO2dCQUVqQiw2QkFBNkI7Z0JBQzdCbkMsZUFBZUMsT0FBTyxDQUNwQixpQkFDQW9DLEtBQUtDLFNBQVMsQ0FBQ0g7Z0JBRWpCM0YsT0FBT29HLElBQUksQ0FBRTtZQUNmO1FBQ0YsRUFBRSxPQUFPekQsT0FBTztZQUNkNEMsUUFBUTVDLEtBQUssQ0FBQyxnQ0FBZ0NBO1lBQzlDMEQsTUFBTTtRQUNSO0lBQ0Y7SUFFQSxTQUFTZixtQkFDUEosbUJBQXdCLEVBQ3hCWCxjQUFzQjtRQUV0QixNQUFNK0Isc0JBQXNCOUMsZUFBZTlCLE9BQU8sQ0FBQztRQUVuRCxJQUFJNEUscUJBQXFCO1lBQ3ZCLElBQUk7Z0JBQ0YsaUNBQWlDO2dCQUNqQyxNQUFNQyxzQkFBc0JWLEtBQUtXLEtBQUssQ0FBQ0Y7Z0JBRXZDLDhDQUE4QztnQkFDOUMsSUFBSUcsTUFBTUMsT0FBTyxDQUFDSCxzQkFBc0I7b0JBQ3RDLE1BQU1JLGVBQWVKLG9CQUFvQmxCLEdBQUcsQ0FBQyxDQUFDZixRQUM1Q0EsTUFBTUMsY0FBYyxLQUFLQSxpQkFDckI7NEJBQUUsR0FBR0QsS0FBSzs0QkFBRUUsT0FBT1Usb0JBQW9CVixLQUFLO3dCQUFDLElBQzdDRjtvQkFHTmQsZUFBZUMsT0FBTyxDQUFDLGlCQUFpQm9DLEtBQUtDLFNBQVMsQ0FBQ2E7Z0JBQ3pELE9BQU87b0JBQ0xwQixRQUFRNUMsS0FBSyxDQUFDO2dCQUNoQjtZQUNGLEVBQUUsT0FBT2lFLEdBQUc7Z0JBQ1ZyQixRQUFRNUMsS0FBSyxDQUFDLHVDQUF1Q2lFO1lBQ3ZEO1FBQ0Y7SUFDRjtJQUVBLE1BQU1DLG9CQUFvQixPQUFPbkM7UUFDL0JBLE1BQU1vQyxjQUFjLElBQUksMEJBQTBCO1FBQ2xELElBQUlDLGNBQXNCO1FBRzFCeEIsUUFBUUcsR0FBRyxDQUFDLGFBQWFoQixNQUFNc0MsR0FBRztRQUNsQyxJQUFJdEMsTUFBTXNDLEdBQUcsS0FBSyxTQUFTO1lBQ3pCdEMsTUFBTW9DLGNBQWMsSUFBSSwwQkFBMEI7WUFDbEQsTUFBTXRFLFdBQVdvQixhQUFhLDhDQUE4QztZQUM1RW1ELGNBQWNyRCx3QkFBQUEseUJBQUFBLGNBQWU7WUFDN0IsaURBQWlEO1lBQ2pELHlEQUF5RDtZQUV6RCxJQUFJQSxnQkFBZ0IsUUFBUUEsZ0JBQWdCLElBQUk7Z0JBQzlDLE1BQU1pQyx1QkFBdUJ2RCxjQUFjaUQsR0FBRyxDQUFDLENBQUNmLFFBQzlDLE1BQWVDLGNBQWMsS0FBS2IsY0FDOUI7d0JBQUUsR0FBR1ksS0FBSzt3QkFBRUUsT0FBT2hDO29CQUFTLElBQzVCOEI7Z0JBRU5oQyxpQkFBaUJxRDtnQkFDakIsK0RBQStEO2dCQUUvRG5DLGVBQWVDLE9BQU8sQ0FDcEIsaUJBQ0FvQyxLQUFLQyxTQUFTLENBQUNIO2dCQUdqQmhDLGVBQWUsT0FBTyxpQkFBaUI7Z0JBQ3ZDRSxlQUFlLEtBQUssK0JBQStCO2dCQUNuREUsZ0JBQWdCO1lBQ2xCO1FBQ0Y7UUFDQSxNQUFNa0Qsc0JBQXNCeEYsYUFBYUMsT0FBTyxDQUFDO1FBQ2pENkQsUUFBUUcsR0FBRyxDQUFDLHlCQUF5QnVCO1FBQ3JDLElBQUk7WUFDRixNQUFNbkMsV0FBVyxNQUFNQyxNQUFPLHFCQUFvQjtnQkFDaERnQixRQUFRO2dCQUNSQyxTQUFTO29CQUNQLGdCQUFnQjtnQkFDbEI7Z0JBQ0FDLE1BQU1KLEtBQUtDLFNBQVMsQ0FBQztvQkFBRXRCLE9BQU9aO29CQUFhc0MsSUFBSWU7Z0JBQW9CO1lBQ3JFO1lBRUEsNkRBQTZEO1lBRTdELElBQUluQyxTQUFTRSxFQUFFLEVBQUU7Z0JBQ2Ysc0NBQXNDO2dCQUN0Q2pCLGdCQUFnQjtnQkFDaEJFLGdCQUFnQixDQUFDaUQsT0FBUyxDQUFDQSxPQUFPLGdDQUFnQztZQUNwRTtZQUVBLElBQUksQ0FBQ3BDLFNBQVNFLEVBQUUsRUFBRTtnQkFDaEIsTUFBTSxJQUFJQyxNQUFNO1lBQ2xCO1FBQ0YsRUFBRSxPQUFPdEMsT0FBTztZQUNkNEMsUUFBUTVDLEtBQUssQ0FBQyx5QkFBeUJBO1lBRXZDLHNFQUFzRTtZQUN0RSxNQUFNd0Usd0JBQXdCL0UsY0FBY2lELEdBQUcsQ0FBQyxDQUFDZixRQUMvQ0EsTUFBTUMsY0FBYyxLQUFLYixjQUNyQjtvQkFBRSxHQUFHWSxLQUFLO29CQUFFRSxPQUFPLE1BQWVBLEtBQUs7Z0JBQUMsSUFDeENGO1lBR05oQyxpQkFBaUI2RTtZQUNqQjNELGVBQWVDLE9BQU8sQ0FDcEIsaUJBQ0FvQyxLQUFLQyxTQUFTLENBQUNxQjtZQUdqQmQsTUFBTSw4Q0FBOEMsa0JBQWtCO1FBQ3hFO0lBQ0Y7SUFFQSxNQUFNZSxtQkFBbUJuSSw2Q0FBTUEsQ0FBaUI7SUFDaEQsNkJBQTZCO0lBQzNCLE1BQU1vSSxrQkFBa0I7UUFDdEIsTUFBTTtRQUNOLFFBQVE7UUFDUixRQUFRO1FBQ1IsVUFBVTtRQUNWLE9BQU87UUFDUCxPQUFPO1FBQ1AsT0FBTztRQUNQLFNBQVM7SUFDWDtJQUVGckksZ0RBQVNBLENBQUM7UUFDUixNQUFNc0ksZ0JBQWdCO1lBQ3BCLDREQUE0RDtZQUM1RCxNQUFNQyxtQkFBbUJDLDBGQUd2QjtZQUVGLE1BQU1FLGFBQWFILGlCQUNoQkksSUFBSSxHQUNKdEMsR0FBRyxDQUFDLENBQUMyQixNQUFRLFlBQWlDLE9BQXJCQSxJQUFJWSxPQUFPLENBQUMsS0FBSztZQUM3Q25ILGFBQWFpSDtRQUNmO1FBRUFKO0lBQ0YsR0FBRyxFQUFFO0lBRUwsTUFBTU8sZUFBZSxPQUFPakI7UUFDMUJBLEVBQUVFLGNBQWM7UUFFaEIsSUFBSSxDQUFDeEYsUUFBUXdHLElBQUksSUFBSTtZQUNuQnZDLFFBQVFHLEdBQUcsQ0FBQztZQUNaO1FBQ0Y7UUFFQTFELHFCQUFxQjtRQUVyQixNQUFNK0YsVUFBVXpHLFFBQVF3RyxJQUFJLEdBQUdFLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDQyxXQUFXLEdBQUdMLE9BQU8sQ0FBQyxLQUFLO1FBRXhFckMsUUFBUUcsR0FBRyxDQUFDLFdBQVdxQztRQUV2QixJQUFJQSxZQUFZLFdBQVc7WUFDekIxRyxhQUFhLENBQUM2RyxnQkFBa0I7dUJBQzNCQTtvQkFDSDt3QkFDRUMsVUFBVTdHO3dCQUNWd0QsVUFBVTt3QkFDVnNELFVBQVU1SDt3QkFDVjBGLElBQUltQyxLQUFLQyxHQUFHLEdBQUdDLFFBQVE7b0JBQ3pCO2lCQUNEO1lBQ0RoSCxXQUFXLEtBQUssMEJBQTBCO1lBQzFDUyxxQkFBcUI7WUFDckIsUUFBUSw2QkFBNkI7UUFDdkM7UUFFQSw0Q0FBNEM7UUFDNUMsSUFBSStGLFFBQVFTLFVBQVUsQ0FBQyxRQUFRLENBRS9CO1FBSUEsSUFBSVQsWUFBWSxPQUFPO1lBR3JCLE1BQU1VLFFBQVFDLFNBQVNwSCxRQUFRMEcsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsS0FBSywyQkFBMkI7WUFDOUUsSUFBSSxDQUFDVyxNQUFNRixVQUFVQSxTQUFTLEtBQUtBLFFBQVFqSSxVQUFVb0ksTUFBTSxFQUFFO2dCQUMzRHJELFFBQVFHLEdBQUcsQ0FBQyxzQkFBc0IrQyxPQUFPLFNBQVNqSSxTQUFTLENBQUNpSSxNQUFNO2dCQUdsRSx5Q0FBeUM7Z0JBQ3pDOUgsb0JBQW9CSCxTQUFTLENBQUNpSSxNQUFNLEdBQUcsc0NBQXNDO1lBQy9FLE9BQU87Z0JBQ0xsRCxRQUFRRyxHQUFHLENBQUM7WUFDZDtZQUNBMUQscUJBQXFCO1lBQ3JCO1FBQ0Y7UUFFQSxJQUFJK0YsWUFBWSxRQUFRO1lBRXRCeEMsUUFBUUcsR0FBRyxDQUFDLHNCQUFzQmhGO1lBRWxDbUksWUFBWW5JLGtCQUE0Qlk7WUFDeENVLHFCQUFxQjtZQUNyQjtRQUNGO1FBRUEsSUFBRytGLFlBQVksU0FBUztZQUN0QixNQUFNZSxjQUFjQyxPQUFPcEIsSUFBSSxDQUFDTixpQkFBaUIyQixJQUFJLENBQUMsT0FBTyw0QkFBNEI7WUFDekYzSCxhQUFhLENBQUM2RyxnQkFBa0I7dUJBQzNCQTtvQkFDSDt3QkFDRUMsVUFBVTdHO3dCQUNWd0QsVUFBVSxzQ0FBa0QsT0FBWmdFO3dCQUNoRDVDLElBQUltQyxLQUFLQyxHQUFHLEdBQUdDLFFBQVE7b0JBQ3pCO2lCQUNEO1lBQ0R2RyxxQkFBcUI7WUFDckI7UUFDRjtRQUVBLGVBQWU2RyxZQUFZSSxTQUFpQixFQUFFM0gsT0FBZTtZQUMzRCw0QkFBNEI7WUFDNUIsTUFBTXdELFdBQVcsTUFBTUMsTUFBTWtFO1lBQzdCLE1BQU1DLE9BQU8sTUFBTXBFLFNBQVNvRSxJQUFJLElBQUksaUNBQWlDO1lBQ3JFLE1BQU1DLE9BQU8sSUFBSUMsS0FBSztnQkFBQ0Y7YUFBSyxFQUFFLGFBQWE7Z0JBQUVHLE1BQU1ILEtBQUtHLElBQUk7WUFBQyxJQUFJLHVCQUF1QjtZQUV4RixNQUFNQyxXQUFXLElBQUlDO1lBQ3JCRCxTQUFTRSxNQUFNLENBQUMsUUFBUUwsT0FBTywyQkFBMkI7WUFDMURHLFNBQVNFLE1BQU0sQ0FBQyxXQUFXbEksVUFBVSxtQ0FBbUM7WUFFeEV5RCxNQUFNLGdDQUFnQztnQkFDcENnQixRQUFRO2dCQUNSRSxNQUFNcUQ7WUFFUixHQUNDRyxJQUFJLENBQUMzRSxDQUFBQTtnQkFDSixJQUFJQSxTQUFTRSxFQUFFLEVBQUU7b0JBQ2YsaUNBQWlDO29CQUNqQyxNQUFNMEUsY0FBYzVFLFNBQVNrQixPQUFPLENBQUMyRCxHQUFHLENBQUM7b0JBQ3pDLElBQUlELGVBQWVBLFlBQVlFLFFBQVEsQ0FBQyxvQkFBb0I7d0JBQzFELHNCQUFzQjt3QkFDdEIsT0FBTzlFLFNBQVNvRSxJQUFJLEdBQUdPLElBQUksQ0FBQ1AsQ0FBQUE7NEJBQzFCLE1BQU1XLE1BQU16RyxPQUFPMEcsR0FBRyxDQUFDQyxlQUFlLENBQUNiOzRCQUN2QyxNQUFNYyxJQUFJQyxTQUFTQyxhQUFhLENBQUM7NEJBQ2pDRixFQUFFRyxJQUFJLEdBQUdOOzRCQUNURyxFQUFFSSxRQUFRLEdBQUcsY0FBYyw0QkFBNEI7NEJBQ3ZESCxTQUFTaEUsSUFBSSxDQUFDb0UsV0FBVyxDQUFDTDs0QkFDMUJBLEVBQUVNLEtBQUs7NEJBQ1BOLEVBQUVPLE1BQU07d0JBQ1Y7b0JBQ0YsT0FBTzt3QkFDTCx1QkFBdUI7d0JBQ3ZCLE9BQU96RixTQUFTSyxJQUFJO29CQUN0QjtnQkFDRixPQUFPO29CQUNMLE1BQU0sSUFBSUYsTUFBTTtnQkFDbEI7WUFDRixHQUNDd0UsSUFBSSxDQUFDN0gsQ0FBQUE7Z0JBQ0oyRCxRQUFRRyxHQUFHLENBQUMsc0JBQXNCOUQ7WUFDcEMsR0FDRzRJLEtBQUssQ0FBQzdILENBQUFBO2dCQUNMNEMsUUFBUTVDLEtBQUssQ0FBQywwQkFBMEJBO1lBQzFDO1FBQ0o7UUFFQSxJQUFJb0YsWUFBWSxRQUFRO1lBQ3RCLE1BQU0wQyxpQkFBaUI3RCxJQUFJLGlDQUFpQztZQUM1RHJCLFFBQVFHLEdBQUcsQ0FBQyxrQkFBa0JwRTtZQUM5QkMsV0FBVztZQUNYO1FBQ0Y7UUFXQSxpQ0FBaUM7UUFDakMsSUFBSXdHLFlBQVksV0FBVztZQUN6QixNQUFNMEMsaUJBQWlCN0QsSUFBSSxpQ0FBaUM7WUFDNUQsUUFBUSx1REFBdUQ7UUFDakU7UUFFQSxJQUFJbUIsV0FBV1YsaUJBQWlCO1lBQzlCLHlCQUF5QjtZQUN6QixNQUFNcUQscUJBQXFCM0MsU0FBU3pHLFNBQVNzRjtRQUMvQyxPQUFPO1lBQ0wsb0JBQW9CO1lBQ3BCLElBQUl6SCwwREFBUUEsSUFBSTtnQkFDZCxJQUFJLENBQUNnRCx1QkFBdUI7b0JBQzFCb0QsUUFBUUcsR0FBRyxDQUFDO29CQUNaLE1BQU1uRCxxQkFBcUJrSCxJQUFJLENBQUMsQ0FBQ2tCO3dCQUMvQnBGLFFBQVFHLEdBQUcsQ0FBQyxxQ0FBcUNpRjt3QkFDakRoSix5QkFBeUJnSjt3QkFDekJuSCxlQUFlQyxPQUFPLENBQUMseUJBQXlCa0g7d0JBQ2hEbEosYUFBYWdDLE9BQU8sQ0FBQyx5QkFBeUJrSDtvQkFDaEQ7Z0JBQ0Y7Z0JBRUEsTUFBTUMsd0JBQXdCbkosYUFBYUMsT0FBTyxDQUNoRDtnQkFHRiwyREFBMkQ7Z0JBQzNELE1BQU1tSixjQUFjO29CQUNsQjFDLFVBQVU3RztvQkFDVndELFVBQVU7b0JBQ1ZvQixJQUFJO2dCQUNOO2dCQUVBLGtDQUFrQztnQkFDbEM3RSxhQUFhLENBQUNELFlBQWM7MkJBQUlBO3dCQUFXeUo7cUJBQVk7Z0JBRXZEdEosV0FBVztnQkFFWGdFLFFBQVFHLEdBQUcsQ0FBQyw4QkFBOEJ0RTtnQkFFMUMsSUFBSTtvQkFDRixrQ0FBa0M7b0JBQ2xDLE1BQU0wSixXQUFXLE1BQU0vRixNQUFNakYsWUFBWTt3QkFDdkNpRyxRQUFRO3dCQUNSQyxTQUFTOzRCQUNQLGdCQUFnQjt3QkFDcEI7d0JBQ0UrRSxNQUFNO3dCQUNOOUUsTUFBTUosS0FBS0MsU0FBUyxDQUFDOzRCQUNuQjFGLE1BQU0sRUFBRXlCLG9CQUFBQSw4QkFBQUEsUUFBU21KLElBQUksQ0FBQzlFLEVBQUU7NEJBQ3hCNUU7NEJBQ0FpRCxnQkFBZ0JwQzt3QkFDbEI7b0JBQ0YsR0FBR3NILElBQUksQ0FBQyxDQUFDd0IsTUFBUUEsSUFBSTlGLElBQUk7b0JBQ3pCakQsbUJBQW1CO29CQUVuQixxREFBcUQ7b0JBQ3JEYixhQUFhLENBQUM2RyxnQkFDWkEsY0FBYzdDLEdBQUcsQ0FBQyxDQUFDNkY7NEJBQ2pCLElBQUlBLEtBQUsvQyxRQUFRLEtBQUs3RyxTQUFTO2dDQUM3QixPQUFPO29DQUFFLEdBQUc0SixJQUFJO29DQUFFcEcsVUFBVWdHLFNBQVNoRyxRQUFRO2dDQUFDOzRCQUNoRDs0QkFDQSxPQUFPb0c7d0JBQ1Q7b0JBR0YsdURBQXVEO29CQUV2RDNGLFFBQVFHLEdBQUcsQ0FBQyx5QkFBeUJvRjtvQkFDckMsTUFBTS9GLE1BQU0saUJBQWlCO3dCQUMzQmdCLFFBQVE7d0JBQ1JDLFNBQVM7NEJBQ1AsZ0JBQWdCO3dCQUNsQjt3QkFDQUMsTUFBTUosS0FBS0MsU0FBUyxDQUFDOzRCQUNuQjFGLE1BQU0sRUFBRXlCLG9CQUFBQSw4QkFBQUEsUUFBU21KLElBQUksQ0FBQzlFLEVBQUU7NEJBQ3hCM0IsZ0JBQWdCcUc7NEJBQ2hCTyxhQUFhN0o7NEJBQ2I4SixhQUFhTixTQUFTaEcsUUFBUTs0QkFDOUJzRCxVQUFVO3dCQUNaO29CQUNGO2dCQUVBLHdDQUF3QztnQkFDMUMsRUFBRSxPQUFPekYsT0FBTztvQkFDZDRDLFFBQVE1QyxLQUFLLENBQUMsOEJBQThCQTtnQkFDOUM7WUFDRjtRQUNGO0lBQ0Y7SUFFQSxNQUFNLEdBQUcwSSxXQUFXLEdBQUd0TSwrQ0FBUUEsQ0FBQztJQUNoQyxNQUFNLENBQUN1TSxjQUFjQyxnQkFBZ0IsR0FBR3hNLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ3lNLGNBQWNDLGdCQUFnQixHQUFHMU0sK0NBQVFBLENBQUMsQ0FBQztJQUNsRCxNQUFNLENBQUMyTSxhQUFhQyxlQUFlLEdBQUc1TSwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUM2TSxnQkFBZ0JDLGtCQUFrQixHQUFHOU0sK0NBQVFBLENBQUM7SUFDckQsTUFBTSxDQUFDK00sZ0JBQWdCQyxrQkFBa0IsR0FBR2hOLCtDQUFRQSxDQUFDO0lBQ3JELElBQUlpTiw0QkFBY2xOLHNEQUFlO0lBR2pDLGtEQUFrRDtJQUNsRCxNQUFNb04sbUJBQW1CLENBQUN0RjtRQUN4QixNQUFNdUYsbUJBQW1CLEVBQUU7UUFDM0IsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUl4RixFQUFFakMsTUFBTSxDQUFDMEgsS0FBSyxDQUFDekQsTUFBTSxFQUFFd0QsSUFBSztZQUM5Q0QsaUJBQWlCL0YsSUFBSSxDQUFDUSxFQUFFakMsTUFBTSxDQUFDMEgsS0FBSyxDQUFDQyxJQUFJLENBQUNGO1FBQzVDO1FBQ0FiLGdCQUFnQlk7SUFDbEI7SUFFQSx3QkFBd0I7SUFDeEIsTUFBTTFCLG1CQUFtQixPQUFPN0Q7UUFDOUJBLEVBQUVFLGNBQWM7UUFFaEI2RSxlQUFlO1FBQ2YsTUFBTS9KLE9BQU8sSUFBSTJIO1FBQ2pCaEUsUUFBUUcsR0FBRyxDQUFDLG9CQUFvQnNHLFlBQVlLLEtBQUs7UUFFakQsc0NBQXNDO1FBQ3RDLElBQUssSUFBSUQsSUFBSSxHQUFHQSxJQUFJSixZQUFZSyxLQUFLLENBQUN6RCxNQUFNLEVBQUV3RCxJQUFLO1lBQ2pEeEssS0FBSzRILE1BQU0sQ0FBQyxRQUFRd0MsWUFBWUssS0FBSyxDQUFDRCxFQUFFLEVBQUVKLFlBQVlLLEtBQUssQ0FBQ0QsRUFBRSxDQUFDRyxJQUFJO1FBQ3JFO1FBRUEsTUFBTTFCLGNBQWM7WUFDbEIxQyxVQUFVN0c7WUFDVndELFVBQVU7WUFDVm9CLElBQUk7UUFDTjtRQUVBN0UsYUFBYSxDQUFDRCxZQUFjO21CQUFJQTtnQkFBV3lKO2FBQVk7UUFFdkR0SixXQUFXO1FBRVhnRSxRQUFRRyxHQUFHLENBQUMsa0JBQWtCOUQ7UUFDOUIsSUFBSTtZQUNGLE1BQU00SyxTQUFTO2dCQUNiQyxrQkFBa0IsQ0FBQ0M7b0JBQ2pCLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxLQUFLLEVBQUUsR0FBR0Y7b0JBQzFCWCxrQkFBa0JjLEtBQUtDLEtBQUssQ0FBQyxTQUFVRixRQUFTO2dCQUNsRDtZQUNGO1lBQ0EsTUFBTTlILFdBQVcsTUFBTWxGLDhDQUFLQSxDQUFDbU4sSUFBSSxDQUMvQix1Q0FDQW5MLE1BQ0E0SztZQUVGLE1BQU12RyxPQUFPbkIsU0FBU2xELElBQUk7WUFFMUIyRCxRQUFRRyxHQUFHLENBQUMsd0JBQXdCWixTQUFTbEQsSUFBSTtZQUNqRFAsYUFBYSxDQUFDNkcsZ0JBQ1pBLGNBQWM3QyxHQUFHLENBQUMsQ0FBQzZGO29CQUNqQixJQUFJQSxLQUFLL0MsUUFBUSxLQUFLN0csU0FBUzt3QkFDN0IsNENBQTRDO3dCQUM1QyxNQUFNMEwsY0FBY2xJLFNBQVNsRCxJQUFJLENBQUNxTCxTQUFTLENBQUN6RSxVQUFVLENBQUMsVUFDbkQxRCxTQUFTbEQsSUFBSSxDQUFDcUwsU0FBUyxDQUFDLHNEQUFzRDsyQkFDOUUsd0JBQWdELE9BQXhCbkksU0FBU2xELElBQUksQ0FBQ3FMLFNBQVMsR0FBSSw4QkFBOEI7d0JBQ3JGLE9BQU87NEJBQ0wsR0FBRy9CLElBQUk7NEJBQ1A5QyxVQUFVNEU7d0JBQ1o7b0JBQ0Y7b0JBQ0EsT0FBTzlCO2dCQUNUO1lBRUYzRixRQUFRRyxHQUFHLENBQUMseUJBQXlCdEU7WUFFckMsTUFBTXdKLHdCQUF3QnBILGVBQWU5QixPQUFPLENBQ2xEO1lBR0Y2RCxRQUFRRyxHQUFHLENBQUMsNkJBQTZCWixTQUFTbEQsSUFBSSxDQUFDUixTQUFTO1lBRWhFLE1BQU0yRCxNQUFNLGlCQUFpQjtnQkFDM0JnQixRQUFRO2dCQUNSQyxTQUFTO29CQUNQLGdCQUFnQjtnQkFDbEI7Z0JBQ0FDLE1BQU1KLEtBQUtDLFNBQVMsQ0FBQztvQkFDbkIxRixNQUFNLEVBQUV5QixvQkFBQUEsOEJBQUFBLFFBQVNtSixJQUFJLENBQUM5RSxFQUFFO29CQUN4QjNCLGdCQUFnQnFHO29CQUNoQk8sYUFBYTdKO29CQUNiOEcsVUFBVSx3QkFBZ0QsT0FBeEJ0RCxTQUFTbEQsSUFBSSxDQUFDcUwsU0FBUztnQkFDM0Q7WUFDRjtZQUVBMUgsUUFBUUcsR0FBRyxDQUFDLHNCQUFzQk87WUFDbENvRixXQUFXLEdBQWlCcEYsT0FBZG5HLFlBQVcsS0FBaUIsT0FBZG1HLEtBQUtpSCxRQUFRO1lBQ3pDLElBQUlwSSxTQUFTaEQsTUFBTSxLQUFLLEtBQUs7Z0JBQzNCK0osa0JBQWtCLE9BQU8saUNBQWlDO2dCQUMxREYsZUFBZTtnQkFDZkYsZ0JBQWdCSCxlQUFlLHlDQUF5QztZQUMxRTtRQUNGLEVBQUUsT0FBTzNJLE9BQU87WUFDZDRDLFFBQVE1QyxLQUFLLENBQUNBO1lBQ2RnSixlQUFlO1FBQ2pCO0lBQ0Y7SUFDQSxNQUFNakIsdUJBQXVCLE9BQzNCM0MsU0FDQW9GLGFBQ0F2RztRQUVBLE1BQU13RyxVQUFVO1FBQ2hCLElBQUlDO1FBQ0osSUFBSUM7UUFFSixJQUFJdkYsWUFBWSxXQUFXO1lBQ3pCeEMsUUFBUUcsR0FBRyxDQUFDLG1CQUFtQnlIO1FBQ2pDLE9BQU8sSUFBSXBGLFlBQVksWUFBWTtZQUNqQ3hDLFFBQVFHLEdBQUcsQ0FBQyxvQkFBb0J5SDtZQUNoQzVILFFBQVFHLEdBQUcsQ0FBQyxZQUFZN0Qsb0JBQUFBLDhCQUFBQSxRQUFTbUosSUFBSSxDQUFDOUUsRUFBRTtZQUN4Q1gsUUFBUUcsR0FBRyxDQUNULFlBQ0F5SCxZQUFZSSxTQUFTLENBQUNKLFlBQVlLLE9BQU8sQ0FBQyxPQUFPO1lBRW5EakksUUFBUUcsR0FBRyxDQUFDLGVBQWU0RixlQUFlQSxZQUFZLENBQUMsRUFBRSxDQUFDaUIsSUFBSSxHQUFHO1lBQ2pFaEgsUUFBUUcsR0FBRyxDQUFDLHFCQUFxQjtZQUNqQ0gsUUFBUUcsR0FBRyxDQUNULGFBQ0EsZUFFQyxPQURDLElBQUkyQyxPQUFPb0YsV0FBVyxHQUFHN0YsT0FBTyxDQUFDLFNBQVMsSUFBSUksS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQzVEO1lBR0hxRixrQkFBa0J0TjtZQUNsQnVOLGNBQWM7Z0JBQ1psTixNQUFNLEVBQUV5QixvQkFBQUEsOEJBQUFBLFFBQVNtSixJQUFJLENBQUM5RSxFQUFFO2dCQUN4QndILFNBQVNQLFlBQVlJLFNBQVMsQ0FBQ0osWUFBWUssT0FBTyxDQUFDLE9BQU87Z0JBQzFERyxZQUFZckMsZUFBZUEsYUFBYWlCLElBQUksR0FBRztnQkFDL0NxQixrQkFBa0I7Z0JBQ2xCVixVQUFVLGVBRVQsT0FEQyxJQUFJN0UsT0FBT29GLFdBQVcsR0FBRzdGLE9BQU8sQ0FBQyxTQUFTLElBQUlJLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUM1RDtnQkFDRHpELGdCQUFnQnBDO1lBQ2xCO1lBQ0FvRCxRQUFRRyxHQUFHLENBQUMsMkJBQTJCNEg7WUFDdkMvSCxRQUFRRyxHQUFHLENBQUMsaUJBQWlCRyxLQUFLQyxTQUFTLENBQUN3SCxhQUFhLE1BQU07UUFDakUsT0FBTztZQUNMRCxrQkFBa0IsR0FDaEJoRyxPQURtQitGLFNBRXBCLE9BREMvRixlQUFlLENBQUNVLFFBQXdDO1lBRTFEdUYsY0FBYztnQkFDWmxOLE1BQU0sRUFBRXlCLG9CQUFBQSw4QkFBQUEsUUFBU21KLElBQUksQ0FBQzlFLEVBQUU7Z0JBQ3hCNUUsU0FBUzZMO2dCQUNUNUksZ0JBQWdCcEM7WUFDbEI7UUFDRjtRQUVBb0QsUUFBUUcsR0FBRyxDQUFDLHFCQUFxQjJIO1FBRWpDLElBQUk7WUFDRixNQUFNdkksV0FBVyxNQUFNQyxNQUFNc0ksaUJBQWlCO2dCQUM1Q3RILFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQ1AsZ0JBQWdCO2dCQUNsQjtnQkFDQUMsTUFBTUosS0FBS0MsU0FBUyxDQUFDd0g7WUFDdkI7WUFFQSxJQUFJLENBQUN4SSxTQUFTRSxFQUFFLEVBQUU7Z0JBQ2hCLE1BQU0sSUFBSUMsTUFBTSx1QkFBdUMsT0FBaEJILFNBQVNoRCxNQUFNO1lBQ3hEO1lBRUEsSUFBSWlHLFlBQVksWUFBWTtnQkFDMUIsc0JBQXNCO2dCQUN0QixNQUFNbUIsT0FBTyxNQUFNcEUsU0FBU29FLElBQUk7Z0JBQ2hDLE1BQU1XLE1BQU16RyxPQUFPMEcsR0FBRyxDQUFDQyxlQUFlLENBQUNiO2dCQUN2QyxNQUFNYyxJQUFJQyxTQUFTQyxhQUFhLENBQUM7Z0JBQ2pDRixFQUFFL0csS0FBSyxDQUFDNEssT0FBTyxHQUFHO2dCQUNsQjdELEVBQUVHLElBQUksR0FBR047Z0JBQ1RHLEVBQUVJLFFBQVEsR0FBR2tELFlBQVlKLFFBQVE7Z0JBQ2pDakQsU0FBU2hFLElBQUksQ0FBQ29FLFdBQVcsQ0FBQ0w7Z0JBQzFCQSxFQUFFTSxLQUFLO2dCQUNQbEgsT0FBTzBHLEdBQUcsQ0FBQ2dFLGVBQWUsQ0FBQ2pFO2dCQUUzQixrREFBa0Q7Z0JBQ2xEeEksYUFBYSxDQUFDNkcsZ0JBQWtCOzJCQUMzQkE7d0JBQ0g7NEJBQ0VDLFVBQVVnRjs0QkFDVnJJLFVBQVU7NEJBQ1ZvQixJQUFJbUMsS0FBS0MsR0FBRyxHQUFHQyxRQUFRO3dCQUN6QjtxQkFDRDtZQUNILE9BQU87Z0JBQ0wsMENBQTBDO2dCQUMxQyxNQUFNM0csT0FBTyxNQUFNa0QsU0FBU0ssSUFBSTtnQkFDaENJLFFBQVFHLEdBQUcsQ0FBQyxXQUFtQixPQUFScUMsU0FBUSxlQUFhbkc7Z0JBRTVDLGtDQUFrQztnQkFDbENQLGFBQWEsQ0FBQzZHLGdCQUFrQjsyQkFDM0JBO3dCQUNIOzRCQUNFQyxVQUFVZ0Y7NEJBQ1ZySSxVQUFVbEQsS0FBS2tELFFBQVE7NEJBQ3ZCb0IsSUFBSW1DLEtBQUtDLEdBQUcsR0FBR0MsUUFBUTt3QkFDekI7cUJBQ0Q7WUFDSDtRQUNGLEVBQUUsT0FBTzVGLE9BQU87WUFDZDRDLFFBQVE1QyxLQUFLLENBQUMsMkJBQW1DLE9BQVJvRixTQUFRLE1BQUlwRjtZQUNyRCwrQkFBK0I7WUFDL0J0QixhQUFhLENBQUM2RyxnQkFBa0I7dUJBQzNCQTtvQkFDSDt3QkFDRUMsVUFBVWdGO3dCQUNWckksVUFBVSw0QkFFVCxPQURDbkMsaUJBQWlCc0MsUUFBUXRDLE1BQU1yQixPQUFPLEdBQUc7d0JBRTNDNEUsSUFBSW1DLEtBQUtDLEdBQUcsR0FBR0MsUUFBUTtvQkFDekI7aUJBQ0Q7WUFDRHZHLHFCQUFxQjtRQUN2QixTQUFVO1lBQ1JBLHFCQUFxQjtRQUN2QjtJQUNGO0lBRUEsTUFBTStMLDBCQUEwQixDQUFDNUo7UUFDL0IsTUFBTTZKLGFBQWEsWUFBZ0M3SixPQUFwQnRDLG9CQUFBQSw4QkFBQUEsUUFBU21KLElBQUksQ0FBQzlFLEVBQUUsRUFBQyxLQUFXLE9BQVIvQjtRQUVuRG5FLE9BQU9vRyxJQUFJLENBQUM0SCxZQUFZQztRQUV4Qiw4RUFBOEU7UUFDOUUsSUFBSXpNO1FBRUpDLGFBQWFnQyxPQUFPLENBQUMseUJBQXlCVTtRQUM5QyxlQUFlO1FBQ2YsMkNBQTJDO1FBQzNDLGtEQUFrRDtRQUNsRCxLQUFLO1FBRUwzQyxzQkFBc0JDLGFBQWFDLE9BQU8sQ0FBQztRQUMzQ0MseUJBQXlCd0M7SUFDM0I7SUFFQSxvQ0FBb0M7SUFFcEMsTUFBTStKLGVBQWU7UUFDbkIxSyxlQUFlMkssVUFBVSxDQUFDO0lBQzVCO0lBRUEsMENBQTBDO0lBQzFDblAsZ0RBQVNBLENBQUM7UUFDUixJQUFJbUQsdUJBQXVCO1lBQ3pCNEwsd0JBQXdCNUw7UUFDMUI7UUFDQStMO0lBQ0YsR0FBRztRQUFDL0w7S0FBc0IsR0FBRyw0REFBNEQ7SUFFekZuRCxnREFBU0EsQ0FBQyxLQUFPLEdBQUc7UUFBQ3FEO0tBQVU7SUFFL0IsMkNBQTJDO0lBQzNDckQsZ0RBQVNBLENBQUMsS0FBTyxHQUFHO1FBQUMrQztLQUFrQjtJQUN2Qy9DLGdEQUFTQSxDQUFDLEtBQU8sR0FBRztRQUFDaUQ7S0FBaUI7SUFFdEMscUNBQXFDO0lBQ3JDLE1BQU1tTSxxQkFBcUJuUCw2Q0FBTUEsQ0FBQztJQUNsQ0QsZ0RBQVNBLENBQUMsS0FBTyxHQUFHO1FBQUNvUDtLQUFtQjtJQUN4QyxNQUFNQywrQkFBK0IsT0FBTzlKO1FBQzFDNkosbUJBQW1CcEwsT0FBTyxJQUFJO1FBQzlCLElBQUlvTCxtQkFBbUJwTCxPQUFPLEdBQUcsR0FBRztZQUNsQztRQUNGO1FBRUEsSUFBSSxDQUFDbkIsV0FBVyxDQUFDQSxRQUFRbUosSUFBSSxJQUFJLENBQUNuSixRQUFRbUosSUFBSSxDQUFDOUUsRUFBRSxFQUFFO1lBQ2pEWCxRQUFRNUMsS0FBSyxDQUFDO1lBQ2Q7UUFDRjtRQUNBWCxxQkFBcUI7UUFFckJ1RCxRQUFRRyxHQUFHLENBQUMsdUNBQXVDbkI7UUFFbkQsSUFBSSxDQUFDQSxnQkFBZ0I7WUFDbkJnQixRQUFRNUMsS0FBSyxDQUFDO1lBQ2Q7UUFDRixPQUFPO1lBQ0wsSUFBSTtnQkFDRixNQUFNbUMsV0FBVyxNQUFNQyxNQUNyQixnQ0FBbUVSLE9BQW5DMUMsb0JBQUFBLDhCQUFBQSxRQUFTbUosSUFBSSxDQUFDOUUsRUFBRSxFQUFDLG9CQUFpQyxPQUFmM0I7Z0JBRXJFLElBQUksQ0FBQ08sU0FBU0UsRUFBRSxFQUFFO29CQUNoQixNQUFNLElBQUlDLE1BQU07Z0JBQ2xCO2dCQUNBLE1BQU1xSixXQUFXLE1BQU14SixTQUFTSyxJQUFJO2dCQUVwQywyREFBMkQ7Z0JBRTNELCtDQUErQztnQkFDL0MsMkJBQTJCO2dCQUMzQixNQUFNb0osb0JBQW9CRCxTQUFTakosR0FBRyxDQUFDLENBQUNtSixNQUFrQjt3QkFDeERyRyxVQUFVcUcsSUFBSXJELFdBQVc7d0JBQ3pCckcsVUFBVTBKLElBQUlwRCxXQUFXO3dCQUN6QmhELFVBQVVvRyxJQUFJcEcsUUFBUTt3QkFDdEJsQyxJQUFJc0ksSUFBSXRJLEVBQUU7b0JBQ1o7Z0JBRUE3RSxhQUFhLEVBQUU7Z0JBRWYsSUFBSXlELFNBQVNFLEVBQUUsRUFBRTtvQkFDZjNELGFBQWFrTjtnQkFDZjtnQkFDQXZNLHFCQUFxQjtZQUN2QixFQUFFLE9BQU9XLE9BQU87Z0JBQ2RYLHFCQUFxQjtnQkFDckJ1RCxRQUFRNUMsS0FBSyxDQUFDLDRCQUE0QkE7WUFDNUM7UUFDRjtJQUNGO0lBRUEzRCxnREFBU0EsQ0FBQyxLQUFPLEdBQUc7UUFBQ29DO0tBQVU7SUFFL0JwQyxnREFBU0EsQ0FBQztRQUNScUMsYUFBYSxFQUFFLEdBQUcsMEJBQTBCO1FBRTVDLElBQUlTLFdBQVcsbUJBQW1CRCxTQUFTO1lBQ3pDLHdEQUF3RDtZQUN4RCxJQUFJTSwwQkFBMEIsTUFBTTtnQkFDbENrTSw2QkFDRSx5QkFBa0M3TTtZQUV0QyxPQUFPO1lBQ0wsNERBQTREO1lBQzlEO1FBQ0Y7SUFDRixHQUFHO1FBQUNXO0tBQXNCO0lBRTFCLElBQUksQ0FBQ0MsZUFBZTtRQUNsQixxQkFBTyw4REFBQ3FNO3NCQUFFOzs7Ozs7SUFDWjtJQUVBLE1BQU0sQ0FBQ0Msb0JBQW9CQyxzQkFBc0IsR0FBRzVQLCtDQUFRQSxDQUFVO0lBQ3RFLE1BQU02UCxzQkFBc0I7UUFDMUJySixRQUFRRyxHQUFHLENBQUM7UUFDWmlKLHNCQUFzQixDQUFDRDtJQUN6QjtJQUVBMVAsZ0RBQVNBLENBQUM7UUFDUnVHLFFBQVFHLEdBQUcsQ0FBQyxhQUFhNEY7SUFDM0IsR0FBRztRQUFDQTtLQUFhO0lBRWpCLDhFQUE4RTtJQUU5RSxxQkFDRSw4REFBQ3VEO1FBQUlDLFdBQVU7OzBCQUdiLDhEQUFDcFAsMERBQWFBO2dCQUNaNEMsa0JBQWtCQTtnQkFDbEJGLGVBQWVBO2dCQUNmRCx1QkFBdUJBO2dCQUN2Qm5CLGVBQWVBO2dCQUNmRixVQUFVQSxZQUFZO2dCQUN0QkcsT0FBT0EsU0FBUztnQkFDaEI4TixxQkFBcUJoQjtnQkFDckJpQixlQUFleEo7Z0JBQ2Z5SixvQkFBb0JwSTtnQkFDcEIzQyxrQkFBa0JBO2dCQUNsQlIsYUFBYUE7Z0JBQ2JFLGFBQWFBO2dCQUNiYSxtQkFBbUJBO2dCQUNuQlgsY0FBY0E7Z0JBQ2RFLGNBQWNBO2dCQUNkcEIsa0JBQWtCQTtnQkFDbEJHLDBCQUEwQkE7Ozs7OzswQkFLNUIsOERBQUM4TDtnQkFDQ0ssS0FBSzlIO2dCQUNMMEgsV0FBVTswQkFjViw0RUFBQ0Q7b0JBQUlDLFdBQVk7O3dCQUdkMU4sVUFBVXdILE1BQU0sR0FBRyxrQkFDbEIsOERBQUNqSixnRUFBcUJBOzRCQUFDeUIsV0FBVyxhQUFzQixFQUFFOzs7OztpREFFMUQsOERBQUN5Tjs0QkFBSUMsV0FBVTs7Ozs7O3NDQVVqQiw4REFBQ0s7NEJBQ0NELEtBQUtqUDs0QkFDTG1QLFVBQVV2SDs0QkFDVmlILFdBQVU7NEJBQ1Ysc0JBQXNCOzRCQUN0Qk8sWUFBWSxDQUFDekksSUFBTUEsRUFBRUUsY0FBYzs7OENBRW5DLDhEQUFDK0g7b0NBQUlDLFdBQVU7O3NEQUNiLDhEQUFDUTs0Q0FDQ0MsVUFBVSxDQUFDM0k7Z0RBQ1RyRixXQUFXcUYsRUFBRWpDLE1BQU0sQ0FBQ0MsS0FBSzs0Q0FDM0I7NENBQ0E0SyxXQUFXLENBQUM1STtnREFDVixJQUFJQSxFQUFFSSxHQUFHLEtBQUssV0FBVyxDQUFDSixFQUFFNkksUUFBUSxFQUFFO3dEQUVwQ3hQO29EQURBMkcsRUFBRUUsY0FBYztxREFDaEI3RyxtQkFBQUEsUUFBUStDLE9BQU8sY0FBZi9DLHVDQUFBQSxpQkFBaUJ5UCxhQUFhO2dEQUNoQzs0Q0FDRjs0Q0FDQTlLLE9BQU90RDs0Q0FDUHFPLGFBQVk7Ozs7OztzREFHZCw4REFBQ2Q7NENBQUlDLFdBQVU7OzhEQUNiLDhEQUFDYztvREFDQ3ZHLE1BQUs7b0RBQ0xuRCxJQUFHO29EQUNIMkosUUFBUTtvREFDUjVNLE9BQU87d0RBQUU0SyxTQUFTO29EQUFPO29EQUN6QjBCLFVBQVVyRDtvREFDVmdELEtBQUssQ0FBQ0E7d0RBQ0psRCxjQUFja0Q7b0RBQ2hCOzs7Ozs7OERBRUYsOERBQUNZO29EQUNDaEIsV0FBVTtvREFDVmlCLFNBQVM7NERBQU05RjtnRUFBQUEsMkJBQUFBLFNBQVMrRixjQUFjLENBQUMsMEJBQXhCL0YsK0NBQUFBLHlCQUFzQ0ssS0FBSzs7OERBRTFELDRFQUFDMkY7d0RBQ0NDLE9BQU07d0RBQ05DLE9BQU07d0RBQ05DLFFBQU87d0RBQ1BDLE1BQUs7d0RBQ0xDLFNBQVE7a0VBRVIsNEVBQUNDOzREQUNDRixNQUFLOzREQUNMRyxhQUFVOzREQUNWQyxHQUFFOzREQUNGQyxhQUFVOzs7Ozs7Ozs7Ozs7Ozs7OzhEQUtoQiw4REFBQ1o7b0RBQU96RyxNQUFLO29EQUFTeUYsV0FBVTs4REFDN0IvTSxrQ0FBcUIsOERBQUN6QyxrRUFBc0JBOzs7OzZFQUMzQyw4REFBQzJRO3dEQUNDQyxPQUFNO3dEQUNOQyxPQUFNO3dEQUNOQyxRQUFPO3dEQUNQQyxNQUFLO3dEQUNMQyxTQUFRO3dEQUNSeEIsV0FBVTtrRUFFViw0RUFBQ3lCOzREQUNDRixNQUFLOzREQUNMRyxhQUFVOzREQUNWQyxHQUFFOzREQUNGQyxhQUFVOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dDQU9yQnBGLDhCQUNDLDhEQUFDdUQ7b0NBQUlDLFdBQVU7O3dDQUFPO3dDQUFnQnhELFlBQVksQ0FBQyxFQUFFLENBQUNpQixJQUFJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPeEU7R0F0a0N3QjFNOztRQUlQaEIsc0RBQVNBO1FBcUJwQk8sdUVBQWlCQTtRQUduQkcsMkVBQW1CQTtRQVNhTCx1REFBVUE7UUFjV08sZ0VBQWdCQTtRQU1yRUQsaUVBQXFCQTs7O0tBekRESyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvYXBwL2FpL2NoYXQvW3VzZXJJZF0vW2NvbnZlcnNhdGlvbklkXS9wYWdlLnRzeD9lMDk2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9uYXZpZ2F0aW9uXCI7XG5pbXBvcnQgeyB1c2VQYXRobmFtZSB9IGZyb20gXCJuZXh0L25hdmlnYXRpb25cIjtcbmltcG9ydCBVcGxvYWRGaWxlIGZyb20gXCIuLi8uLi9VcGxvYWRGaWxlL0FwcFwiO1xuaW1wb3J0IFJlYWN0LCB7XG4gIHVzZVN0YXRlLFxuICB1c2VFZmZlY3QsXG4gIHVzZVJlZixcbiAgdXNlLFxuICB1c2VJZCxcbiAgRm9ybUV2ZW50LFxufSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVNlc3Npb24sIGdldFNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoL3JlYWN0XCI7XG5pbXBvcnQgeyBTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aFwiO1xuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi8uLi90eXBlc1wiO1xuXG4vL1V0aWxpcyBhbmQgaGVscGVyIGZ1bmN0aW9uc1xuaW1wb3J0IHsgaXNDbGllbnQgfSBmcm9tIFwiQC91dGlsaXMvaXNDbGllbnRcIjtcbmltcG9ydCB7IHVzZVNlc3Npb25TdG9yYWdlIH0gZnJvbSBcIkAvaG9va3MvdXNlU2Vzc2lvblN0b3JhZ2VcIjtcbmltcG9ydCB7IGNoZWNrU2Vzc2lvbiB9IGZyb20gXCJAL3V0aWxpcy9DaGVja1Nlc3Npb25cIjtcbmltcG9ydCBCdXR0b25Mb2FkaW5nQ29tcG9uZW50IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2J1dHRvbkNvbXBvbmV0XCI7XG5cbi8vIGltcG9ydCB7IEhlYWRlciB9IGZyb20gXCJAL2FwcC9jb21wb25lbnRzL0hlYWRlclwiO1xuLy8gRGFzaGJvYXJkXG5cbmltcG9ydCB7IHVzZUNoYXRDb252ZXJzYXRpb24gfSBmcm9tIFwiQC9ob29rcy9Db252ZXJzYXRpb25Db250ZXh0XCI7XG5pbXBvcnQgdXNlQ3JlYXRlQ29udmVyc2F0aW9uIGZyb20gXCJAL2hvb2tzL2NyZWF0ZUNvbnZlcnNhdGlvblwiO1xuaW1wb3J0IHVzZUNvbnZlcnNhdGlvbnMgZnJvbSBcIkAvaG9va3MvdXNlQ29udmVyc2F0aW9uc1wiO1xuLy9DaGF0IENvbnRhaW5lclxuaW1wb3J0IHsgQ2hhdENvbnRhaW5lciB9IGZyb20gXCIuLi8uLi9DaGF0Q29udGFpbmVyXCI7XG5pbXBvcnQgeyBDaGF0TWVzc2FnZXNDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vQ2hhdE1lc3NhZ2VcIjtcbmltcG9ydCB7IEd1aWRlbGluZXMgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9HdWlkZWxpbmVzXCI7XG5cbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcblxuLy8gaW1wb3J0IEZsb2F0aW5nU2Nyb2xsQnV0dG9uIGZyb20gXCJAL2FwcC9jb21wb25lbnRzL1Njcm9sbFRvQm90dG9tQnV0dG9uXCI7XG4vLyBpbXBvcnQgT3BlbkNoYXRDb250YWluZXIgZnJvbSBcIkAvYXBwL2NvbXBvbmVudHMvaGVscGVyL29wZW5DaGF0Q29udGFpbmVyQ29tcG9uZW50XCI7XG4vLyBpbXBvcnQgeyB1c2VTZXNzaW9uR2F0ZSB9IGZyb20gXCJAL2FwcC9wcm9maWxlL19taWRkbGV3aGVyZVwiO1xuLy8gaW1wb3J0IExvYWRpbmdDb21wb25lbnQgZnJvbSBcIkAvYXBwL2NvbXBvbmVudHMvaGVscGVyL0xvYWRpbmdcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvbnZlcnNhdGlvblBhZ2UoKSB7XG4gIGNvbnN0IGNoYXRCb3RVcmwgPSBcIiBodHRwOi8vMTI3LjAuMC4xOjUwMDAvY2hhdFwiO1xuICBjb25zdCBnZW5lcmF0ZVBkZlVybCA9IFwiIGh0dHA6Ly8xMjcuMC4wLjE6NTAwMC9nZW5lcmF0ZV9wZGZcIjtcblxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgZm9ybVJlZiA9IHVzZVJlZjxIVE1MRm9ybUVsZW1lbnQ+KG51bGwpO1xuICAvL1Nob3VsZCB3cmFwIHRoZXNlIGluIGEgYmlnZ2VyIGZ1bmN0aW9uIHNpbmNlIGJlaW5nIHVzZWQgbXVsdGlwbGUgdGltZXM/XG5cbiAgY29uc3QgW3Nlc3Npb25TdGF0dXMsIHNldFNlc3Npb25TdGF0dXNdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgY29uc3QgW3VzZXJJZCwgc2V0VXNlcklkXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IFtzaG93R3VpZGVsaW5lcywgc2V0U2hvd0d1aWRlbGluZXNdID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgY29uc3QgW3BkZkltYWdlcywgc2V0UGRmSW1hZ2VzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IFtzZWxlY3RlZFBkZkltYWdlLCBzZXRTZWxlY3RlZFBkZkltYWdlXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIC8vTGlzdCBvZiBCYWNrcm91bmQgUERGIGltYWdzZVxuICBjb25zdCBbYmFja2dyb3VuZEltYWdlcywgc2V0QmFja2dyb3VuZEltYWdlc10gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuXG4gIGNvbnN0IHtcbiAgICB1c2VyTmFtZSxcbiAgICBzZXRVc2VyTmFtZSxcbiAgICBzcGxpdFVzZXJOYW1lLFxuICAgIGVtYWlsLFxuICAgIHNldEVtYWlsLFxuICAgIHNldFNwbGl0VXNlck5hbWUsXG4gIH0gPSB1c2VTZXNzaW9uU3RvcmFnZSgpO1xuXG4gIGNvbnN0IHsgcmVzcG9uc2VzLCBzZXRSZXNwb25zZXMsIG1lc3NhZ2UsIHNldE1lc3NhZ2UgfSA9XG4gICAgdXNlQ2hhdENvbnZlcnNhdGlvbigpO1xuXG5jb25zdCBsb2NhbFN0b3JhZ2VDb252b0lkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50Q29udmVyc2F0aW9uSWRcIik7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGxvY2FsU3RvcmFnZUNvbnZvSWQpIHtcbiAgICAgIHNldEN1cnJlbnRDb252ZXJzYXRpb25JZChsb2NhbFN0b3JhZ2VDb252b0lkKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCB7IGRhdGE6IHNlc3Npb24sIHN0YXR1cyB9ID0gdXNlU2Vzc2lvbigpO1xuICBjb25zdCBbbWVzc2FnZXNJc0xvYWRpbmcsIHNldE1lc3NhZ2VzSXNMb2FkaW5nXSA9IHVzZVN0YXRlPG51bGwgfCBib29sZWFuPihcbiAgICBudWxsXG4gICk7XG5cbiAgY29uc3QgW2lzUmVwb25zZUxvYWRpbmcsIHNldFJlc3BvbnNlTG9hZGluZ10gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG5cbiAgLy9TZXQgdGhlIGNvbnZlcnNhdGlvblxuICBjb25zdCBbY3VycmVudENvbnZlcnNhdGlvbklkLCBzZXRDdXJyZW50Q29udmVyc2F0aW9uSWRdID0gdXNlU3RhdGU8XG4gICAgbnVtYmVyIHwgc3RyaW5nIHwgbnVsbFxuICA+KG51bGwpO1xuXG4gIC8vIGNvbnN0IFtuZXdUaXRsZSwgc2V0TmV3VGl0bGVdID0gdXNlU3RhdGUoXCJcIik7XG5cbiAgY29uc3QgeyBjb252ZXJzYXRpb25zLCBpc0xvYWRpbmcsIHNldENvbnZlcnNhdGlvbnMgfSA9IHVzZUNvbnZlcnNhdGlvbnMoXG4gICAgc2Vzc2lvbiBhcyBhbnlcbiAgKTtcblxuICAvL0NyZWF0aW5nIGEgbmV3IENvbnZlcnNhdGlvbi5cbiAgY29uc3QgeyBjcmVhdGVDb252ZXJzYXRpb24sIG5ld1RpdGxlLCBzZXROZXdUaXRsZSwgaXNDcmVhdGVMb2FkaW5nLCBlcnJvciB9ID1cbiAgICB1c2VDcmVhdGVDb252ZXJzYXRpb24oXG4gICAgICBzZXNzaW9uIGFzIFNlc3Npb24sXG4gICAgICBzZXRDb252ZXJzYXRpb25zIGFzIGFueSxcbiAgICAgIHNldEN1cnJlbnRDb252ZXJzYXRpb25JZFxuICAgICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjaGVja1Nlc3Npb24oc3RhdHVzLCB7XG4gICAgICBzZXRVc2VySWQsXG4gICAgICBzZXRVc2VyTmFtZSxcbiAgICAgIHNldFNlc3Npb25TdGF0dXMsXG4gICAgICBzZXRFbWFpbCxcbiAgICAgIHNldFNwbGl0VXNlck5hbWUsXG4gICAgICBpc0NsaWVudCxcbiAgICAgIHNlc3Npb24sXG4gICAgICByb3V0ZXIsXG4gICAgICBlbWFpbCxcbiAgICAgIHVzZXJOYW1lLFxuICAgICAgc3BsaXRVc2VyTmFtZSxcbiAgICB9KTtcbiAgfSwgW3N0YXR1c10pO1xuXG4gIC8vVGhpcyBmdW5jaXRubyBzaGlmdHMgYW5kIHNob3dzIHRoZSBtb2JpbGUgQ2hhdCBjY29udGFpbmVyXG4gIGNvbnN0IGNoYXRDb250YWluZXJSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBbaXNBdFplcm8sIHNldElzQXRaZXJvXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTsgLy8gU3RhdGUgdG8gdHJhY2sgdGhlIHBvc2l0aW9uXG5cbiAgY29uc3QgaGFuZGxlTW9iaWxlQ2hhdEJ0bkNsaWNrID0gKCkgPT4ge1xuICAgIGlmIChjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGlmIChpc0F0WmVybykge1xuICAgICAgICBjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKC0xMDAlKVwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhdENvbnRhaW5lclJlZi5jdXJyZW50LnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgwcHgpXCI7XG4gICAgICB9XG4gICAgICBzZXRJc0F0WmVybyghaXNBdFplcm8pOyAvLyBUb2dnbGUgdGhlIHN0YXRlXG4gICAgfVxuICB9O1xuXG4gIC8vIEVmZmVjdCB0byBoYW5kbGUgdmlld3BvcnQgcmVzaXplXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xuICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDk1MCAmJiBjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2hhdENvbnRhaW5lclJlZi5jdXJyZW50LnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgwcHgpXCI7XG4gICAgICAgIHNldElzQXRaZXJvKGZhbHNlKTsgLy8gUmVzZXQgdGhlIHN0YXRlXG4gICAgICB9IGVsc2UgaWYgKGNoYXRDb250YWluZXJSZWYuY3VycmVudCkge1xuICAgICAgICBjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKC0xMDAlKVwiO1xuICAgICAgICBzZXRJc0F0WmVybyh0cnVlKTsgLy8gUmVzZXQgdGhlIHN0YXRlXG4gICAgICB9XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVJlc2l6ZSk7XG5cbiAgICAvLyBDbGVhbnVwIGV2ZW50IGxpc3RlbmVyIG9uIGNvbXBvbmVudCB1bm1vdW50XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVJlc2l6ZSk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHVzZXJOYW1lICE9PSBudWxsKSB7XG4gICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwidXNlck5hbWVcIiwgdXNlck5hbWUpO1xuICAgIH1cblxuICAgIGlmIChzcGxpdFVzZXJOYW1lICE9PSBcIlwiKSB7XG4gICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwic3BsaXRVc2VyTmFtZVwiLCBzcGxpdFVzZXJOYW1lKTtcbiAgICB9XG4gIH0sIFt1c2VyTmFtZSwgc3BsaXRVc2VyTmFtZV0pO1xuXG4gIGNvbnN0IFtlZGl0VGl0bGVJZCwgc2V0RWRpdFRpdGxlSWRdID0gdXNlU3RhdGU8bnVsbD4obnVsbCk7XG4gIGNvbnN0IFtlZGl0ZWRUaXRsZSwgc2V0RWRpdGVkVGl0bGVdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgY29uc3QgW2VkaXRpbmdUaXRsZSwgc2V0RWRpdGluZ1RpdGxlXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgW3RpdGxlVXBkYXRlZCwgc2V0VGl0bGVVcGRhdGVkXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTsgLy8gTmV3IHN0YXRlIGZvciB0aXRsZSB1cGRhdGVzXG5cbiAgLy9FZGl0aW5nIHRoZSBhYmlsaXR5IHRvIGNoYW5nZSB0aGUgZXhpc3RpbmcgdGl0bGUuXG4gIGNvbnN0IGhhbmRsZVRpdGxlQ2xpY2sgPSAoY29udm9JZDogc3RyaW5nIHwgbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgY29udmVyc2F0aW9uID0gY29udmVyc2F0aW9ucy5maW5kKFxuICAgICAgKGNvbnZvKSA9PiAoY29udm8gYXMgYW55KS5jb252ZXJzYXRpb25JZCA9PT0gY29udm9JZFxuICAgICk7XG5cbiAgICBpZiAoY29udmVyc2F0aW9uKSB7XG4gICAgICBzZXRFZGl0VGl0bGVJZCgoY29udmVyc2F0aW9uIGFzIGFueSkuY29udmVyc2F0aW9uSWQpO1xuICAgICAgc2V0RWRpdGVkVGl0bGUoKGNvbnZlcnNhdGlvbiBhcyBhbnkpLnRpdGxlKTtcbiAgICAgIHNldEVkaXRpbmdUaXRsZSh0cnVlIGFzIGJvb2xlYW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgQ29udmVyc2F0aW9uIHdpdGggSUQgJHtjb252b0lkfSBub3QgZm91bmRgKTtcbiAgICB9XG4gIH07XG4gIHVzZUVmZmVjdCgoKSA9PiB7fSwgW2VkaXRUaXRsZUlkLCBlZGl0ZWRUaXRsZV0pO1xuXG4gIGNvbnN0IGhhbmRsZVRpdGxlQ2hhbmdlID0gKGV2ZW50OiBhbnkpID0+IHtcbiAgICBzZXRFZGl0ZWRUaXRsZShldmVudC50YXJnZXQudmFsdWUpO1xuICB9O1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGdldENvbnZlcnNhdGlvbihjb252ZXJzYXRpb25JZDogYW55KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvJHtjb252ZXJzYXRpb25JZH1gKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGNvbnZlcnNhdGlvblwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXBkYXRlZENvbnZlcnNhdGlvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFxuICAgICAgLy8gICBcIkxvZ2dpbmcgdGhlIGNvbnZlcmF0aW9ucyBiZWZvcmUgZXJyb3J3XCIsXG4gICAgICAvLyAgIHVwZGF0ZWRDb252ZXJzYXRpb25cbiAgICAgIC8vICk7XG4gICAgICAvLyBVcGRhdGUgbG9jYWwgc3RhdGVcbiAgICAgIHNldENvbnZlcnNhdGlvbnMoKHByZXZDb252ZXJzYXRpb25zKSA9PiB7XG4gICAgICAgIHJldHVybiBwcmV2Q29udmVyc2F0aW9ucy5tYXAoKGNvbnZvKSA9PlxuICAgICAgICAgIGNvbnZvID09PSBjb252ZXJzYXRpb25JZFxuICAgICAgICAgICAgPyB7IC4uLmNvbnZvLCB0aXRsZTogdXBkYXRlZENvbnZlcnNhdGlvbi50aXRsZSB9XG4gICAgICAgICAgICA6IGNvbnZvXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgdXBkYXRlTG9jYWxTdG9yYWdlKHVwZGF0ZWRDb252ZXJzYXRpb24sIGNvbnZlcnNhdGlvbklkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGNvbnZlcnNhdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7IC8vIFJlLXRocm93IHRvIGhhbmRsZSBpdCBpbiB0aGUgVUkgbGF5ZXJcbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBkZWxldGVDb252ZXJzYXRpb24oY29udmVyc2F0aW9uSWQ6IHN0cmluZyB8IG51bWJlcikge1xuICAgIGNvbnN0IGN1cnJlbnRDb252ZXJzYXRpb25zID0gY29udmVyc2F0aW9ucztcblxuXG4gICAgY29uc29sZS5sb2coXCJDb252ZXJzYXRpb24gSURcIiwgY29udmVyc2F0aW9uSWQpO1xuXG4gICAgLy8gT3B0aW1pc3RpY2FsbHkgcmVtb3ZlIHRoZSBjb252ZXJzYXRpb24gZnJvbSBVSVxuICAgIGNvbnN0IHVwZGF0ZWRDb252ZXJzYXRpb25zID0gY3VycmVudENvbnZlcnNhdGlvbnMuZmlsdGVyKFxuICAgICAgKGNvbnZvKSA9PiAoY29udm8gYXMgYW55KS5jb252ZXJzYXRpb25JZCAhPT0gY29udmVyc2F0aW9uSWRcbiAgICApO1xuXG4gICAgc2V0Q29udmVyc2F0aW9ucyh1cGRhdGVkQ29udmVyc2F0aW9ucyk7XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgIFwiY29udmVyc2F0aW9uc1wiLFxuICAgICAgSlNPTi5zdHJpbmdpZnkodXBkYXRlZENvbnZlcnNhdGlvbnMpXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2RlbGV0ZUNvbnZlcnNhdGlvbnMvYCwge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBpZDogY29udmVyc2F0aW9uSWQgfSksXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGRlbGV0ZSB0aGUgY29udmVyc2F0aW9uXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBGaWx0ZXIgb3V0IHRoZSBkZWxldGVkIGNvbnZlcnNhdGlvblxuICAgICAgY29uc3QgdXBkYXRlZENvbnZlcnNhdGlvbnMgPSBjb252ZXJzYXRpb25zLmZpbHRlcihcbiAgICAgICAgKGNvbnZvKSA9PiAoY29udm8gYXMgYW55KS5jb252ZXJhdG9pbklEICE9PSBjb252ZXJzYXRpb25JZFxuICAgICAgKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiTG9nZ2luZyBvdXQgdGhlIENvbnZlcnNhdGlvbiBGaWx0ZXJcIiwgY29udmVyc2F0aW9ucyk7XG5cbiAgICAgIC8vIFVwZGF0ZSBzdGF0ZSBhbmQgbG9jYWwgc3RvcmFnZVxuICAgICAgc2V0Q29udmVyc2F0aW9ucyh1cGRhdGVkQ29udmVyc2F0aW9ucyk7IC8vIFVwZGF0ZSBSZWFjdCBzdGF0ZVxuICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgXCJjb252ZXJzYXRpb25zXCIsXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRDb252ZXJzYXRpb25zKVxuICAgICAgKTsgLy8gVXBkYXRlIGxvY2FsIHN0b3JhZ2VcblxuICBcblxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgY29udmVyc2F0aW9ucyBzdGF0ZVxuICAgICAgICBjb25zdCB1cGRhdGVkQ29udmVyc2F0aW9ucyA9IGNvbnZlcnNhdGlvbnMuZmlsdGVyKFxuICAgICAgICAgIChjb252bykgPT4gKGNvbnZvIGFzIGFueSkuY29udmVyc2F0aW9uSWQgIT09IGNvbnZlcnNhdGlvbklkXG4gICAgICAgICk7XG4gICAgICAgIHNldENvbnZlcnNhdGlvbnModXBkYXRlZENvbnZlcnNhdGlvbnMpO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgc2Vzc2lvbiBzdG9yYWdlXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgICAgXCJjb252ZXJzYXRpb25zXCIsXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkodXBkYXRlZENvbnZlcnNhdGlvbnMpXG4gICAgICAgICk7XG4gICAgICAgIHJvdXRlci5wdXNoKGAvYWkvY2hhdGApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgY29udmVyc2F0aW9uOlwiLCBlcnJvcik7XG4gICAgICBhbGVydChcIkNvdWxkIG5vdCBkZWxldGUgdGhlIGNvbnZlcnNhdGlvbi4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTG9jYWxTdG9yYWdlKFxuICAgIHVwZGF0ZWRDb252ZXJzYXRpb246IGFueSxcbiAgICBjb252ZXJzYXRpb25JZDogbnVtYmVyXG4gICkge1xuICAgIGNvbnN0IGNhY2hlZENvbnZlcnNhdGlvbnMgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwiY29udmVyc2F0aW9uc1wiKTtcblxuICAgIGlmIChjYWNoZWRDb252ZXJzYXRpb25zKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBQYXJzZSB0aGUgY2FjaGVkIGNvbnZlcnNhdGlvbnNcbiAgICAgICAgY29uc3QgcGFyc2VkQ29udmVyc2F0aW9ucyA9IEpTT04ucGFyc2UoY2FjaGVkQ29udmVyc2F0aW9ucyk7XG5cbiAgICAgICAgLy8gRW5zdXJlIHRoYXQgcGFyc2VkQ29udmVyc2F0aW9ucyBpcyBhbiBhcnJheVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWRDb252ZXJzYXRpb25zKSkge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRDYWNoZSA9IHBhcnNlZENvbnZlcnNhdGlvbnMubWFwKChjb252bykgPT5cbiAgICAgICAgICAgIGNvbnZvLmNvbnZlcnNhdGlvbklkID09PSBjb252ZXJzYXRpb25JZFxuICAgICAgICAgICAgICA/IHsgLi4uY29udm8sIHRpdGxlOiB1cGRhdGVkQ29udmVyc2F0aW9uLnRpdGxlIH1cbiAgICAgICAgICAgICAgOiBjb252b1xuICAgICAgICAgICk7XG5cbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwiY29udmVyc2F0aW9uc1wiLCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkQ2FjaGUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUGFyc2VkIGNhY2hlZCBjb252ZXJzYXRpb25zIGlzIG5vdCBhbiBhcnJheVwiKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcGFyc2luZyBjYWNoZWQgY29udmVyc2F0aW9uczpcIiwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0VGl0bGUgPSBhc3luYyAoZXZlbnQ6IGFueSkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgZm9ybSBzdWJtaXNzaW9uXG4gICAgbGV0IHRpdGxlQ2hhbmdlOiBzdHJpbmcgPSBcIlwiO1xuXG5cbiAgICBjb25zb2xlLmxvZyhcIkV2ZW50IEtleVwiLCBldmVudC5rZXkpO1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCBmb3JtIHN1Ym1pc3Npb25cbiAgICAgIGNvbnN0IG5ld1RpdGxlID0gZWRpdGVkVGl0bGU7IC8vIENhcHR1cmUgdGhlIHRpdGxlIGF0IHRoZSB0aW1lIG9mIHN1Ym1pc3Npb25cbiAgICAgIHRpdGxlQ2hhbmdlID0gZWRpdFRpdGxlSWQgPz8gXCJcIjtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiTmV3IHRpdGxlIHRvIGJlIHNldDpcIiwgbmV3VGl0bGUpO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJOZXcgdGl0bGUgSWQgYmVpbmcgbG9nZ2VkXCIsIGVkaXRUaXRsZUlkKTtcblxuICAgICAgaWYgKGVkaXRUaXRsZUlkICE9PSBudWxsICYmIGVkaXRUaXRsZUlkICE9PSBcIlwiKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDb252ZXJzYXRpb25zID0gY29udmVyc2F0aW9ucy5tYXAoKGNvbnZvKSA9PlxuICAgICAgICAgIChjb252byBhcyBhbnkpLmNvbnZlcnNhdGlvbklkID09PSBlZGl0VGl0bGVJZFxuICAgICAgICAgICAgPyB7IC4uLmNvbnZvLCB0aXRsZTogbmV3VGl0bGUgfVxuICAgICAgICAgICAgOiBjb252b1xuICAgICAgICApO1xuICAgICAgICBzZXRDb252ZXJzYXRpb25zKHVwZGF0ZWRDb252ZXJzYXRpb25zKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJVcGRhdGVkIGNvbnZlcnNhdGlvbnM6XCIsIHVwZGF0ZWRDb252ZXJzYXRpb25zKTtcblxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAgIFwiY29udmVyc2F0aW9uc1wiLFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRDb252ZXJzYXRpb25zKVxuICAgICAgICApO1xuXG4gICAgICAgIHNldEVkaXRUaXRsZUlkKG51bGwpOyAvLyBFeGl0IGVkaXQgbW9kZVxuICAgICAgICBzZXRFZGl0ZWRUaXRsZShcIlwiKTsgLy8gQ2xlYXIgdGhlIGVkaXRlZCB0aXRsZSBzdGF0ZVxuICAgICAgICBzZXRFZGl0aW5nVGl0bGUoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBsb2NhbENvbnZlcnNhdGlvbklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50Q29udmVyc2F0aW9uSWRcIik7XG4gICAgY29uc29sZS5sb2coXCJMb2NhbCBDb252ZXJzYXRpb24gSURcIiwgbG9jYWxDb252ZXJzYXRpb25JZCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvc3VibWl0VGl0bGUvYCwge1xuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0aXRsZTogZWRpdGVkVGl0bGUsIGlkOiBsb2NhbENvbnZlcnNhdGlvbklkIH0pLCAvLyBTZW5kIGVkaXRlZFRpdGxlIGRpcmVjdGx5XG4gICAgICB9KTtcblxuICAgICAgLy8gY29uc29sZS5sb2coXCJBcmUgeW91IHNlbmRpbmcgdGhlIG5ldyBUaXRsZVwiLCBlZGl0ZWRUaXRsZSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAvLyBhd2FpdCBnZXRDb252ZXJzYXRpb24oZWRpdFRpdGxlSWQpO1xuICAgICAgICBzZXRFZGl0aW5nVGl0bGUoZmFsc2UpO1xuICAgICAgICBzZXRUaXRsZVVwZGF0ZWQoKHByZXYpID0+ICFwcmV2KTsgLy8gVG9nZ2xlIHRoZSB0aXRsZVVwZGF0ZWQgc3RhdGVcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gdXBkYXRlIHRpdGxlXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgdGl0bGU6XCIsIGVycm9yKTtcblxuICAgICAgLy8gSWYgdGhlIHVwZGF0ZSBmYWlscywgcmV2ZXJ0IHRoZSBjaGFuZ2UgaW4gdGhlIFVJIGFuZCBhbGVydCB0aGUgdXNlclxuICAgICAgY29uc3Qgb3JpZ2luYWxDb252ZXJzYXRpb25zID0gY29udmVyc2F0aW9ucy5tYXAoKGNvbnZvKSA9PlxuICAgICAgICBjb252by5jb252ZXJzYXRpb25JZCA9PT0gZWRpdFRpdGxlSWRcbiAgICAgICAgICA/IHsgLi4uY29udm8sIHRpdGxlOiAoY29udm8gYXMgYW55KS50aXRsZSB9XG4gICAgICAgICAgOiBjb252b1xuICAgICAgKTtcblxuICAgICAgc2V0Q29udmVyc2F0aW9ucyhvcmlnaW5hbENvbnZlcnNhdGlvbnMpO1xuICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgXCJjb252ZXJzYXRpb25zXCIsXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KG9yaWdpbmFsQ29udmVyc2F0aW9ucylcbiAgICAgICk7XG5cbiAgICAgIGFsZXJ0KFwiRmFpbGVkIHRvIHVwZGF0ZSB0aXRsZSwgcGxlYXNlIHRyeSBhZ2Fpbi5cIik7IC8vIEluZm9ybSB0aGUgdXNlclxuICAgIH1cbiAgfTtcblxuICBjb25zdCBjaGF0RGFzaEJvYXJkUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgLy8gQ2hlY2sgZm9yIHNwZWNpYWwgY29tbWFuZHNcbiAgICBjb25zdCBzcGVjaWFsQ29tbWFuZHMgPSB7XG4gICAgICAnYnInOiAnJGJyJyxcbiAgICAgICdkb3duJzogJyRkb3duJyxcbiAgICAgICdoZWxwJzogJyRoZWxwJyxcbiAgICAgICdsaXN0YnInOiAnJGxpc3RicicsXG4gICAgICAnbmV3JzogJyRuZXcnLFxuICAgICAgJ3BkZic6ICckcGRmJyxcbiAgICAgICdyZW0nOiAnJHJlbScsXG4gICAgICAndXNhZ2UnOiAnJHVzYWdlJyxcbiAgICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbG9hZFBkZkltYWdlcyA9ICgpID0+IHtcbiAgICAgIC8vIEFzc3VtaW5nIHRoZSBwdWJsaWMgZm9sZGVyIGlzIGF0IHRoZSByb290IG9mIHlvdXIgcHJvamVjdFxuICAgICAgY29uc3QgcGRmSW1hZ2VzQ29udGV4dCA9IHJlcXVpcmUuY29udGV4dChcbiAgICAgICAgXCIvcHVibGljL3BkZkltYWdlXCIsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICAvXFwuKHBuZ3xqcGU/Z3xnaWYpJC9pXG4gICAgICApO1xuICAgICAgY29uc3QgaW1hZ2VGaWxlcyA9IHBkZkltYWdlc0NvbnRleHRcbiAgICAgICAgLmtleXMoKVxuICAgICAgICAubWFwKChrZXkpID0+IGAvcGRmSW1hZ2Uke2tleS5yZXBsYWNlKFwiLlwiLCBcIlwiKX1gKTtcbiAgICAgIHNldFBkZkltYWdlcyhpbWFnZUZpbGVzKTtcbiAgICB9O1xuXG4gICAgbG9hZFBkZkltYWdlcygpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IEZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmICghbWVzc2FnZS50cmltKCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRW1wdHkgbWVzc2FnZSwgcmV0dXJuaW5nXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldE1lc3NhZ2VzSXNMb2FkaW5nKHRydWUpO1xuXG4gICAgY29uc3QgY29tbWFuZCA9IG1lc3NhZ2UudHJpbSgpLnNwbGl0KFwiIFwiKVswXS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCIvXCIsIFwiXCIpO1xuXG4gICAgY29uc29sZS5sb2coXCJDb21tYW5kXCIsIGNvbW1hbmQpO1xuXG4gICAgaWYgKGNvbW1hbmQgPT09IFwiJGxpc3RiclwiKSB7XG4gICAgICBzZXRSZXNwb25zZXMoKHByZXZSZXNwb25zZXMpID0+IFtcbiAgICAgICAgLi4ucHJldlJlc3BvbnNlcyxcbiAgICAgICAge1xuICAgICAgICAgIHF1ZXN0aW9uOiBtZXNzYWdlLFxuICAgICAgICAgIHJlc3BvbnNlOiBcIkhlcmUgYXJlIHlvdXIgUERGIGltYWdlczpcIixcbiAgICAgICAgICBpbWFnZVVybDogcGRmSW1hZ2VzLCAvLyBBZGQgdGhlIGxvYWRlZCBQREYgaW1hZ2VzXG4gICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuICAgICAgc2V0TWVzc2FnZShcIlwiKTsgLy8gQ2xlYXIgdGhlIG1lc3NhZ2UgaW5wdXRcbiAgICAgIHNldE1lc3NhZ2VzSXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHJldHVybjsgLy8gRXhpdCB0aGUgZnVuY3Rpb24gYWZ0ZXIgaGFcbiAgICB9XG5cbiAgICAvLyBOZXcgZnVuY3Rpb25hbGl0eSB0byBoYW5kbGVuZGxlICRiciA8bnVtPlxuICAgIGlmIChjb21tYW5kLnN0YXJ0c1dpdGgoXCIkYnJcIikpIHtcblxuICAgIH1cblxuICAgIFxuXG4gICAgaWYgKGNvbW1hbmQgPT09IFwiJGJyXCIpIHtcbiAgICAgIFxuXG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KG1lc3NhZ2Uuc3BsaXQoXCIgXCIpWzFdLCAxMCk7IC8vIEdldCB0aGUgbnVtYmVyIGFmdGVyICRiclxuICAgICAgaWYgKCFpc05hTihpbmRleCkgJiYgaW5kZXggPj0gMCAmJiBpbmRleCA8IHBkZkltYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJTZWxlY3RlZCBQREYgaW1hZ2VcIiwgaW5kZXgsIFwiUGF0aDpcIiwgcGRmSW1hZ2VzW2luZGV4XSk7XG4gICAgICAgIFxuXG4gICAgICAgIC8vIExvZyB0aGUgcGF0aCB0byB0aGUgc2VsZWN0ZWQgUERGIGltYWdlXG4gICAgICAgIHNldFNlbGVjdGVkUGRmSW1hZ2UocGRmSW1hZ2VzW2luZGV4XSk7IC8vIFNldCB0aGUgc2VsZWN0ZWQgUERGIGltYWdlIGJ5IGluZGV4XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkludmFsaWQgaW5kZXggZm9yIFBERiBzZWxlY3Rpb25cIik7XG4gICAgICB9XG4gICAgICBzZXRNZXNzYWdlc0lzTG9hZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGNvbW1hbmQgPT09IFwiJHBkZlwiKSB7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiU2VsZWN0ZWQgUERGIGltYWdlXCIsIHNlbGVjdGVkUGRmSW1hZ2UpO1xuXG4gICAgICB1cGxvYWRJbWFnZShzZWxlY3RlZFBkZkltYWdlIGFzIHN0cmluZywgbWVzc2FnZSBhcyBzdHJpbmcpO1xuICAgICAgc2V0TWVzc2FnZXNJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYoY29tbWFuZCA9PT0gXCIkaGVscFwiKSB7XG4gICAgICBjb25zdCBjb21tYW5kTGlzdCA9IE9iamVjdC5rZXlzKHNwZWNpYWxDb21tYW5kcykuam9pbihcIiwgXCIpOyAvLyBDcmVhdGUgYSBsaXN0IG9mIGNvbW1hbmRzXG4gICAgICBzZXRSZXNwb25zZXMoKHByZXZSZXNwb25zZXMpID0+IFtcbiAgICAgICAgLi4ucHJldlJlc3BvbnNlcyxcbiAgICAgICAge1xuICAgICAgICAgIHF1ZXN0aW9uOiBtZXNzYWdlLFxuICAgICAgICAgIHJlc3BvbnNlOiBgSGVyZSBhcmUgeW91ciBhdmFpbGFibGUgY29tbWFuZHM6ICQke2NvbW1hbmRMaXN0fWAsIC8vIFVwZGF0ZSByZXNwb25zZSB0byBzaG93IGNvbW1hbmRzXG4gICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuICAgICAgc2V0TWVzc2FnZXNJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIHVwbG9hZEltYWdlKGltYWdlUGF0aDogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgIC8vIEZldGNoIHRoZSBpbWFnZSBhcyBhIEJsb2JcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaW1hZ2VQYXRoKTtcbiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7IC8vIENvbnZlcnQgdGhlIHJlc3BvbnNlIHRvIGEgQmxvYlxuICAgICAgY29uc3QgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgXCJpbWFnZS5wbmdcIiwgeyB0eXBlOiBibG9iLnR5cGUgfSk7IC8vIENyZWF0ZSBhIEZpbGUgb2JqZWN0XG4gICAgXG4gICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7IC8vIENoYW5nZSAnZmlsZXMnIHRvICdmaWxlJ1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdtZXNzYWdlJywgbWVzc2FnZSk7IC8vIEFkZCB0aGUgbWVzc2FnZSB0byB0aGUgZm9ybSBkYXRhXG5cbiAgICAgIGZldGNoKCdodHRwOi8vMTI3LjAuMC4xOjUwMDAvdXBsb2FkJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogZm9ybURhdGEsXG4gIFxuICAgICAgfSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJlc3BvbnNlIGlzIGEgUERGXG4gICAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKTtcbiAgICAgICAgICBpZiAoY29udGVudFR5cGUgJiYgY29udGVudFR5cGUuaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi9wZGZcIikpIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBQREYgZG93bmxvYWRcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5ibG9iKCkudGhlbihibG9iID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgIGEuaHJlZiA9IHVybDtcbiAgICAgICAgICAgICAgYS5kb3dubG9hZCA9ICdvdXRwdXQucGRmJzsgLy8gU3BlY2lmeSB0aGUgZG93bmxvYWQgbmFtZVxuICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xuICAgICAgICAgICAgICBhLmNsaWNrKCk7XG4gICAgICAgICAgICAgIGEucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSGFuZGxlIEpTT04gcmVzcG9uc2VcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTmV0d29yayByZXNwb25zZSB3YXMgbm90IG9rLicpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVcGxvYWQgc3VjY2Vzc2Z1bDonLCBkYXRhKTtcbiAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGltYWdlOicsIGVycm9yKTsgXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjb21tYW5kID09PSBcIiRyZW1cIikge1xuICAgICAgYXdhaXQgaGFuZGxlVXBsb2FkRmlsZShlKTsgLy8gQ2FsbCBoYW5kbGVVcGxvYWRGaWxlIGRpcmVjdGx5XG4gICAgICBjb25zb2xlLmxvZyhcIlJlbW92ZSBjb21tYW5kXCIsIG1lc3NhZ2UpO1xuICAgICAgc2V0TWVzc2FnZShcIlwiKTtcbiAgICAgIHJldHVyblxuICAgIH1cblxuXG5cblxuXG5cblxuICAgIFxuICAgIFxuXG4gICAgLy8gQ2hlY2sgZm9yIHRoZSAvdXBzY2FsZSBjb21tYW5kXG4gICAgaWYgKGNvbW1hbmQgPT09IFwidXBzY2FsZVwiKSB7XG4gICAgICBhd2FpdCBoYW5kbGVVcGxvYWRGaWxlKGUpOyAvLyBDYWxsIGhhbmRsZVVwbG9hZEZpbGUgZGlyZWN0bHlcbiAgICAgIHJldHVybjsgLy8gRXhpdCB0aGUgZnVuY3Rpb24gYWZ0ZXIgaGFuZGxpbmcgdGhlIHVwc2NhbGUgY29tbWFuZFxuICAgIH1cblxuICAgIGlmIChjb21tYW5kIGluIHNwZWNpYWxDb21tYW5kcykge1xuICAgICAgLy8gSGFuZGxlIHNwZWNpYWwgY29tbWFuZFxuICAgICAgYXdhaXQgaGFuZGxlU3BlY2lhbENvbW1hbmQoY29tbWFuZCwgbWVzc2FnZSwgZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlZ3VsYXIgY2hhdCBmbG93XG4gICAgICBpZiAoaXNDbGllbnQoKSkge1xuICAgICAgICBpZiAoIWN1cnJlbnRDb252ZXJzYXRpb25JZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ3JlYXRpbmcgbmV3IGNvbnZlcnNhdGlvblwiKTtcbiAgICAgICAgICBhd2FpdCBjcmVhdGVDb252ZXJzYXRpb24oKS50aGVuKChjb252b0lEKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5ldyBjb252ZXJzYXRpb24gY3JlYXRlZCB3aXRoIElEOlwiLCBjb252b0lEKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnRDb252ZXJzYXRpb25JZChjb252b0lEKTtcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50Q29udmVyc2F0aW9uSWRcIiwgY29udm9JRCk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRDb252ZXJzYXRpb25JZFwiLCBjb252b0lEKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDb252ZXJzYXRpb25JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFxuICAgICAgICAgIFwiY3VycmVudENvbnZlcnNhdGlvbklkXCJcbiAgICAgICAgKTtcblxuICAgICAgICAvLyAxLiBTZXQgdXAgdGhlIG5ldyByZXNwb25zZSB3aXRob3V0IGFueSBib3QgcmVzcG9uc2UgeWV0LlxuICAgICAgICBjb25zdCBuZXdSZXNwb25zZSA9IHtcbiAgICAgICAgICBxdWVzdGlvbjogbWVzc2FnZSxcbiAgICAgICAgICByZXNwb25zZTogXCJcIixcbiAgICAgICAgICBpZDogXCJ0ZW1wXCIsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVXNlIGZ1bmN0aW9uYWwgdXBkYXRlIGZvciBzdGF0ZVxuICAgICAgICBzZXRSZXNwb25zZXMoKHJlc3BvbnNlcykgPT4gWy4uLnJlc3BvbnNlcywgbmV3UmVzcG9uc2VdKTtcblxuICAgICAgICBzZXRNZXNzYWdlKFwiXCIpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2hhdCBpcyBzdGlsbCBiaWVuZyBjYWxsZWRcIiwgcmVzcG9uc2VzKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIDIuIEZldGNoIGJvdCByZXBseSBmcm9tIHRoZSBBUElcbiAgICAgICAgICBjb25zdCBib3RSZXBseSA9IGF3YWl0IGZldGNoKGNoYXRCb3RVcmwsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIHVzZXJJZDogc2Vzc2lvbj8udXNlci5pZCxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IGN1cnJlbnRDb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSk7XG4gICAgICAgICAgc2V0UmVzcG9uc2VMb2FkaW5nKGZhbHNlKTtcblxuICAgICAgICAgIC8vIDMuIFVwZGF0ZSB0aGUgcmVzcG9uc2VzIGFycmF5IHdpdGggdGhlIGJvdCdzIHJlcGx5XG4gICAgICAgICAgc2V0UmVzcG9uc2VzKChwcmV2UmVzcG9uc2VzKSA9PlxuICAgICAgICAgICAgcHJldlJlc3BvbnNlcy5tYXAoKHJlc3ApID0+IHtcbiAgICAgICAgICAgICAgaWYgKHJlc3AucXVlc3Rpb24gPT09IG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5yZXNwLCByZXNwb25zZTogYm90UmVwbHkucmVzcG9uc2UgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gcmVzcDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiTG9nZ2luZyB0aGUgbmV3IFJlc3BvbnNlc1wiLCByZXNwb25zZXMpO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coXCJMb2dnaW5nIHRoZSBib3QgcmVwbHlcIiwgYm90UmVwbHkpO1xuICAgICAgICAgIGF3YWl0IGZldGNoKFwiL2FwaS9tZXNzYWdlc1wiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIHVzZXJJZDogc2Vzc2lvbj8udXNlci5pZCwgLy8gRW5zdXJlIHlvdSBoYXZlIHRoZSBjdXJyZW50IHVzZXIncyBJRFxuICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogdXBkYXRlZENvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICB1c2VyQ29udGVudDogbWVzc2FnZSwgLy8gVXNlcidzIG1lc3NhZ2VcbiAgICAgICAgICAgICAgYm90UmVzcG9uc2U6IGJvdFJlcGx5LnJlc3BvbnNlLCAvLyBCb3QncyByZXNwb25zZSwgb2J0YWluZWQgc2VwYXJhdGVseVxuICAgICAgICAgICAgICBpbWFnZVVybDogXCJcIixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy9BZGQgdGhlIGNvbnZlcnNhdGlvbnMgYXJyYXd5IG9yIHVwZGF0ZVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBoYW5kbGluZyBzdWJtaXNzaW9uOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgWywgc2V0ZmlsZVVSTF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3NlbGVjdGVkRmlsZSwgc2V0c2VsZWN0ZWRGaWxlXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbdXBsb2FkZWRGaWxlLCBzZXR1cGxvYWRlZEZpbGVdID0gdXNlU3RhdGUoe30pO1xuICBjb25zdCBbaXNVcGxvYWRpbmcsIHNldGlzVXBsb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzRmlsZVVwbG9hZGVkLCBzZXRpc0ZpbGVVcGxvYWRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt1cGxvYWRQcm9ncmVzcywgc2V0dXBsb2FkUHJvZ3Jlc3NdID0gdXNlU3RhdGUoMCk7XG4gIGxldCB1cGxvYWRJbnB1dCA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuICBcblxuICAvLyBVcGRhdGUgaGFuZGxlRHJvcCB0byB3b3JrIGxpa2UgaGFuZGxlU2VsZWN0RmlsZVxuICBjb25zdCBoYW5kbGVTZWxlY3RGaWxlID0gKGUpID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZEZpbGVMaXN0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlLnRhcmdldC5maWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgc2VsZWN0ZWRGaWxlTGlzdC5wdXNoKGUudGFyZ2V0LmZpbGVzLml0ZW0oaSkpO1xuICAgIH1cbiAgICBzZXRzZWxlY3RlZEZpbGUoc2VsZWN0ZWRGaWxlTGlzdCk7XG4gIH07XG5cbiAgLy8gVXBsb2FkIGZpbGUgdG8gc2VydmVyXG4gIGNvbnN0IGhhbmRsZVVwbG9hZEZpbGUgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHNldGlzVXBsb2FkaW5nKHRydWUpO1xuICAgIGNvbnN0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICBjb25zb2xlLmxvZyhcIlRIZSB1cGxvYWQgaW5wdXRcIiwgdXBsb2FkSW5wdXQuZmlsZXMpO1xuXG4gICAgLy8gQXBwZW5kIHRoZSBmaWxlIHRvIHRoZSByZXF1ZXN0IGJvZHlcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVwbG9hZElucHV0LmZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXRhLmFwcGVuZChcImZpbGVcIiwgdXBsb2FkSW5wdXQuZmlsZXNbaV0sIHVwbG9hZElucHV0LmZpbGVzW2ldLm5hbWUpO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld1Jlc3BvbnNlID0ge1xuICAgICAgcXVlc3Rpb246IG1lc3NhZ2UsXG4gICAgICByZXNwb25zZTogXCJcIixcbiAgICAgIGlkOiBcInRlbXBcIixcbiAgICB9O1xuXG4gICAgc2V0UmVzcG9uc2VzKChyZXNwb25zZXMpID0+IFsuLi5yZXNwb25zZXMsIG5ld1Jlc3BvbnNlXSk7XG5cbiAgICBzZXRNZXNzYWdlKFwiXCIpO1xuXG4gICAgY29uc29sZS5sb2coXCJMT2dnaW4gaGUgZGF0YVwiLCBkYXRhKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICBvblVwbG9hZFByb2dyZXNzOiAocHJvZ3Jlc3NFdmVudCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgbG9hZGVkLCB0b3RhbCB9ID0gcHJvZ3Jlc3NFdmVudDtcbiAgICAgICAgICBzZXR1cGxvYWRQcm9ncmVzcyhNYXRoLnJvdW5kKChsb2FkZWQgLyB0b3RhbCkgKiAxMDApKTtcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoXG4gICAgICAgIFwiaHR0cDovLzEyNy4wLjAuMTo1MDAwL3Byb2Nlc3NfaW1hZ2VcIixcbiAgICAgICAgZGF0YSxcbiAgICAgICAgY29uZmlnXG4gICAgICApO1xuICAgICAgY29uc3QgYm9keSA9IHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiTG9nZ2luZyB0aGUgcmVzcG9uc2VcIiwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICBzZXRSZXNwb25zZXMoKHByZXZSZXNwb25zZXMpID0+XG4gICAgICAgIHByZXZSZXNwb25zZXMubWFwKChyZXNwKSA9PiB7XG4gICAgICAgICAgaWYgKHJlc3AucXVlc3Rpb24gPT09IG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIC8vIFNldCBpbWFnZVVybCBkaXJlY3RseSBpbnN0ZWFkIG9mIGFuIGFycmF5XG4gICAgICAgICAgICBjb25zdCBuZXdJbWFnZVVybCA9IHJlc3BvbnNlLmRhdGEuaW1hZ2VfdXJsLnN0YXJ0c1dpdGgoJ2h0dHAnKVxuICAgICAgICAgICAgICA/IHJlc3BvbnNlLmRhdGEuaW1hZ2VfdXJsIC8vIFVzZSB0aGUgZXhpc3RpbmcgVVJMIGlmIGl0IGFscmVhZHkgaGFzIHRoZSBwcm90b2NvbFxuICAgICAgICAgICAgICA6IGBodHRwOi8vMTI3LjAuMC4xOjUwMDAke3Jlc3BvbnNlLmRhdGEuaW1hZ2VfdXJsfWA7IC8vIFByZXBlbmQgdGhlIGJhc2UgVVJMIGlmIG5vdFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4ucmVzcCxcbiAgICAgICAgICAgICAgaW1hZ2VVcmw6IG5ld0ltYWdlVXJsLCAvLyBTZXQgdGhlIG5ldyBVUkwgZGlyZWN0bHlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXNwO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiTG9nZ2luZyB0aGUgcmVzcG9uc2VzXCIsIHJlc3BvbnNlcyk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRDb252ZXJzYXRpb25JZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXG4gICAgICAgIFwiY3VycmVudENvbnZlcnNhdGlvbklkXCJcbiAgICAgICk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiTG9nZ2luZyB0aGUgcmVzcG9uc2UgZGF0YVwiLCByZXNwb25zZS5kYXRhLnJlc3BvbnNlcyk7XG5cbiAgICAgIGF3YWl0IGZldGNoKFwiL2FwaS9tZXNzYWdlc1wiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHVzZXJJZDogc2Vzc2lvbj8udXNlci5pZCwgLy8gRW5zdXJlIHlvdSBoYXZlIHRoZSBjdXJyZW50IHVzZXIncyBJRFxuICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiB1cGRhdGVkQ29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgdXNlckNvbnRlbnQ6IG1lc3NhZ2UsIC8vIFVzZXIncyBtZXNzYWdlXG4gICAgICAgICAgaW1hZ2VVcmw6IGBodHRwOi8vMTI3LjAuMC4xOjUwMDAke3Jlc3BvbnNlLmRhdGEuaW1hZ2VfdXJsfWAsIC8vIEltYWdlIFVSTCBmcm9tIHRoZSBib3RcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coXCJSZXR1cm5pbmcgdGhlIGJvZHlcIiwgYm9keSk7XG4gICAgICBzZXRmaWxlVVJMKGAke2NoYXRCb3RVcmx9LyR7Ym9keS5maWxlbmFtZX1gKTtcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICBzZXRpc0ZpbGVVcGxvYWRlZCh0cnVlKTsgLy8gZmxhZyB0byBzaG93IHRoZSB1cGxvYWRlZCBmaWxlXG4gICAgICAgIHNldGlzVXBsb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgc2V0dXBsb2FkZWRGaWxlKHNlbGVjdGVkRmlsZSk7IC8vIHNldCB0aGUgdXBsb2FkZWQgZmlsZSB0byBzaG93IHRoZSBuYW1lXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgc2V0aXNVcGxvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaGFuZGxlU3BlY2lhbENvbW1hbmQgPSBhc3luYyAoXG4gICAgY29tbWFuZDogc3RyaW5nLFxuICAgIGZ1bGxNZXNzYWdlOiBzdHJpbmcsXG4gICAgZTogRm9ybUV2ZW50XG4gICkgPT4ge1xuICAgIGNvbnN0IGJhc2VVcmwgPSBcImh0dHA6Ly8xMjcuMC4wLjE6NTAwMFwiO1xuICAgIGxldCBjb21tYW5kRW5kcG9pbnQ7XG4gICAgbGV0IHJlcXVlc3RCb2R5O1xuXG4gICAgaWYgKGNvbW1hbmQgPT09IFwidXBzY2FsZVwiKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlVwc2NhbGUgQ29tbWFuZFwiLCBmdWxsTWVzc2FnZSk7XG4gICAgfSBlbHNlIGlmIChjb21tYW5kID09PSBcImdlbmVyYXRlXCIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiR2VuZXJhdGUgQ29tbWFuZFwiLCBmdWxsTWVzc2FnZSk7XG4gICAgICBjb25zb2xlLmxvZyhcIlVzZXIgSUQ6XCIsIHNlc3Npb24/LnVzZXIuaWQpO1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIFwiQ29udGVudDpcIixcbiAgICAgICAgZnVsbE1lc3NhZ2Uuc3Vic3RyaW5nKGZ1bGxNZXNzYWdlLmluZGV4T2YoXCIgXCIpICsgMSlcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhcIkxvZ28gSW1hZ2U6XCIsIHNlbGVjdGVkRmlsZSA/IHNlbGVjdGVkRmlsZVswXS5uYW1lIDogbnVsbCk7XG4gICAgICBjb25zb2xlLmxvZyhcIkJhY2tncm91bmQgSW1hZ2U6XCIsIFwiXCIpO1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIFwiRmlsZW5hbWU6XCIsXG4gICAgICAgIGB1c2VyX3JlcG9ydF8ke1xuICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bLTpdL2csIFwiXCIpLnNwbGl0KFwiLlwiKVswXVxuICAgICAgICB9LnBkZmBcbiAgICAgICk7XG5cbiAgICAgIGNvbW1hbmRFbmRwb2ludCA9IGdlbmVyYXRlUGRmVXJsO1xuICAgICAgcmVxdWVzdEJvZHkgPSB7XG4gICAgICAgIHVzZXJJZDogc2Vzc2lvbj8udXNlci5pZCxcbiAgICAgICAgY29udGVudDogZnVsbE1lc3NhZ2Uuc3Vic3RyaW5nKGZ1bGxNZXNzYWdlLmluZGV4T2YoXCIgXCIpICsgMSksXG4gICAgICAgIGxvZ29faW1hZ2U6IHNlbGVjdGVkRmlsZSA/IHNlbGVjdGVkRmlsZS5uYW1lIDogbnVsbCxcbiAgICAgICAgYmFja2dyb3VuZF9pbWFnZTogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IGB1c2VyX3JlcG9ydF8ke1xuICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bLTpdL2csIFwiXCIpLnNwbGl0KFwiLlwiKVswXVxuICAgICAgICB9LnBkZmAsXG4gICAgICAgIGNvbnZlcnNhdGlvbklkOiBjdXJyZW50Q29udmVyc2F0aW9uSWQsXG4gICAgICB9O1xuICAgICAgY29uc29sZS5sb2coXCJMb2dnaW4gdGhlIHJlcXVlc3QgYm9keVwiLCByZXF1ZXN0Qm9keSk7XG4gICAgICBjb25zb2xlLmxvZyhcIlJlcXVlc3QgQm9keTpcIiwgSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHksIG51bGwsIDIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29tbWFuZEVuZHBvaW50ID0gYCR7YmFzZVVybH0ke1xuICAgICAgICBzcGVjaWFsQ29tbWFuZHNbY29tbWFuZCBhcyBrZXlvZiB0eXBlb2Ygc3BlY2lhbENvbW1hbmRzXVxuICAgICAgfWA7XG4gICAgICByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgdXNlcklkOiBzZXNzaW9uPy51c2VyLmlkLFxuICAgICAgICBtZXNzYWdlOiBmdWxsTWVzc2FnZSxcbiAgICAgICAgY29udmVyc2F0aW9uSWQ6IGN1cnJlbnRDb252ZXJzYXRpb25JZCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJDb21tYW5kIEVuZHBvaW50OlwiLCBjb21tYW5kRW5kcG9pbnQpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goY29tbWFuZEVuZHBvaW50LCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29tbWFuZCA9PT0gXCJnZW5lcmF0ZVwiKSB7XG4gICAgICAgIC8vIEhhbmRsZSBQREYgcmVzcG9uc2VcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgY29uc3QgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgYS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIGEuaHJlZiA9IHVybDtcbiAgICAgICAgYS5kb3dubG9hZCA9IHJlcXVlc3RCb2R5LmZpbGVuYW1lIGFzIHN0cmluZztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcbiAgICAgICAgYS5jbGljaygpO1xuICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBVSSB0byBpbmRpY2F0ZSBzdWNjZXNzZnVsIFBERiBnZW5lcmF0aW9uXG4gICAgICAgIHNldFJlc3BvbnNlcygocHJldlJlc3BvbnNlcykgPT4gW1xuICAgICAgICAgIC4uLnByZXZSZXNwb25zZXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgcXVlc3Rpb246IGZ1bGxNZXNzYWdlLFxuICAgICAgICAgICAgcmVzcG9uc2U6IFwiUERGIGdlbmVyYXRlZCBzdWNjZXNzZnVsbHkuIENoZWNrIHlvdXIgZG93bmxvYWRzLlwiLFxuICAgICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgICB9LFxuICAgICAgICBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEhhbmRsZSBKU09OIHJlc3BvbnNlIGZvciBvdGhlciBjb21tYW5kc1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zb2xlLmxvZyhgQ29tbWFuZCAke2NvbW1hbmR9IHJlc3BvbnNlOmAsIGRhdGEpO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBVSSB3aXRoIGNvbW1hbmQgcmVzcG9uc2VcbiAgICAgICAgc2V0UmVzcG9uc2VzKChwcmV2UmVzcG9uc2VzKSA9PiBbXG4gICAgICAgICAgLi4ucHJldlJlc3BvbnNlcyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBxdWVzdGlvbjogZnVsbE1lc3NhZ2UsXG4gICAgICAgICAgICByZXNwb25zZTogZGF0YS5yZXNwb25zZSxcbiAgICAgICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGV4ZWN1dGluZyBjb21tYW5kICR7Y29tbWFuZH06YCwgZXJyb3IpO1xuICAgICAgLy8gVXBkYXRlIFVJIHdpdGggZXJyb3IgbWVzc2FnZVxuICAgICAgc2V0UmVzcG9uc2VzKChwcmV2UmVzcG9uc2VzKSA9PiBbXG4gICAgICAgIC4uLnByZXZSZXNwb25zZXMsXG4gICAgICAgIHtcbiAgICAgICAgICBxdWVzdGlvbjogZnVsbE1lc3NhZ2UsXG4gICAgICAgICAgcmVzcG9uc2U6IGBFcnJvciBleGVjdXRpbmcgY29tbWFuZDogJHtcbiAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgICAgICB9YCxcbiAgICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICB9LFxuICAgICAgXSk7XG4gICAgICBzZXRNZXNzYWdlc0lzTG9hZGluZyhmYWxzZSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldE1lc3NhZ2VzSXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ29udmVyc2F0aW9uQ2xpY2sgPSAoY29udm9JZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0UGF0aCA9IGAvYWkvY2hhdC8ke3Nlc3Npb24/LnVzZXIuaWR9LyR7Y29udm9JZH1gO1xuXG4gICAgcm91dGVyLnB1c2godGFyZ2V0UGF0aCwgdW5kZWZpbmVkKTtcblxuICAgIC8vU3RvcmUgdGhlIEN1cnJlbnQgY29udmVyYXRvaW5JRCBpbiBsb2NhbCB0byBwZXJzaXQgb24gY2hhbmluZyB0aGUgbmF2aWdhdGlvblxuICAgIGxldCBsb2NhbFN0b3JhZ2VDb252b0lkOiBhbnk7XG5cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRDb252ZXJzYXRpb25JZFwiLCBjb252b0lkKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcbiAgICAvLyAgIFwiTG9nZ2luZyB0aGUgY3VycmVudCBjb252ZXJzYXRpb24gSURcIixcbiAgICAvLyAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudENvbnZlcnNhdGlvbklkXCIpXG4gICAgLy8gKTtcblxuICAgIGxvY2FsU3RvcmFnZUNvbnZvSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRDb252ZXJzYXRpb25JZFwiKTtcbiAgICBzZXRDdXJyZW50Q29udmVyc2F0aW9uSWQoY29udm9JZCk7XG4gIH07XG5cbiAgLy9HZXQgdGhlIGZ1bGwgTWVzc2FnZSBDb252ZXJzYXRpb24uXG5cbiAgY29uc3QgY2xlYXJTdG9yYWdlID0gKCkgPT4ge1xuICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oXCJpbml0aWFsTWVzc2FnZVwiKTtcbiAgfTtcblxuICAvL0Fub3RoZXIgSG9vayBDaGVjayBmb3IgdGhlIGxvY2FsIHN0b3JhZ2VcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY3VycmVudENvbnZlcnNhdGlvbklkKSB7XG4gICAgICBoYW5kbGVDb252ZXJzYXRpb25DbGljayhjdXJyZW50Q29udmVyc2F0aW9uSWQgYXMgc3RyaW5nKTtcbiAgICB9XG4gICAgY2xlYXJTdG9yYWdlKCk7XG4gIH0sIFtjdXJyZW50Q29udmVyc2F0aW9uSWRdKTsgLy8gRGVwZW5kZW5jeSBhcnJheSBpbmNsdWRlcyBzdGF0ZSB0aGF0IHRyaWdnZXJzIHRoaXMgZWZmZWN0XG5cbiAgdXNlRWZmZWN0KCgpID0+IHt9LCBbaXNMb2FkaW5nXSk7XG5cbiAgLy9DaGVja2luZyBpZiBDaGF0IGNvbnZlcnNhdGlvbnMgaXMgbG9hZGluZ1xuICB1c2VFZmZlY3QoKCkgPT4ge30sIFttZXNzYWdlc0lzTG9hZGluZ10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge30sIFtpc1JlcG9uc2VMb2FkaW5nXSk7XG5cbiAgLy9GZXRjaCBNZXNzYWdlIGZvciB0aGlzIGNvbnZlcmF0aW9uc1xuICBjb25zdCBtZXNzYWdlc1JlZkNvdW50ZXIgPSB1c2VSZWYoMCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7fSwgW21lc3NhZ2VzUmVmQ291bnRlcl0pO1xuICBjb25zdCBmZXRjaE1lc3NhZ2VzRm9yQ29udmVyc2F0aW9uID0gYXN5bmMgKGNvbnZlcnNhdGlvbklkOiBzdHJpbmcpID0+IHtcbiAgICBtZXNzYWdlc1JlZkNvdW50ZXIuY3VycmVudCArPSAxO1xuICAgIGlmIChtZXNzYWdlc1JlZkNvdW50ZXIuY3VycmVudCA+IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXNlc3Npb24gfHwgIXNlc3Npb24udXNlciB8fCAhc2Vzc2lvbi51c2VyLmlkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiTm8gdXNlciBzZXNzaW9uIGF2YWlsYWJsZVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0TWVzc2FnZXNJc0xvYWRpbmcodHJ1ZSk7XG5cbiAgICBjb25zb2xlLmxvZyhcIkZldGNoaW5nIG1lc3NhZ2VzIGZvciBjb252ZXJzYXRpb246XCIsIGNvbnZlcnNhdGlvbklkKTtcblxuICAgIGlmICghY29udmVyc2F0aW9uSWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJubyBjb252ZXJzYXRvaW4gSURcIik7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgYC9hcGkvc3RvcmVkTWVzc2FnZXM/YXV0aG9ySWQ9JHtzZXNzaW9uPy51c2VyLmlkfSZjb252ZXJzYXRpb25JZD0ke2NvbnZlcnNhdGlvbklkfWBcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBtZXNzYWdlc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkFkZCB0aGUgSURTXCIsbWVzc2FnZXMubWFwKG1zZ3MgPT4gbXNncy5pZCkpXG5cbiAgICAgICAgLy8gTWFwIEFQSSByZXNwb25zZSB0byBleHBlY3RlZCBmb3JtYXQgaW4gc3RhdGVcbiAgICAgICAgLy9OYW1pbmcgY29udmVudGlvbnMgbWF0dGVyXG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZE1lc3NhZ2VzID0gbWVzc2FnZXMubWFwKChtc2c6IE1lc3NhZ2UpID0+ICh7XG4gICAgICAgICAgcXVlc3Rpb246IG1zZy51c2VyQ29udGVudCxcbiAgICAgICAgICByZXNwb25zZTogbXNnLmJvdFJlc3BvbnNlLFxuICAgICAgICAgIGltYWdlVXJsOiBtc2cuaW1hZ2VVcmwsXG4gICAgICAgICAgaWQ6IG1zZy5pZCxcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHNldFJlc3BvbnNlcyhbXSk7XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgc2V0UmVzcG9uc2VzKGZvcm1hdHRlZE1lc3NhZ2VzKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRNZXNzYWdlc0lzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBzZXRNZXNzYWdlc0lzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIG1lc3NhZ2VzOlwiLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7fSwgW3Jlc3BvbnNlc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0UmVzcG9uc2VzKFtdKTsgLy8gQ2xlYXIgcHJldmlvdXMgbWVzc2FnZXNcblxuICAgIGlmIChzdGF0dXMgPT09IFwiYXV0aGVudGljYXRlZFwiICYmIHNlc3Npb24pIHtcbiAgICAgIC8vIEZldGNoIG1lc3NhZ2VzIGZvciB0aGUgY3VycmVudCBjb252ZXJzYXRpb24gaWYgbmVlZGVkXG4gICAgICBpZiAoY3VycmVudENvbnZlcnNhdGlvbklkID09PSBudWxsKSB7XG4gICAgICAgIGZldGNoTWVzc2FnZXNGb3JDb252ZXJzYXRpb24oXG4gICAgICAgICAgKGN1cnJlbnRDb252ZXJzYXRpb25JZCBhcyBhbnkpIHx8IGxvY2FsU3RvcmFnZUNvbnZvSWRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiRmVjaCBpcyBkb2luZyBnb29kXCIsIGN1cnJlbnRDb252ZXJzYXRpb25JZCk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY3VycmVudENvbnZlcnNhdGlvbklkXSk7XG5cbiAgaWYgKCFjb252ZXJzYXRpb25zKSB7XG4gICAgcmV0dXJuIDxwPk5vIGNvbnZlcnNhdGlvbiBmb3VuZC48L3A+O1xuICB9XG5cbiAgY29uc3QgW2NoYXRDb250YWluZXJTaG93biwgc2V0Q2hhdENvbnRhaW5lclNob3duXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgY2hhdENvbnRhaW5lclRvZ2dsZSA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIklTIHRoaXMgYmVpbmcgY2xpY2tlZD8/PyBTaG93b24geWVzIG9yIG5vXCIpO1xuICAgIHNldENoYXRDb250YWluZXJTaG93bighY2hhdENvbnRhaW5lclNob3duKTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiUmVzcG9uc2VzXCIsIHNlbGVjdGVkRmlsZSk7XG4gIH0sIFtzZWxlY3RlZEZpbGVdKTtcblxuICAvL0Z1bmN0aW9uIHRha2VzIHlvdSB0byB0aGUgYm90dG9tIG9mIHRoZSBkaXYgYnkgY2xpY2tpbmcgdGhlIGZsb2F0aW5nIGJ1dHRvbi5cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hhdERhc2hib2FyZCB0ZXh0LXdoaXRlXCI+XG4gICAgICB7LyogQ2hhdCBDb250YWluZXIgQ29tcG9uZXQgICovfVxuXG4gICAgICA8Q2hhdENvbnRhaW5lclxuICAgICAgICBzZXRDb252ZXJzYXRpb25zPXtzZXRDb252ZXJzYXRpb25zfVxuICAgICAgICBjb252ZXJzYXRpb25zPXtjb252ZXJzYXRpb25zfVxuICAgICAgICBjdXJyZW50Q29udmVyc2F0aW9uSWQ9e2N1cnJlbnRDb252ZXJzYXRpb25JZH1cbiAgICAgICAgc3BsaXRVc2VyTmFtZT17c3BsaXRVc2VyTmFtZX1cbiAgICAgICAgdXNlck5hbWU9e3VzZXJOYW1lIHx8IFwiXCJ9XG4gICAgICAgIGVtYWlsPXtlbWFpbCB8fCBcIlwifVxuICAgICAgICBvbkNvbnZlcnNhdGlvbkNsaWNrPXtoYW5kbGVDb252ZXJzYXRpb25DbGlja31cbiAgICAgICAgb25EZWxldGVDb252bz17ZGVsZXRlQ29udmVyc2F0aW9ufVxuICAgICAgICBvbkNoYW5nZUNvbnZvVGl0bGU9e2hhbmRsZVN1Ym1pdFRpdGxlfVxuICAgICAgICBoYW5kbGVUaXRsZUNsaWNrPXtoYW5kbGVUaXRsZUNsaWNrfVxuICAgICAgICBlZGl0VGl0bGVJZD17ZWRpdFRpdGxlSWR9XG4gICAgICAgIGVkaXRlZFRpdGxlPXtlZGl0ZWRUaXRsZX1cbiAgICAgICAgaGFuZGxlVGl0bGVDaGFuZ2U9e2hhbmRsZVRpdGxlQ2hhbmdlfVxuICAgICAgICBlZGl0aW5nVGl0bGU9e2VkaXRpbmdUaXRsZX1cbiAgICAgICAgdGl0bGVVcGRhdGVkPXt0aXRsZVVwZGF0ZWR9XG4gICAgICAgIGNoYXRDb250YWluZXJSZWY9e2NoYXRDb250YWluZXJSZWYgYXMgYW55fVxuICAgICAgICBoYW5kbGVNb2JpbGVDaGF0QnRuQ2xpY2s9e2hhbmRsZU1vYmlsZUNoYXRCdG5DbGlja31cbiAgICAgIC8+XG5cbiAgICAgIHsvKiBDaGF0IENvbnRhaW5lciBDb21wb25ldCAgKi99XG5cbiAgICAgIDxkaXZcbiAgICAgICAgcmVmPXtjaGF0RGFzaEJvYXJkUmVmfVxuICAgICAgICBjbGFzc05hbWU9XCJjaGF0RGFzaGJvYXJkV3JhcHBlciB3LWZ1bGwgdGV4dC1sZWZ0XCJcbiAgICAgID5cbiAgICAgICAgey8qIDxPcGVuQ2hhdENvbnRhaW5lclxuICAgICAgICAgIGNoYXRDb250YWluZXJUb2dnbGU9e2NoYXRDb250YWluZXJUb2dnbGV9XG4gICAgICAgICAgY2hhdENvbnRhaW5lclNob3duPXtjaGF0Q29udGFpbmVyU2hvd259XG4gICAgICAgIC8+ICovfVxuICAgICAgICB7LyogR3VpZGVsaW5lcyBIYWRlciAqL31cblxuICAgICAgICB7LyogPEhlYWRlclxuICAgICAgICAgIHNob3dHdWlkZWxpbmVzPXtzaG93R3VpZGVsaW5lc31cbiAgICAgICAgICBzZXRTaG93R3VpZGVsaW5lcz17c2V0U2hvd0d1aWRlbGluZXN9XG4gICAgICAgICAgaGFuZGxlTW9iaWxlQ2hhdEJ0bkNsaWNrPXtoYW5kbGVNb2JpbGVDaGF0QnRuQ2xpY2t9XG4gICAgICAgIC8+ICovfVxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgY2hhdERhc2hCb2FyZENvbnRhaW5lciBgfT5cbiAgICAgICAgICB7LyogRGFzaGJvYXJkIENvbXBvbmVudCAgKi99XG5cbiAgICAgICAgICB7cmVzcG9uc2VzLmxlbmd0aCA+IDAgPyAoXG4gICAgICAgICAgICA8Q2hhdE1lc3NhZ2VzQ29udGFpbmVyIHJlc3BvbnNlcz17KHJlc3BvbnNlcyBhcyBhbnkpIHx8IFtdfSAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICB7LyogPExvYWRpbmdDb21wb25lbnQgLz4gKi99XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIC8vIDxEYXNoYm9hcmQgdXNlck5hbWU9e3VzZXJOYW1lIHx8IFwiXCJ9IC8+XG4gICAgICAgICAgKX1cblxuICAgICAgICAgIHsvKiBEYXNoYm9hcmQgQ29tcG9uZW50ICAqL31cblxuICAgICAgICAgIHsvKiA8VXBsb2FkRmlsZSAvPiAqL31cblxuICAgICAgICAgIDxmb3JtXG4gICAgICAgICAgICByZWY9e2Zvcm1SZWZ9XG4gICAgICAgICAgICBvblN1Ym1pdD17aGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiY2hhdEZvcm1TdWJtaXRcIlxuICAgICAgICAgICAgLy8gb25Ecm9wPXtoYW5kbGVEcm9wfVxuICAgICAgICAgICAgb25EcmFnT3Zlcj17KGUpID0+IGUucHJldmVudERlZmF1bHQoKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIHRleHRBcmVhQ29udGFpbmVyXCI+XG4gICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0TWVzc2FnZShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBvbktleURvd249eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIiAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1SZWYuY3VycmVudD8ucmVxdWVzdFN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgdmFsdWU9e21lc3NhZ2V9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBc2sgVGhvdSBRdWVzdGlvbi4uLlwiXG4gICAgICAgICAgICAgID48L3RleHRhcmVhPlxuXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dEFyZWFJY29uV3JhcHBlciBmbGV4IGZsZXgtcm93IGdhcC1bMTFweF1cIj5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICAgICAgICAgIGlkPVwiZmlsZUlucHV0XCJcbiAgICAgICAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiBcIm5vbmVcIiB9fVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNlbGVjdEZpbGV9XG4gICAgICAgICAgICAgICAgICByZWY9eyhyZWYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkSW5wdXQgPSByZWY7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dEFyZWFJY29uXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlsZUlucHV0XCIpPy5jbGljaygpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMThcIlxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxOFwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgZmlsbD1cImN1cnJlbnRDb2xvclwiXG4gICAgICAgICAgICAgICAgICAgICAgZmlsbC1ydWxlPVwiZXZlbm9kZFwiXG4gICAgICAgICAgICAgICAgICAgICAgZD1cIk05IDdhNSA1IDAgMCAxIDEwIDB2OGE3IDcgMCAxIDEtMTQgMFY5YTEgMSAwIDAgMSAyIDB2NmE1IDUgMCAwIDAgMTAgMFY3YTMgMyAwIDEgMC02IDB2OGExIDEgMCAxIDAgMiAwVjlhMSAxIDAgMSAxIDIgMHY2YTMgMyAwIDEgMS02IDB6XCJcbiAgICAgICAgICAgICAgICAgICAgICBjbGlwLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgICAgICAgPjwvcGF0aD5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwidGV4dEFyZWFJY29uXCI+XG4gICAgICAgICAgICAgICAgICB7bWVzc2FnZXNJc0xvYWRpbmcgPyAgPEJ1dHRvbkxvYWRpbmdDb21wb25lbnQgLz4gOiAoXG4gICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjE4XCJcbiAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxOFwiXG4gICAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMzIgMzJcIlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIlwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD1cImN1cnJlbnRDb2xvclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQ9XCJNMTUuMTkyIDguOTA2YTEuMTQzIDEuMTQzIDAgMCAxIDEuNjE2IDBsNS4xNDMgNS4xNDNhMS4xNDMgMS4xNDMgMCAwIDEtMS42MTYgMS42MTZsLTMuMTkyLTMuMTkydjkuODEzYTEuMTQzIDEuMTQzIDAgMCAxLTIuMjg2IDB2LTkuODEzbC0zLjE5MiAzLjE5MmExLjE0MyAxLjE0MyAwIDEgMS0xLjYxNi0xLjYxNnpcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpcC1ydWxlPVwiZXZlbm9kZFwiXG4gICAgICAgICAgICAgICAgICAgICAgPjwvcGF0aD5cbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge3NlbGVjdGVkRmlsZSAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMlwiPlNlbGVjdGVkIGZpbGU6IHtzZWxlY3RlZEZpbGVbMF0ubmFtZX08L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZVJvdXRlciIsIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTZXNzaW9uIiwiaXNDbGllbnQiLCJ1c2VTZXNzaW9uU3RvcmFnZSIsImNoZWNrU2Vzc2lvbiIsIkJ1dHRvbkxvYWRpbmdDb21wb25lbnQiLCJ1c2VDaGF0Q29udmVyc2F0aW9uIiwidXNlQ3JlYXRlQ29udmVyc2F0aW9uIiwidXNlQ29udmVyc2F0aW9ucyIsIkNoYXRDb250YWluZXIiLCJDaGF0TWVzc2FnZXNDb250YWluZXIiLCJheGlvcyIsIkNvbnZlcnNhdGlvblBhZ2UiLCJjaGF0Qm90VXJsIiwiZ2VuZXJhdGVQZGZVcmwiLCJyb3V0ZXIiLCJmb3JtUmVmIiwic2Vzc2lvblN0YXR1cyIsInNldFNlc3Npb25TdGF0dXMiLCJ1c2VySWQiLCJzZXRVc2VySWQiLCJzaG93R3VpZGVsaW5lcyIsInNldFNob3dHdWlkZWxpbmVzIiwicGRmSW1hZ2VzIiwic2V0UGRmSW1hZ2VzIiwic2VsZWN0ZWRQZGZJbWFnZSIsInNldFNlbGVjdGVkUGRmSW1hZ2UiLCJiYWNrZ3JvdW5kSW1hZ2VzIiwic2V0QmFja2dyb3VuZEltYWdlcyIsInVzZXJOYW1lIiwic2V0VXNlck5hbWUiLCJzcGxpdFVzZXJOYW1lIiwiZW1haWwiLCJzZXRFbWFpbCIsInNldFNwbGl0VXNlck5hbWUiLCJyZXNwb25zZXMiLCJzZXRSZXNwb25zZXMiLCJtZXNzYWdlIiwic2V0TWVzc2FnZSIsImxvY2FsU3RvcmFnZUNvbnZvSWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0Q3VycmVudENvbnZlcnNhdGlvbklkIiwiZGF0YSIsInNlc3Npb24iLCJzdGF0dXMiLCJtZXNzYWdlc0lzTG9hZGluZyIsInNldE1lc3NhZ2VzSXNMb2FkaW5nIiwiaXNSZXBvbnNlTG9hZGluZyIsInNldFJlc3BvbnNlTG9hZGluZyIsImN1cnJlbnRDb252ZXJzYXRpb25JZCIsImNvbnZlcnNhdGlvbnMiLCJpc0xvYWRpbmciLCJzZXRDb252ZXJzYXRpb25zIiwiY3JlYXRlQ29udmVyc2F0aW9uIiwibmV3VGl0bGUiLCJzZXROZXdUaXRsZSIsImlzQ3JlYXRlTG9hZGluZyIsImVycm9yIiwiY2hhdENvbnRhaW5lclJlZiIsImlzQXRaZXJvIiwic2V0SXNBdFplcm8iLCJoYW5kbGVNb2JpbGVDaGF0QnRuQ2xpY2siLCJjdXJyZW50Iiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJoYW5kbGVSZXNpemUiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXNzaW9uU3RvcmFnZSIsInNldEl0ZW0iLCJlZGl0VGl0bGVJZCIsInNldEVkaXRUaXRsZUlkIiwiZWRpdGVkVGl0bGUiLCJzZXRFZGl0ZWRUaXRsZSIsImVkaXRpbmdUaXRsZSIsInNldEVkaXRpbmdUaXRsZSIsInRpdGxlVXBkYXRlZCIsInNldFRpdGxlVXBkYXRlZCIsImhhbmRsZVRpdGxlQ2xpY2siLCJjb252b0lkIiwiY29udmVyc2F0aW9uIiwiZmluZCIsImNvbnZvIiwiY29udmVyc2F0aW9uSWQiLCJ0aXRsZSIsImhhbmRsZVRpdGxlQ2hhbmdlIiwiZXZlbnQiLCJ0YXJnZXQiLCJ2YWx1ZSIsImdldENvbnZlcnNhdGlvbiIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsIkVycm9yIiwidXBkYXRlZENvbnZlcnNhdGlvbiIsImpzb24iLCJwcmV2Q29udmVyc2F0aW9ucyIsIm1hcCIsInVwZGF0ZUxvY2FsU3RvcmFnZSIsImNvbnNvbGUiLCJkZWxldGVDb252ZXJzYXRpb24iLCJjdXJyZW50Q29udmVyc2F0aW9ucyIsImxvZyIsInVwZGF0ZWRDb252ZXJzYXRpb25zIiwiZmlsdGVyIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiaWQiLCJjb252ZXJhdG9pbklEIiwicHVzaCIsImFsZXJ0IiwiY2FjaGVkQ29udmVyc2F0aW9ucyIsInBhcnNlZENvbnZlcnNhdGlvbnMiLCJwYXJzZSIsIkFycmF5IiwiaXNBcnJheSIsInVwZGF0ZWRDYWNoZSIsImUiLCJoYW5kbGVTdWJtaXRUaXRsZSIsInByZXZlbnREZWZhdWx0IiwidGl0bGVDaGFuZ2UiLCJrZXkiLCJsb2NhbENvbnZlcnNhdGlvbklkIiwicHJldiIsIm9yaWdpbmFsQ29udmVyc2F0aW9ucyIsImNoYXREYXNoQm9hcmRSZWYiLCJzcGVjaWFsQ29tbWFuZHMiLCJsb2FkUGRmSW1hZ2VzIiwicGRmSW1hZ2VzQ29udGV4dCIsInJlcXVpcmUiLCJjb250ZXh0IiwiaW1hZ2VGaWxlcyIsImtleXMiLCJyZXBsYWNlIiwiaGFuZGxlU3VibWl0IiwidHJpbSIsImNvbW1hbmQiLCJzcGxpdCIsInRvTG93ZXJDYXNlIiwicHJldlJlc3BvbnNlcyIsInF1ZXN0aW9uIiwiaW1hZ2VVcmwiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJzdGFydHNXaXRoIiwiaW5kZXgiLCJwYXJzZUludCIsImlzTmFOIiwibGVuZ3RoIiwidXBsb2FkSW1hZ2UiLCJjb21tYW5kTGlzdCIsIk9iamVjdCIsImpvaW4iLCJpbWFnZVBhdGgiLCJibG9iIiwiZmlsZSIsIkZpbGUiLCJ0eXBlIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInRoZW4iLCJjb250ZW50VHlwZSIsImdldCIsImluY2x1ZGVzIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiYSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJkb3dubG9hZCIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJyZW1vdmUiLCJjYXRjaCIsImhhbmRsZVVwbG9hZEZpbGUiLCJoYW5kbGVTcGVjaWFsQ29tbWFuZCIsImNvbnZvSUQiLCJ1cGRhdGVkQ29udmVyc2F0aW9uSWQiLCJuZXdSZXNwb25zZSIsImJvdFJlcGx5IiwibW9kZSIsInVzZXIiLCJyZXMiLCJyZXNwIiwidXNlckNvbnRlbnQiLCJib3RSZXNwb25zZSIsInNldGZpbGVVUkwiLCJzZWxlY3RlZEZpbGUiLCJzZXRzZWxlY3RlZEZpbGUiLCJ1cGxvYWRlZEZpbGUiLCJzZXR1cGxvYWRlZEZpbGUiLCJpc1VwbG9hZGluZyIsInNldGlzVXBsb2FkaW5nIiwiaXNGaWxlVXBsb2FkZWQiLCJzZXRpc0ZpbGVVcGxvYWRlZCIsInVwbG9hZFByb2dyZXNzIiwic2V0dXBsb2FkUHJvZ3Jlc3MiLCJ1cGxvYWRJbnB1dCIsImNyZWF0ZVJlZiIsImhhbmRsZVNlbGVjdEZpbGUiLCJzZWxlY3RlZEZpbGVMaXN0IiwiaSIsImZpbGVzIiwiaXRlbSIsIm5hbWUiLCJjb25maWciLCJvblVwbG9hZFByb2dyZXNzIiwicHJvZ3Jlc3NFdmVudCIsImxvYWRlZCIsInRvdGFsIiwiTWF0aCIsInJvdW5kIiwicG9zdCIsIm5ld0ltYWdlVXJsIiwiaW1hZ2VfdXJsIiwiZmlsZW5hbWUiLCJmdWxsTWVzc2FnZSIsImJhc2VVcmwiLCJjb21tYW5kRW5kcG9pbnQiLCJyZXF1ZXN0Qm9keSIsInN1YnN0cmluZyIsImluZGV4T2YiLCJ0b0lTT1N0cmluZyIsImNvbnRlbnQiLCJsb2dvX2ltYWdlIiwiYmFja2dyb3VuZF9pbWFnZSIsImRpc3BsYXkiLCJyZXZva2VPYmplY3RVUkwiLCJoYW5kbGVDb252ZXJzYXRpb25DbGljayIsInRhcmdldFBhdGgiLCJ1bmRlZmluZWQiLCJjbGVhclN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwibWVzc2FnZXNSZWZDb3VudGVyIiwiZmV0Y2hNZXNzYWdlc0ZvckNvbnZlcnNhdGlvbiIsIm1lc3NhZ2VzIiwiZm9ybWF0dGVkTWVzc2FnZXMiLCJtc2ciLCJwIiwiY2hhdENvbnRhaW5lclNob3duIiwic2V0Q2hhdENvbnRhaW5lclNob3duIiwiY2hhdENvbnRhaW5lclRvZ2dsZSIsImRpdiIsImNsYXNzTmFtZSIsIm9uQ29udmVyc2F0aW9uQ2xpY2siLCJvbkRlbGV0ZUNvbnZvIiwib25DaGFuZ2VDb252b1RpdGxlIiwicmVmIiwiZm9ybSIsIm9uU3VibWl0Iiwib25EcmFnT3ZlciIsInRleHRhcmVhIiwib25DaGFuZ2UiLCJvbktleURvd24iLCJzaGlmdEtleSIsInJlcXVlc3RTdWJtaXQiLCJwbGFjZWhvbGRlciIsImlucHV0IiwibXVsdGlwbGUiLCJidXR0b24iLCJvbkNsaWNrIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdmciLCJ4bWxucyIsIndpZHRoIiwiaGVpZ2h0IiwiZmlsbCIsInZpZXdCb3giLCJwYXRoIiwiZmlsbC1ydWxlIiwiZCIsImNsaXAtcnVsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/ai/chat/[userId]/[conversationId]/page.tsx\n"));

/***/ })

});