"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/ai/chat/[userId]/[conversationId]/page",{

/***/ "(app-pages-browser)/./src/app/ai/chat/[userId]/[conversationId]/page.tsx":
/*!************************************************************!*\
  !*** ./src/app/ai/chat/[userId]/[conversationId]/page.tsx ***!
  \************************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ConversationPage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/react */ \"(app-pages-browser)/./node_modules/next-auth/react/index.js\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _utilis_isClient__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utilis/isClient */ \"(app-pages-browser)/./src/utilis/isClient.ts\");\n/* harmony import */ var _hooks_useSessionStorage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/hooks/useSessionStorage */ \"(app-pages-browser)/./src/hooks/useSessionStorage.ts\");\n/* harmony import */ var _utilis_CheckSession__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/utilis/CheckSession */ \"(app-pages-browser)/./src/utilis/CheckSession.ts\");\n/* harmony import */ var _components_buttonComponet__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../components/buttonComponet */ \"(app-pages-browser)/./src/app/components/buttonComponet.tsx\");\n/* harmony import */ var _hooks_ConversationContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/hooks/ConversationContext */ \"(app-pages-browser)/./src/hooks/ConversationContext.tsx\");\n/* harmony import */ var _hooks_createConversation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/hooks/createConversation */ \"(app-pages-browser)/./src/hooks/createConversation.ts\");\n/* harmony import */ var _hooks_useConversations__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/hooks/useConversations */ \"(app-pages-browser)/./src/hooks/useConversations.tsx\");\n/* harmony import */ var _ChatContainer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../ChatContainer */ \"(app-pages-browser)/./src/app/ai/chat/ChatContainer.tsx\");\n/* harmony import */ var _ChatMessage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../ChatMessage */ \"(app-pages-browser)/./src/app/ai/chat/ChatMessage.tsx\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! axios */ \"(app-pages-browser)/./node_modules/axios/lib/axios.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n/* eslint-disable react-hooks/rules-of-hooks */ \n\n\n//Utilis and helper functions\n\n\n\n\n// import { Header } from \"@/app/components/Header\";\n// Dashboard\n\n\n\n//Chat Container\n\n\n\n// import FloatingScrollButton from \"@/app/components/ScrollToBottomButton\";\n// import OpenChatContainer from \"@/app/components/helper/openChatContainerComponent\";\n// import { useSessionGate } from \"@/app/profile/_middlewhere\";\n// import LoadingComponent from \"@/app/components/helper/Loading\";\nfunction ConversationPage() {\n    _s();\n    const chatBotUrl = \" http://127.0.0.1:5000/chat\";\n    const generatePdfUrl = \" http://127.0.0.1:5000/generate_pdf\";\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.useRouter)();\n    const formRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    //Should wrap these in a bigger function since being used multiple times?\n    const [sessionStatus, setSessionStatus] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [userId, setUserId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [showGuidelines, setShowGuidelines] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n    const [pdfImages, setPdfImages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [selectedPdfImage, setSelectedPdfImage] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    //List of Backround PDF imagse\n    const [backgroundImages, setBackgroundImages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const { userName, setUserName, splitUserName, email, setEmail, setSplitUserName } = (0,_hooks_useSessionStorage__WEBPACK_IMPORTED_MODULE_5__.useSessionStorage)();\n    const { responses, setResponses, message, setMessage } = (0,_hooks_ConversationContext__WEBPACK_IMPORTED_MODULE_8__.useChatConversation)();\n    const localStorageConvoId = localStorage.getItem(\"currentConversationId\");\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (localStorageConvoId) {\n            setCurrentConversationId(localStorageConvoId);\n        }\n    }, []);\n    const { data: session, status } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_3__.useSession)();\n    const [messagesIsLoading, setMessagesIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [isReponseLoading, setResponseLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    //Set the conversation\n    const [currentConversationId, setCurrentConversationId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    // const [newTitle, setNewTitle] = useState(\"\");\n    const { conversations, isLoading, setConversations } = (0,_hooks_useConversations__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(session);\n    //Creating a new Conversation.\n    const { createConversation, newTitle, setNewTitle, isCreateLoading, error } = (0,_hooks_createConversation__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(session, setConversations, setCurrentConversationId);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        (0,_utilis_CheckSession__WEBPACK_IMPORTED_MODULE_6__.checkSession)(status, {\n            setUserId,\n            setUserName,\n            setSessionStatus,\n            setEmail,\n            setSplitUserName,\n            isClient: _utilis_isClient__WEBPACK_IMPORTED_MODULE_4__.isClient,\n            session,\n            router,\n            email,\n            userName,\n            splitUserName\n        });\n    }, [\n        status\n    ]);\n    //This funcitno shifts and shows the mobile Chat ccontainer\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const [isAtZero, setIsAtZero] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false); // State to track the position\n    const handleMobileChatBtnClick = ()=>{\n        if (chatContainerRef.current) {\n            if (isAtZero) {\n                chatContainerRef.current.style.transform = \"translateX(-100%)\";\n            } else {\n                chatContainerRef.current.style.transform = \"translateX(0px)\";\n            }\n            setIsAtZero(!isAtZero); // Toggle the state\n        }\n    };\n    // Effect to handle viewport resize\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        const handleResize = ()=>{\n            if (window.innerWidth >= 950 && chatContainerRef.current) {\n                chatContainerRef.current.style.transform = \"translateX(0px)\";\n                setIsAtZero(false); // Reset the state\n            } else if (chatContainerRef.current) {\n                chatContainerRef.current.style.transform = \"translateX(-100%)\";\n                setIsAtZero(true); // Reset the state\n            }\n        };\n        window.addEventListener(\"resize\", handleResize);\n        // Cleanup event listener on component unmount\n        return ()=>{\n            window.removeEventListener(\"resize\", handleResize);\n        };\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (userName !== null) {\n            sessionStorage.setItem(\"userName\", userName);\n        }\n        if (splitUserName !== \"\") {\n            sessionStorage.setItem(\"splitUserName\", splitUserName);\n        }\n    }, [\n        userName,\n        splitUserName\n    ]);\n    const [editTitleId, setEditTitleId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [editedTitle, setEditedTitle] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [editingTitle, setEditingTitle] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [titleUpdated, setTitleUpdated] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false); // New state for title updates\n    //Editing the ability to change the existing title.\n    const handleTitleClick = (convoId)=>{\n        const conversation = conversations.find((convo)=>convo.conversationId === convoId);\n        if (conversation) {\n            setEditTitleId(conversation.conversationId);\n            setEditedTitle(conversation.title);\n            setEditingTitle(true);\n        } else {\n        // console.log(`Conversation with ID ${convoId} not found`);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        editTitleId,\n        editedTitle\n    ]);\n    const handleTitleChange = (event)=>{\n        setEditedTitle(event.target.value);\n    };\n    async function getConversation(conversationId) {\n        try {\n            const response = await fetch(\"/api/\".concat(conversationId));\n            if (!response.ok) {\n                throw new Error(\"Failed to fetch conversation\");\n            }\n            const updatedConversation = await response.json();\n            // console.log(\n            //   \"Logging the converations before errorw\",\n            //   updatedConversation\n            // );\n            // Update local state\n            setConversations((prevConversations)=>{\n                return prevConversations.map((convo)=>convo === conversationId ? {\n                        ...convo,\n                        title: updatedConversation.title\n                    } : convo);\n            });\n            updateLocalStorage(updatedConversation, conversationId);\n        } catch (error) {\n            console.error(\"Error fetching conversation:\", error);\n            throw error; // Re-throw to handle it in the UI layer\n        }\n    }\n    async function deleteConversation(conversationId) {\n        const currentConversations = conversations;\n        console.log(\"Conversation ID\", conversationId);\n        // Optimistically remove the conversation from UI\n        const updatedConversations = currentConversations.filter((convo)=>convo.conversationId !== conversationId);\n        setConversations(updatedConversations);\n        sessionStorage.setItem(\"conversations\", JSON.stringify(updatedConversations));\n        try {\n            const response = await fetch(\"/api/deleteConversations/\", {\n                method: \"DELETE\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    id: conversationId\n                })\n            });\n            if (!response.ok) {\n                throw new Error(\"Failed to delete the conversation\");\n            }\n            // Filter out the deleted conversation\n            const updatedConversations = conversations.filter((convo)=>convo.converatoinID !== conversationId);\n            // console.log(\"Logging out the Conversation Filter\", conversations);\n            // Update state and local storage\n            setConversations(updatedConversations); // Update React state\n            sessionStorage.setItem(\"conversations\", JSON.stringify(updatedConversations)); // Update local storage\n            if (response.ok) {\n                // Update the conversations state\n                const updatedConversations = conversations.filter((convo)=>convo.conversationId !== conversationId);\n                setConversations(updatedConversations);\n                // Update the session storage\n                sessionStorage.setItem(\"conversations\", JSON.stringify(updatedConversations));\n                router.push(\"/ai/chat\");\n            }\n        } catch (error) {\n            console.error(\"Error deleting conversation:\", error);\n            alert(\"Could not delete the conversation. Please try again.\");\n        }\n    }\n    function updateLocalStorage(updatedConversation, conversationId) {\n        const cachedConversations = sessionStorage.getItem(\"conversations\");\n        if (cachedConversations) {\n            try {\n                // Parse the cached conversations\n                const parsedConversations = JSON.parse(cachedConversations);\n                // Ensure that parsedConversations is an array\n                if (Array.isArray(parsedConversations)) {\n                    const updatedCache = parsedConversations.map((convo)=>convo.conversationId === conversationId ? {\n                            ...convo,\n                            title: updatedConversation.title\n                        } : convo);\n                    sessionStorage.setItem(\"conversations\", JSON.stringify(updatedCache));\n                } else {\n                    console.error(\"Parsed cached conversations is not an array\");\n                }\n            } catch (e) {\n                console.error(\"Error parsing cached conversations:\", e);\n            }\n        }\n    }\n    const handleSubmitTitle = async (event)=>{\n        event.preventDefault(); // Prevent form submission\n        let titleChange = \"\";\n        console.log(\"Event Key\", event.key);\n        if (event.key === \"Enter\") {\n            event.preventDefault(); // Prevent form submission\n            const newTitle = editedTitle; // Capture the title at the time of submission\n            titleChange = editTitleId !== null && editTitleId !== void 0 ? editTitleId : \"\";\n            // console.log(\"New title to be set:\", newTitle);\n            // console.log(\"New title Id being logged\", editTitleId);\n            if (editTitleId !== null && editTitleId !== \"\") {\n                const updatedConversations = conversations.map((convo)=>convo.conversationId === editTitleId ? {\n                        ...convo,\n                        title: newTitle\n                    } : convo);\n                setConversations(updatedConversations);\n                // console.log(\"Updated conversations:\", updatedConversations);\n                sessionStorage.setItem(\"conversations\", JSON.stringify(updatedConversations));\n                setEditTitleId(null); // Exit edit mode\n                setEditedTitle(\"\"); // Clear the edited title state\n                setEditingTitle(false);\n            }\n        }\n        const localConversationId = localStorage.getItem(\"currentConversationId\");\n        console.log(\"Local Conversation ID\", localConversationId);\n        try {\n            const response = await fetch(\"/api/submitTitle/\", {\n                method: \"PUT\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    title: editedTitle,\n                    id: localConversationId\n                })\n            });\n            // console.log(\"Are you sending the new Title\", editedTitle);\n            if (response.ok) {\n                // await getConversation(editTitleId);\n                setEditingTitle(false);\n                setTitleUpdated((prev)=>!prev); // Toggle the titleUpdated state\n            }\n            if (!response.ok) {\n                throw new Error(\"Failed to update title\");\n            }\n        } catch (error) {\n            console.error(\"Error updating title:\", error);\n            // If the update fails, revert the change in the UI and alert the user\n            const originalConversations = conversations.map((convo)=>convo.conversationId === editTitleId ? {\n                    ...convo,\n                    title: convo.title\n                } : convo);\n            setConversations(originalConversations);\n            sessionStorage.setItem(\"conversations\", JSON.stringify(originalConversations));\n            alert(\"Failed to update title, please try again.\"); // Inform the user\n        }\n    };\n    const chatDashBoardRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    // Check for special commands\n    const specialCommands = {\n        \"br\": \"$br\",\n        \"down\": \"$down\",\n        \"help\": \"$help\",\n        \"listbr\": \"$listbr\",\n        \"new\": \"$new\",\n        \"pdf\": \"$pdf\",\n        \"rem\": \"$rem\",\n        \"usage\": \"$usage\"\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        const loadPdfImages = ()=>{\n            // Assuming the public folder is at the root of your project\n            const pdfImagesContext = __webpack_require__(\"(app-pages-browser)/./public/pdfImage sync \\\\.(png%7Cjpe?g%7Cgif)$/\");\n            const imageFiles = pdfImagesContext.keys().map((key)=>\"/pdfImage\".concat(key.replace(\".\", \"\")));\n            setPdfImages(imageFiles);\n        };\n        loadPdfImages();\n    }, []);\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        if (!message.trim()) {\n            console.log(\"Empty message, returning\");\n            return;\n        }\n        setMessagesIsLoading(true);\n        const command = message.trim().split(\" \")[0].toLowerCase().replace(\"/\", \"\");\n        console.log(\"Command\", command);\n        if (command === \"$listbr\") {\n            setResponses((prevResponses)=>[\n                    ...prevResponses,\n                    {\n                        question: message,\n                        response: \"Here are your PDF images:\",\n                        imageUrl: pdfImages,\n                        id: Date.now().toString()\n                    }\n                ]);\n            setMessage(\"\"); // Clear the message input\n            setMessagesIsLoading(false);\n            return; // Exit the function after ha\n        }\n        // New functionality to handlendle $br <num>\n        if (command.startsWith(\"$br\")) {}\n        if (command === \"$br\") {\n            const index = parseInt(message.split(\" \")[1], 10); // Get the number after $br\n            if (!isNaN(index) && index >= 0 && index < pdfImages.length) {\n                console.log(\"Selected PDF image\", index, \"Path:\", pdfImages[index]);\n                // Log the path to the selected PDF image\n                setSelectedPdfImage(pdfImages[index]); // Set the selected PDF image by index\n            } else {\n                console.log(\"Invalid index for PDF selection\");\n            }\n            setMessagesIsLoading(false);\n            return;\n        }\n        if (command === \"$pdf\") {\n            console.log(\"Selected PDF image\", selectedPdfImage);\n            uploadImage(selectedPdfImage, message);\n            setMessagesIsLoading(false);\n            return;\n        }\n        if (command === \"$help\") {\n            const commandList = Object.keys(specialCommands).join(\", \"); // Create a list of commands\n            setResponses((prevResponses)=>[\n                    ...prevResponses,\n                    {\n                        question: message,\n                        response: \"Here are your available commands: $\".concat(commandList),\n                        id: Date.now().toString()\n                    }\n                ]);\n            setMessagesIsLoading(false);\n            return;\n        }\n        async function uploadImage(imagePath, message) {\n            // Fetch the image as a Blob\n            const response = await fetch(imagePath);\n            const blob = await response.blob(); // Convert the response to a Blob\n            const file = new File([\n                blob\n            ], \"image.png\", {\n                type: blob.type\n            }); // Create a File object\n            const formData = new FormData();\n            formData.append(\"file\", file); // Change 'files' to 'file'\n            formData.append(\"message\", message); // Add the message to the form data\n            fetch(\"http://127.0.0.1:5000/upload\", {\n                method: \"POST\",\n                body: formData\n            }).then((response)=>{\n                if (response.ok) {\n                    // Check if the response is a PDF\n                    const contentType = response.headers.get(\"content-type\");\n                    if (contentType && contentType.includes(\"application/pdf\")) {\n                        // Handle PDF download\n                        return response.blob().then((blob)=>{\n                            const url = window.URL.createObjectURL(blob);\n                            const a = document.createElement(\"a\");\n                            a.href = url;\n                            a.download = \"output.pdf\"; // Specify the download name\n                            document.body.appendChild(a);\n                            a.click();\n                            a.remove();\n                        });\n                    } else {\n                        // Handle JSON response\n                        return response.json();\n                    }\n                } else {\n                    throw new Error(\"Network response was not ok.\");\n                }\n            }).then((data)=>{\n                console.log(\"Upload successful:\", data);\n            }).catch((error)=>{\n                console.error(\"Error uploading image:\", error);\n            });\n        }\n        if (command === \"$rem\") {\n            await handleUploadFile(e); // Call handleUploadFile directly\n            console.log(\"Remove command\", message);\n            setMessage(\"\");\n            return;\n        }\n        // Check for the /upscale command\n        if (command === \"upscale\") {\n            await handleUploadFile(e); // Call handleUploadFile directly\n            return; // Exit the function after handling the upscale command\n        }\n        if (command in specialCommands) {\n            // Handle special command\n            await handleSpecialCommand(command, message, e);\n        } else {\n            // Regular chat flow\n            if ((0,_utilis_isClient__WEBPACK_IMPORTED_MODULE_4__.isClient)()) {\n                if (!currentConversationId) {\n                    console.log(\"Creating new conversation\");\n                    await createConversation().then((convoID)=>{\n                        console.log(\"New conversation created with ID:\", convoID);\n                        setCurrentConversationId(convoID);\n                        sessionStorage.setItem(\"currentConversationId\", convoID);\n                        localStorage.setItem(\"currentConversationId\", convoID);\n                    });\n                }\n                const updatedConversationId = localStorage.getItem(\"currentConversationId\");\n                // 1. Set up the new response without any bot response yet.\n                const newResponse = {\n                    question: message,\n                    response: \"\",\n                    id: \"temp\"\n                };\n                // Use functional update for state\n                setResponses((responses)=>[\n                        ...responses,\n                        newResponse\n                    ]);\n                setMessage(\"\");\n                console.log(\"Chat is still bieng called\", responses);\n                try {\n                    // 2. Fetch bot reply from the API\n                    const botReply = await fetch(chatBotUrl, {\n                        method: \"POST\",\n                        headers: {\n                            \"Content-type\": \"application/json\"\n                        },\n                        mode: \"cors\",\n                        body: JSON.stringify({\n                            userId: session === null || session === void 0 ? void 0 : session.user.id,\n                            message,\n                            conversationId: currentConversationId\n                        })\n                    }).then((res)=>res.json());\n                    setResponseLoading(false);\n                    // 3. Update the responses array with the bot's reply\n                    setResponses((prevResponses)=>prevResponses.map((resp)=>{\n                            if (resp.question === message) {\n                                return {\n                                    ...resp,\n                                    response: botReply.response\n                                };\n                            }\n                            return resp;\n                        }));\n                    // console.log(\"Logging the new Responses\", responses);\n                    console.log(\"Logging the bot reply\", botReply);\n                    await fetch(\"/api/messages\", {\n                        method: \"POST\",\n                        headers: {\n                            \"Content-type\": \"application/json\"\n                        },\n                        body: JSON.stringify({\n                            userId: session === null || session === void 0 ? void 0 : session.user.id,\n                            conversationId: updatedConversationId,\n                            userContent: message,\n                            botResponse: botReply.response,\n                            imageUrl: \"\"\n                        })\n                    });\n                //Add the conversations arrawy or update\n                } catch (error) {\n                    console.error(\"Error handling submission:\", error);\n                }\n            }\n        }\n    };\n    const [, setfileURL] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [selectedFile, setselectedFile] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [uploadedFile, setuploadedFile] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({});\n    const [isUploading, setisUploading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [isFileUploaded, setisFileUploaded] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [uploadProgress, setuploadProgress] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0);\n    let uploadInput = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2___default().createRef();\n    // Update handleDrop to work like handleSelectFile\n    const handleSelectFile = (e)=>{\n        const selectedFileList = [];\n        for(let i = 0; i < e.target.files.length; i++){\n            selectedFileList.push(e.target.files.item(i));\n        }\n        setselectedFile(selectedFileList);\n    };\n    // Upload file to server\n    const handleUploadFile = async (e)=>{\n        e.preventDefault();\n        setisUploading(true);\n        const data = new FormData();\n        console.log(\"THe upload input\", uploadInput.files);\n        // Append the file to the request body\n        for(let i = 0; i < uploadInput.files.length; i++){\n            data.append(\"file\", uploadInput.files[i], uploadInput.files[i].name);\n        }\n        const newResponse = {\n            question: message,\n            response: \"\",\n            id: \"temp\"\n        };\n        setResponses((responses)=>[\n                ...responses,\n                newResponse\n            ]);\n        setMessage(\"\");\n        console.log(\"LOggin he data\", data);\n        try {\n            const config = {\n                onUploadProgress: (progressEvent)=>{\n                    const { loaded, total } = progressEvent;\n                    setuploadProgress(Math.round(loaded / total * 100));\n                }\n            };\n            const response = await axios__WEBPACK_IMPORTED_MODULE_13__[\"default\"].post(\"http://127.0.0.1:5000/process_image\", data, config);\n            const body = response.data;\n            console.log(\"Logging the response\", response.data);\n            setResponses((prevResponses)=>prevResponses.map((resp)=>{\n                    if (resp.question === message) {\n                        // Set imageUrl directly instead of an array\n                        const newImageUrl = response.data.image_url.startsWith(\"http\") ? response.data.image_url // Use the existing URL if it already has the protocol\n                         : \"http://127.0.0.1:5000\".concat(response.data.image_url); // Prepend the base URL if not\n                        return {\n                            ...resp,\n                            imageUrl: newImageUrl\n                        };\n                    }\n                    return resp;\n                }));\n            console.log(\"Logging the responses\", responses);\n            const updatedConversationId = sessionStorage.getItem(\"currentConversationId\");\n            console.log(\"Logging the response data\", response.data.responses);\n            await fetch(\"/api/messages\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    userId: session === null || session === void 0 ? void 0 : session.user.id,\n                    conversationId: updatedConversationId,\n                    userContent: message,\n                    imageUrl: \"http://127.0.0.1:5000\".concat(response.data.image_url)\n                })\n            });\n            console.log(\"Returning the body\", body);\n            setfileURL(\"\".concat(chatBotUrl, \"/\").concat(body.filename));\n            if (response.status === 200) {\n                setisFileUploaded(true); // flag to show the uploaded file\n                setisUploading(false);\n                setuploadedFile(selectedFile); // set the uploaded file to show the name\n            }\n        } catch (error) {\n            console.error(error);\n            setisUploading(false);\n        }\n    };\n    const handleSpecialCommand = async (command, fullMessage, e)=>{\n        const baseUrl = \"http://127.0.0.1:5000\";\n        let commandEndpoint;\n        let requestBody;\n        if (command === \"upscale\") {\n            console.log(\"Upscale Command\", fullMessage);\n        } else if (command === \"generate\") {\n            console.log(\"Generate Command\", fullMessage);\n            console.log(\"User ID:\", session === null || session === void 0 ? void 0 : session.user.id);\n            console.log(\"Content:\", fullMessage.substring(fullMessage.indexOf(\" \") + 1));\n            console.log(\"Logo Image:\", selectedFile ? selectedFile[0].name : null);\n            console.log(\"Background Image:\", \"\");\n            console.log(\"Filename:\", \"user_report_\".concat(new Date().toISOString().replace(/[-:]/g, \"\").split(\".\")[0], \".pdf\"));\n            commandEndpoint = generatePdfUrl;\n            requestBody = {\n                userId: session === null || session === void 0 ? void 0 : session.user.id,\n                content: fullMessage.substring(fullMessage.indexOf(\" \") + 1),\n                logo_image: selectedFile ? selectedFile.name : null,\n                background_image: \"\",\n                filename: \"user_report_\".concat(new Date().toISOString().replace(/[-:]/g, \"\").split(\".\")[0], \".pdf\"),\n                conversationId: currentConversationId\n            };\n            console.log(\"Loggin the request body\", requestBody);\n            console.log(\"Request Body:\", JSON.stringify(requestBody, null, 2));\n        } else {\n            commandEndpoint = \"\".concat(baseUrl).concat(specialCommands[command]);\n            requestBody = {\n                userId: session === null || session === void 0 ? void 0 : session.user.id,\n                message: fullMessage,\n                conversationId: currentConversationId\n            };\n        }\n        console.log(\"Command Endpoint:\", commandEndpoint);\n        try {\n            const response = await fetch(commandEndpoint, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(requestBody)\n            });\n            if (!response.ok) {\n                throw new Error(\"HTTP error! status: \".concat(response.status));\n            }\n            if (command === \"generate\") {\n                // Handle PDF response\n                const blob = await response.blob();\n                const url = window.URL.createObjectURL(blob);\n                const a = document.createElement(\"a\");\n                a.style.display = \"none\";\n                a.href = url;\n                a.download = requestBody.filename;\n                document.body.appendChild(a);\n                a.click();\n                window.URL.revokeObjectURL(url);\n                // Update UI to indicate successful PDF generation\n                setResponses((prevResponses)=>[\n                        ...prevResponses,\n                        {\n                            question: fullMessage,\n                            response: \"PDF generated successfully. Check your downloads.\",\n                            id: Date.now().toString()\n                        }\n                    ]);\n            } else {\n                // Handle JSON response for other commands\n                const data = await response.json();\n                console.log(\"Command \".concat(command, \" response:\"), data);\n                // Update UI with command response\n                setResponses((prevResponses)=>[\n                        ...prevResponses,\n                        {\n                            question: fullMessage,\n                            response: data.response,\n                            id: Date.now().toString()\n                        }\n                    ]);\n            }\n        } catch (error) {\n            console.error(\"Error executing command \".concat(command, \":\"), error);\n            // Update UI with error message\n            setResponses((prevResponses)=>[\n                    ...prevResponses,\n                    {\n                        question: fullMessage,\n                        response: \"Error executing command: \".concat(error instanceof Error ? error.message : \"Unknown error\"),\n                        id: Date.now().toString()\n                    }\n                ]);\n            setMessagesIsLoading(false);\n        } finally{\n            setMessagesIsLoading(false);\n        }\n    };\n    const handleConversationClick = (convoId)=>{\n        const targetPath = \"/ai/chat/\".concat(session === null || session === void 0 ? void 0 : session.user.id, \"/\").concat(convoId);\n        router.push(targetPath, undefined);\n        //Store the Current converatoinID in local to persit on chaning the navigation\n        localStorage.setItem(\"currentConversationId\", convoId);\n        // console.log(\n        //   \"Logging the current conversation ID\",\n        //   localStorage.getItem(\"currentConversationId\")\n        // );\n        const localStorageConvoId = localStorage.getItem(\"currentConversationId\");\n        setCurrentConversationId(convoId);\n    };\n    //Get the full Message Conversation.\n    const clearStorage = ()=>{\n        sessionStorage.removeItem(\"initialMessage\");\n    };\n    //Another Hook Check for the local storage\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (currentConversationId) {\n            handleConversationClick(currentConversationId);\n        }\n        clearStorage();\n    }, [\n        currentConversationId\n    ]); // Dependency array includes state that triggers this effect\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        isLoading\n    ]);\n    //Checking if Chat conversations is loading\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        messagesIsLoading\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        isReponseLoading\n    ]);\n    //Fetch Message for this converations\n    const messagesRefCounter = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        messagesRefCounter\n    ]);\n    const fetchMessagesForConversation = async (conversationId)=>{\n        messagesRefCounter.current += 1;\n        if (messagesRefCounter.current > 1) {\n            return;\n        }\n        if (!session || !session.user || !session.user.id) {\n            console.error(\"No user session available\");\n            return;\n        }\n        setMessagesIsLoading(true);\n        console.log(\"Fetching messages for conversation:\", conversationId);\n        if (!conversationId) {\n            console.error(\"no conversatoin ID\");\n            return;\n        } else {\n            try {\n                const response = await fetch(\"/api/storedMessages?authorId=\".concat(session === null || session === void 0 ? void 0 : session.user.id, \"&conversationId=\").concat(conversationId));\n                if (!response.ok) {\n                    throw new Error(\"Failed to fetch messages\");\n                }\n                const messages = await response.json();\n                // console.log(\"Add the IDS\",messages.map(msgs => msgs.id))\n                // Map API response to expected format in state\n                //Naming conventions matter\n                const formattedMessages = messages.map((msg)=>({\n                        question: msg.userContent,\n                        response: msg.botResponse,\n                        imageUrl: msg.imageUrl,\n                        id: msg.id\n                    }));\n                setResponses([]);\n                if (response.ok) {\n                    setResponses(formattedMessages);\n                }\n                setMessagesIsLoading(false);\n            } catch (error) {\n                setMessagesIsLoading(true);\n                console.error(\"Error fetching messages:\", error);\n            }\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{}, [\n        responses\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        setResponses([]); // Clear previous messages\n        if (status === \"authenticated\" && session) {\n            // Fetch messages for the current conversation if needed\n            if (currentConversationId === null) {\n                fetchMessagesForConversation(currentConversationId || localStorageConvoId);\n            } else {\n            // console.log(\"Fech is doing good\", currentConversationId);\n            }\n        }\n    }, [\n        currentConversationId\n    ]);\n    if (!conversations) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n            children: \"No conversation found.\"\n        }, void 0, false, {\n            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n            lineNumber: 979,\n            columnNumber: 12\n        }, this);\n    }\n    const [chatContainerShown, setChatContainerShown] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const chatContainerToggle = ()=>{\n        console.log(\"IS this being clicked??? Showon yes or no\");\n        setChatContainerShown(!chatContainerShown);\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        console.log(\"Responses\", selectedFile);\n    }, [\n        selectedFile\n    ]);\n    //Function takes you to the bottom of the div by clicking the floating button.\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"chatDashboard text-white\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatContainer__WEBPACK_IMPORTED_MODULE_11__.ChatContainer, {\n                setConversations: setConversations,\n                conversations: conversations,\n                currentConversationId: currentConversationId,\n                splitUserName: splitUserName,\n                userName: userName || \"\",\n                email: email || \"\",\n                onConversationClick: handleConversationClick,\n                onDeleteConvo: deleteConversation,\n                onChangeConvoTitle: handleSubmitTitle,\n                handleTitleClick: handleTitleClick,\n                editTitleId: editTitleId,\n                editedTitle: editedTitle,\n                handleTitleChange: handleTitleChange,\n                editingTitle: editingTitle,\n                titleUpdated: titleUpdated,\n                chatContainerRef: chatContainerRef,\n                handleMobileChatBtnClick: handleMobileChatBtnClick\n            }, void 0, false, {\n                fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                lineNumber: 998,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: chatDashBoardRef,\n                className: \"chatDashboardWrapper w-full text-left\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"chatDashBoardContainer \",\n                    children: [\n                        responses.length > 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatMessage__WEBPACK_IMPORTED_MODULE_12__.ChatMessagesContainer, {\n                            responses: responses || []\n                        }, void 0, false, {\n                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                            lineNumber: 1040,\n                            columnNumber: 13\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-full flex items-center justify-center\"\n                        }, void 0, false, {\n                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                            lineNumber: 1042,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                            ref: formRef,\n                            onSubmit: handleSubmit,\n                            className: \"chatFormSubmit\",\n                            // onDrop={handleDrop}\n                            onDragOver: (e)=>e.preventDefault(),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative textAreaContainer\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                            onChange: (e)=>{\n                                                setMessage(e.target.value);\n                                            },\n                                            onKeyDown: (e)=>{\n                                                if (e.key === \"Enter\" && !e.shiftKey) {\n                                                    var _formRef_current;\n                                                    e.preventDefault();\n                                                    (_formRef_current = formRef.current) === null || _formRef_current === void 0 ? void 0 : _formRef_current.requestSubmit();\n                                                }\n                                            },\n                                            value: message,\n                                            placeholder: \"Ask Thou Question...\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                            lineNumber: 1060,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"textAreaIconWrapper flex flex-row gap-[11px]\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                    type: \"file\",\n                                                    id: \"fileInput\",\n                                                    multiple: true,\n                                                    style: {\n                                                        display: \"none\"\n                                                    },\n                                                    onChange: handleSelectFile,\n                                                    ref: (ref)=>{\n                                                        uploadInput = ref;\n                                                    }\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                    lineNumber: 1075,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: \"textAreaIcon\",\n                                                    onClick: ()=>{\n                                                        var _document_getElementById;\n                                                        return (_document_getElementById = document.getElementById(\"fileInput\")) === null || _document_getElementById === void 0 ? void 0 : _document_getElementById.click();\n                                                    },\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        width: \"18\",\n                                                        height: \"18\",\n                                                        fill: \"none\",\n                                                        viewBox: \"0 0 24 24\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fill: \"currentColor\",\n                                                            \"fill-rule\": \"evenodd\",\n                                                            d: \"M9 7a5 5 0 0 1 10 0v8a7 7 0 1 1-14 0V9a1 1 0 0 1 2 0v6a5 5 0 0 0 10 0V7a3 3 0 1 0-6 0v8a1 1 0 1 0 2 0V9a1 1 0 1 1 2 0v6a3 3 0 1 1-6 0z\",\n                                                            \"clip-rule\": \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                            lineNumber: 1096,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                        lineNumber: 1089,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                    lineNumber: 1085,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    type: \"submit\",\n                                                    className: \"textAreaIcon\",\n                                                    children: messagesIsLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_buttonComponet__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {}, void 0, false, {\n                                                        fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                        lineNumber: 1106,\n                                                        columnNumber: 41\n                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        width: \"18\",\n                                                        height: \"18\",\n                                                        fill: \"none\",\n                                                        viewBox: \"0 0 32 32\",\n                                                        className: \"\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fill: \"currentColor\",\n                                                            \"fill-rule\": \"evenodd\",\n                                                            d: \"M15.192 8.906a1.143 1.143 0 0 1 1.616 0l5.143 5.143a1.143 1.143 0 0 1-1.616 1.616l-3.192-3.192v9.813a1.143 1.143 0 0 1-2.286 0v-9.813l-3.192 3.192a1.143 1.143 0 1 1-1.616-1.616z\",\n                                                            \"clip-rule\": \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                            lineNumber: 1115,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                        lineNumber: 1107,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                                    lineNumber: 1105,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                            lineNumber: 1074,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                    lineNumber: 1059,\n                                    columnNumber: 13\n                                }, this),\n                                selectedFile && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"mt-2\",\n                                    children: [\n                                        \"Selected file: \",\n                                        selectedFile[0].name\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                                    lineNumber: 1127,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                            lineNumber: 1052,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                    lineNumber: 1036,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n                lineNumber: 1020,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/sydneysanders/Desktop/CodeProjects/HustuleCode/HustleCode/my-app/src/app/ai/chat/[userId]/[conversationId]/page.tsx\",\n        lineNumber: 995,\n        columnNumber: 5\n    }, this);\n}\n_s(ConversationPage, \"5oPYU849AKr6nwfeQHz62MYqVQg=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_1__.useRouter,\n        _hooks_useSessionStorage__WEBPACK_IMPORTED_MODULE_5__.useSessionStorage,\n        _hooks_ConversationContext__WEBPACK_IMPORTED_MODULE_8__.useChatConversation,\n        next_auth_react__WEBPACK_IMPORTED_MODULE_3__.useSession,\n        _hooks_useConversations__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n        _hooks_createConversation__WEBPACK_IMPORTED_MODULE_9__[\"default\"]\n    ];\n});\n_c = ConversationPage;\nvar _c;\n$RefreshReg$(_c, \"ConversationPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvYWkvY2hhdC9bdXNlcklkXS9bY29udmVyc2F0aW9uSWRdL3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSw2Q0FBNkMsR0FDRDtBQVU3QjtBQUMwQztBQUl6RCw2QkFBNkI7QUFDZ0I7QUFDaUI7QUFDVDtBQUNzQjtBQUUzRSxvREFBb0Q7QUFDcEQsWUFBWTtBQUVzRDtBQUNIO0FBQ1A7QUFDeEQsZ0JBQWdCO0FBQ29DO0FBQ007QUFHaEM7QUFFMUIsNEVBQTRFO0FBQzVFLHNGQUFzRjtBQUN0RiwrREFBK0Q7QUFDL0Qsa0VBQWtFO0FBQ25ELFNBQVNnQjs7SUFDdEIsTUFBTUMsYUFBYTtJQUNuQixNQUFNQyxpQkFBaUI7SUFFdkIsTUFBTUMsU0FBU25CLDBEQUFTQTtJQUN4QixNQUFNb0IsVUFBVWhCLDZDQUFNQSxDQUFrQjtJQUN4Qyx5RUFBeUU7SUFFekUsTUFBTSxDQUFDaUIsZUFBZUMsaUJBQWlCLEdBQUdwQiwrQ0FBUUEsQ0FBUztJQUMzRCxNQUFNLENBQUNxQixRQUFRQyxVQUFVLEdBQUd0QiwrQ0FBUUEsQ0FBUztJQUM3QyxNQUFNLENBQUN1QixnQkFBZ0JDLGtCQUFrQixHQUFHeEIsK0NBQVFBLENBQUM7SUFFckQsTUFBTSxDQUFDeUIsV0FBV0MsYUFBYSxHQUFHMUIsK0NBQVFBLENBQVcsRUFBRTtJQUN2RCxNQUFNLENBQUMyQixrQkFBa0JDLG9CQUFvQixHQUFHNUIsK0NBQVFBLENBQWdCO0lBRXhFLDhCQUE4QjtJQUM5QixNQUFNLENBQUM2QixrQkFBa0JDLG9CQUFvQixHQUFHOUIsK0NBQVFBLENBQVcsRUFBRTtJQUVyRSxNQUFNLEVBQ0orQixRQUFRLEVBQ1JDLFdBQVcsRUFDWEMsYUFBYSxFQUNiQyxLQUFLLEVBQ0xDLFFBQVEsRUFDUkMsZ0JBQWdCLEVBQ2pCLEdBQUcvQiwyRUFBaUJBO0lBRXJCLE1BQU0sRUFBRWdDLFNBQVMsRUFBRUMsWUFBWSxF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QkE7Ozs7NkVBQzNDLDhEQUFDMlE7d0RBQ0NDLE9BQU07d0RBQ05DLE9BQU07d0RBQ05DLFFBQU87d0RBQ1BDLE1BQUs7d0RBQ0xDLFNBQVE7d0RBQ1J4QixXQUFVO2tFQUVWLDRFQUFDeUI7NERBQ0NGLE1BQUs7NERBQ0xHLGFBQVU7NERBQ1ZDLEdBQUU7NERBQ0ZDLGFBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0NBT3JCcEYsOEJBQ0MsOERBQUN1RDtvQ0FBSUMsV0FBVTs7d0NBQU87d0NBQWdCeEQsWUFBWSxDQUFDLEVBQUUsQ0FBQ2lCLElBQUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU94RTtHQXJrQ3dCMU07O1FBSVBoQixzREFBU0E7UUFxQnBCTyx1RUFBaUJBO1FBR25CRywyRUFBbUJBO1FBU2FMLHVEQUFVQTtRQWNXTyxnRUFBZ0JBO1FBTXJFRCxpRUFBcUJBOzs7S0F6RERLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvYWkvY2hhdC9bdXNlcklkXS9bY29udmVyc2F0aW9uSWRdL3BhZ2UudHN4P2UwOTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG4vKiBlc2xpbnQtZGlzYWJsZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rcyAqL1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvbmF2aWdhdGlvblwiO1xuaW1wb3J0IHsgdXNlUGF0aG5hbWUgfSBmcm9tIFwibmV4dC9uYXZpZ2F0aW9uXCI7XG5pbXBvcnQgVXBsb2FkRmlsZSBmcm9tIFwiLi4vLi4vVXBsb2FkRmlsZS9BcHBcIjtcbmltcG9ydCBSZWFjdCwge1xuICB1c2VTdGF0ZSxcbiAgdXNlRWZmZWN0LFxuICB1c2VSZWYsXG4gIHVzZSxcbiAgdXNlSWQsXG4gIEZvcm1FdmVudCxcbn0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VTZXNzaW9uLCBnZXRTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aC9yZWFjdFwiO1xuaW1wb3J0IHsgU2Vzc2lvbiB9IGZyb20gXCJuZXh0LWF1dGhcIjtcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vLi4vdHlwZXNcIjtcblxuLy9VdGlsaXMgYW5kIGhlbHBlciBmdW5jdGlvbnNcbmltcG9ydCB7IGlzQ2xpZW50IH0gZnJvbSBcIkAvdXRpbGlzL2lzQ2xpZW50XCI7XG5pbXBvcnQgeyB1c2VTZXNzaW9uU3RvcmFnZSB9IGZyb20gXCJAL2hvb2tzL3VzZVNlc3Npb25TdG9yYWdlXCI7XG5pbXBvcnQgeyBjaGVja1Nlc3Npb24gfSBmcm9tIFwiQC91dGlsaXMvQ2hlY2tTZXNzaW9uXCI7XG5pbXBvcnQgQnV0dG9uTG9hZGluZ0NvbXBvbmVudCBmcm9tIFwiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9idXR0b25Db21wb25ldFwiO1xuXG4vLyBpbXBvcnQgeyBIZWFkZXIgfSBmcm9tIFwiQC9hcHAvY29tcG9uZW50cy9IZWFkZXJcIjtcbi8vIERhc2hib2FyZFxuXG5pbXBvcnQgeyB1c2VDaGF0Q29udmVyc2F0aW9uIH0gZnJvbSBcIkAvaG9va3MvQ29udmVyc2F0aW9uQ29udGV4dFwiO1xuaW1wb3J0IHVzZUNyZWF0ZUNvbnZlcnNhdGlvbiBmcm9tIFwiQC9ob29rcy9jcmVhdGVDb252ZXJzYXRpb25cIjtcbmltcG9ydCB1c2VDb252ZXJzYXRpb25zIGZyb20gXCJAL2hvb2tzL3VzZUNvbnZlcnNhdGlvbnNcIjtcbi8vQ2hhdCBDb250YWluZXJcbmltcG9ydCB7IENoYXRDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vQ2hhdENvbnRhaW5lclwiO1xuaW1wb3J0IHsgQ2hhdE1lc3NhZ2VzQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uL0NoYXRNZXNzYWdlXCI7XG5pbXBvcnQgeyBHdWlkZWxpbmVzIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvR3VpZGVsaW5lc1wiO1xuXG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XG5cbi8vIGltcG9ydCBGbG9hdGluZ1Njcm9sbEJ1dHRvbiBmcm9tIFwiQC9hcHAvY29tcG9uZW50cy9TY3JvbGxUb0JvdHRvbUJ1dHRvblwiO1xuLy8gaW1wb3J0IE9wZW5DaGF0Q29udGFpbmVyIGZyb20gXCJAL2FwcC9jb21wb25lbnRzL2hlbHBlci9vcGVuQ2hhdENvbnRhaW5lckNvbXBvbmVudFwiO1xuLy8gaW1wb3J0IHsgdXNlU2Vzc2lvbkdhdGUgfSBmcm9tIFwiQC9hcHAvcHJvZmlsZS9fbWlkZGxld2hlcmVcIjtcbi8vIGltcG9ydCBMb2FkaW5nQ29tcG9uZW50IGZyb20gXCJAL2FwcC9jb21wb25lbnRzL2hlbHBlci9Mb2FkaW5nXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb252ZXJzYXRpb25QYWdlKCkge1xuICBjb25zdCBjaGF0Qm90VXJsID0gXCIgaHR0cDovLzEyNy4wLjAuMTo1MDAwL2NoYXRcIjtcbiAgY29uc3QgZ2VuZXJhdGVQZGZVcmwgPSBcIiBodHRwOi8vMTI3LjAuMC4xOjUwMDAvZ2VuZXJhdGVfcGRmXCI7XG5cbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IGZvcm1SZWYgPSB1c2VSZWY8SFRNTEZvcm1FbGVtZW50PihudWxsKTtcbiAgLy9TaG91bGQgd3JhcCB0aGVzZSBpbiBhIGJpZ2dlciBmdW5jdGlvbiBzaW5jZSBiZWluZyB1c2VkIG11bHRpcGxlIHRpbWVzP1xuXG4gIGNvbnN0IFtzZXNzaW9uU3RhdHVzLCBzZXRTZXNzaW9uU3RhdHVzXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IFt1c2VySWQsIHNldFVzZXJJZF0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBbc2hvd0d1aWRlbGluZXMsIHNldFNob3dHdWlkZWxpbmVzXSA9IHVzZVN0YXRlKHRydWUpO1xuXG4gIGNvbnN0IFtwZGZJbWFnZXMsIHNldFBkZkltYWdlc10gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuICBjb25zdCBbc2VsZWN0ZWRQZGZJbWFnZSwgc2V0U2VsZWN0ZWRQZGZJbWFnZV0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICAvL0xpc3Qgb2YgQmFja3JvdW5kIFBERiBpbWFnc2VcbiAgY29uc3QgW2JhY2tncm91bmRJbWFnZXMsIHNldEJhY2tncm91bmRJbWFnZXNdID0gdXNlU3RhdGU8c3RyaW5nW10+KFtdKTtcblxuICBjb25zdCB7XG4gICAgdXNlck5hbWUsXG4gICAgc2V0VXNlck5hbWUsXG4gICAgc3BsaXRVc2VyTmFtZSxcbiAgICBlbWFpbCxcbiAgICBzZXRFbWFpbCxcbiAgICBzZXRTcGxpdFVzZXJOYW1lLFxuICB9ID0gdXNlU2Vzc2lvblN0b3JhZ2UoKTtcblxuICBjb25zdCB7IHJlc3BvbnNlcywgc2V0UmVzcG9uc2VzLCBtZXNzYWdlLCBzZXRNZXNzYWdlIH0gPVxuICAgIHVzZUNoYXRDb252ZXJzYXRpb24oKTtcblxuY29uc3QgbG9jYWxTdG9yYWdlQ29udm9JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudENvbnZlcnNhdGlvbklkXCIpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChsb2NhbFN0b3JhZ2VDb252b0lkKSB7XG4gICAgICBzZXRDdXJyZW50Q29udmVyc2F0aW9uSWQobG9jYWxTdG9yYWdlQ29udm9JZCk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgeyBkYXRhOiBzZXNzaW9uLCBzdGF0dXMgfSA9IHVzZVNlc3Npb24oKTtcbiAgY29uc3QgW21lc3NhZ2VzSXNMb2FkaW5nLCBzZXRNZXNzYWdlc0lzTG9hZGluZ10gPSB1c2VTdGF0ZTxudWxsIHwgYm9vbGVhbj4oXG4gICAgbnVsbFxuICApO1xuXG4gIGNvbnN0IFtpc1JlcG9uc2VMb2FkaW5nLCBzZXRSZXNwb25zZUxvYWRpbmddID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIC8vU2V0IHRoZSBjb252ZXJzYXRpb25cbiAgY29uc3QgW2N1cnJlbnRDb252ZXJzYXRpb25JZCwgc2V0Q3VycmVudENvbnZlcnNhdGlvbklkXSA9IHVzZVN0YXRlPFxuICAgIG51bWJlciB8IHN0cmluZyB8IG51bGxcbiAgPihudWxsKTtcblxuICAvLyBjb25zdCBbbmV3VGl0bGUsIHNldE5ld1RpdGxlXSA9IHVzZVN0YXRlKFwiXCIpO1xuXG4gIGNvbnN0IHsgY29udmVyc2F0aW9ucywgaXNMb2FkaW5nLCBzZXRDb252ZXJzYXRpb25zIH0gPSB1c2VDb252ZXJzYXRpb25zKFxuICAgIHNlc3Npb24gYXMgYW55XG4gICk7XG5cbiAgLy9DcmVhdGluZyBhIG5ldyBDb252ZXJzYXRpb24uXG4gIGNvbnN0IHsgY3JlYXRlQ29udmVyc2F0aW9uLCBuZXdUaXRsZSwgc2V0TmV3VGl0bGUsIGlzQ3JlYXRlTG9hZGluZywgZXJyb3IgfSA9XG4gICAgdXNlQ3JlYXRlQ29udmVyc2F0aW9uKFxuICAgICAgc2Vzc2lvbiBhcyBTZXNzaW9uLFxuICAgICAgc2V0Q29udmVyc2F0aW9ucyBhcyBhbnksXG4gICAgICBzZXRDdXJyZW50Q29udmVyc2F0aW9uSWRcbiAgICApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY2hlY2tTZXNzaW9uKHN0YXR1cywge1xuICAgICAgc2V0VXNlcklkLFxuICAgICAgc2V0VXNlck5hbWUsXG4gICAgICBzZXRTZXNzaW9uU3RhdHVzLFxuICAgICAgc2V0RW1haWwsXG4gICAgICBzZXRTcGxpdFVzZXJOYW1lLFxuICAgICAgaXNDbGllbnQsXG4gICAgICBzZXNzaW9uLFxuICAgICAgcm91dGVyLFxuICAgICAgZW1haWwsXG4gICAgICB1c2VyTmFtZSxcbiAgICAgIHNwbGl0VXNlck5hbWUsXG4gICAgfSk7XG4gIH0sIFtzdGF0dXNdKTtcblxuICAvL1RoaXMgZnVuY2l0bm8gc2hpZnRzIGFuZCBzaG93cyB0aGUgbW9iaWxlIENoYXQgY2NvbnRhaW5lclxuICBjb25zdCBjaGF0Q29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgW2lzQXRaZXJvLCBzZXRJc0F0WmVyb10gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7IC8vIFN0YXRlIHRvIHRyYWNrIHRoZSBwb3NpdGlvblxuXG4gIGNvbnN0IGhhbmRsZU1vYmlsZUNoYXRCdG5DbGljayA9ICgpID0+IHtcbiAgICBpZiAoY2hhdENvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBpZiAoaXNBdFplcm8pIHtcbiAgICAgICAgY2hhdENvbnRhaW5lclJlZi5jdXJyZW50LnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgtMTAwJSlcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYXRDb250YWluZXJSZWYuY3VycmVudC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoMHB4KVwiO1xuICAgICAgfVxuICAgICAgc2V0SXNBdFplcm8oIWlzQXRaZXJvKTsgLy8gVG9nZ2xlIHRoZSBzdGF0ZVxuICAgIH1cbiAgfTtcblxuICAvLyBFZmZlY3QgdG8gaGFuZGxlIHZpZXdwb3J0IHJlc2l6ZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcbiAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSA5NTAgJiYgY2hhdENvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNoYXRDb250YWluZXJSZWYuY3VycmVudC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoMHB4KVwiO1xuICAgICAgICBzZXRJc0F0WmVybyhmYWxzZSk7IC8vIFJlc2V0IHRoZSBzdGF0ZVxuICAgICAgfSBlbHNlIGlmIChjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2hhdENvbnRhaW5lclJlZi5jdXJyZW50LnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgtMTAwJSlcIjtcbiAgICAgICAgc2V0SXNBdFplcm8odHJ1ZSk7IC8vIFJlc2V0IHRoZSBzdGF0ZVxuICAgICAgfVxuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVSZXNpemUpO1xuXG4gICAgLy8gQ2xlYW51cCBldmVudCBsaXN0ZW5lciBvbiBjb21wb25lbnQgdW5tb3VudFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVSZXNpemUpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh1c2VyTmFtZSAhPT0gbnVsbCkge1xuICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInVzZXJOYW1lXCIsIHVzZXJOYW1lKTtcbiAgICB9XG5cbiAgICBpZiAoc3BsaXRVc2VyTmFtZSAhPT0gXCJcIikge1xuICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInNwbGl0VXNlck5hbWVcIiwgc3BsaXRVc2VyTmFtZSk7XG4gICAgfVxuICB9LCBbdXNlck5hbWUsIHNwbGl0VXNlck5hbWVdKTtcblxuICBjb25zdCBbZWRpdFRpdGxlSWQsIHNldEVkaXRUaXRsZUlkXSA9IHVzZVN0YXRlPG51bGw+KG51bGwpO1xuICBjb25zdCBbZWRpdGVkVGl0bGUsIHNldEVkaXRlZFRpdGxlXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IFtlZGl0aW5nVGl0bGUsIHNldEVkaXRpbmdUaXRsZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFt0aXRsZVVwZGF0ZWQsIHNldFRpdGxlVXBkYXRlZF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7IC8vIE5ldyBzdGF0ZSBmb3IgdGl0bGUgdXBkYXRlc1xuXG4gIC8vRWRpdGluZyB0aGUgYWJpbGl0eSB0byBjaGFuZ2UgdGhlIGV4aXN0aW5nIHRpdGxlLlxuICBjb25zdCBoYW5kbGVUaXRsZUNsaWNrID0gKGNvbnZvSWQ6IHN0cmluZyB8IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGNvbnZlcnNhdGlvbiA9IGNvbnZlcnNhdGlvbnMuZmluZChcbiAgICAgIChjb252bykgPT4gKGNvbnZvIGFzIGFueSkuY29udmVyc2F0aW9uSWQgPT09IGNvbnZvSWRcbiAgICApO1xuXG4gICAgaWYgKGNvbnZlcnNhdGlvbikge1xuICAgICAgc2V0RWRpdFRpdGxlSWQoKGNvbnZlcnNhdGlvbiBhcyBhbnkpLmNvbnZlcnNhdGlvbklkKTtcbiAgICAgIHNldEVkaXRlZFRpdGxlKChjb252ZXJzYXRpb24gYXMgYW55KS50aXRsZSk7XG4gICAgICBzZXRFZGl0aW5nVGl0bGUodHJ1ZSBhcyBib29sZWFuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc29sZS5sb2coYENvbnZlcnNhdGlvbiB3aXRoIElEICR7Y29udm9JZH0gbm90IGZvdW5kYCk7XG4gICAgfVxuICB9O1xuICB1c2VFZmZlY3QoKCkgPT4ge30sIFtlZGl0VGl0bGVJZCwgZWRpdGVkVGl0bGVdKTtcblxuICBjb25zdCBoYW5kbGVUaXRsZUNoYW5nZSA9IChldmVudDogYW55KSA9PiB7XG4gICAgc2V0RWRpdGVkVGl0bGUoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgfTtcblxuICBhc3luYyBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb24oY29udmVyc2F0aW9uSWQ6IGFueSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpLyR7Y29udmVyc2F0aW9uSWR9YCk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBjb252ZXJzYXRpb25cIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRDb252ZXJzYXRpb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcbiAgICAgIC8vICAgXCJMb2dnaW5nIHRoZSBjb252ZXJhdGlvbnMgYmVmb3JlIGVycm9yd1wiLFxuICAgICAgLy8gICB1cGRhdGVkQ29udmVyc2F0aW9uXG4gICAgICAvLyApO1xuICAgICAgLy8gVXBkYXRlIGxvY2FsIHN0YXRlXG4gICAgICBzZXRDb252ZXJzYXRpb25zKChwcmV2Q29udmVyc2F0aW9ucykgPT4ge1xuICAgICAgICByZXR1cm4gcHJldkNvbnZlcnNhdGlvbnMubWFwKChjb252bykgPT5cbiAgICAgICAgICBjb252byA9PT0gY29udmVyc2F0aW9uSWRcbiAgICAgICAgICAgID8geyAuLi5jb252bywgdGl0bGU6IHVwZGF0ZWRDb252ZXJzYXRpb24udGl0bGUgfVxuICAgICAgICAgICAgOiBjb252b1xuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZSh1cGRhdGVkQ29udmVyc2F0aW9uLCBjb252ZXJzYXRpb25JZCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjb252ZXJzYXRpb246XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yOyAvLyBSZS10aHJvdyB0byBoYW5kbGUgaXQgaW4gdGhlIFVJIGxheWVyXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbklkOiBzdHJpbmcgfCBudW1iZXIpIHtcbiAgICBjb25zdCBjdXJyZW50Q29udmVyc2F0aW9ucyA9IGNvbnZlcnNhdGlvbnM7XG5cblxuICAgIGNvbnNvbGUubG9nKFwiQ29udmVyc2F0aW9uIElEXCIsIGNvbnZlcnNhdGlvbklkKTtcblxuICAgIC8vIE9wdGltaXN0aWNhbGx5IHJlbW92ZSB0aGUgY29udmVyc2F0aW9uIGZyb20gVUlcbiAgICBjb25zdCB1cGRhdGVkQ29udmVyc2F0aW9ucyA9IGN1cnJlbnRDb252ZXJzYXRpb25zLmZpbHRlcihcbiAgICAgIChjb252bykgPT4gKGNvbnZvIGFzIGFueSkuY29udmVyc2F0aW9uSWQgIT09IGNvbnZlcnNhdGlvbklkXG4gICAgKTtcblxuICAgIHNldENvbnZlcnNhdGlvbnModXBkYXRlZENvbnZlcnNhdGlvbnMpO1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXG4gICAgICBcImNvbnZlcnNhdGlvbnNcIixcbiAgICAgIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRDb252ZXJzYXRpb25zKVxuICAgICk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9kZWxldGVDb252ZXJzYXRpb25zL2AsIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgaWQ6IGNvbnZlcnNhdGlvbklkIH0pLFxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBkZWxldGUgdGhlIGNvbnZlcnNhdGlvblwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gRmlsdGVyIG91dCB0aGUgZGVsZXRlZCBjb252ZXJzYXRpb25cbiAgICAgIGNvbnN0IHVwZGF0ZWRDb252ZXJzYXRpb25zID0gY29udmVyc2F0aW9ucy5maWx0ZXIoXG4gICAgICAgIChjb252bykgPT4gKGNvbnZvIGFzIGFueSkuY29udmVyYXRvaW5JRCAhPT0gY29udmVyc2F0aW9uSWRcbiAgICAgICk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIkxvZ2dpbmcgb3V0IHRoZSBDb252ZXJzYXRpb24gRmlsdGVyXCIsIGNvbnZlcnNhdGlvbnMpO1xuXG4gICAgICAvLyBVcGRhdGUgc3RhdGUgYW5kIGxvY2FsIHN0b3JhZ2VcbiAgICAgIHNldENvbnZlcnNhdGlvbnModXBkYXRlZENvbnZlcnNhdGlvbnMpOyAvLyBVcGRhdGUgUmVhY3Qgc3RhdGVcbiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgIFwiY29udmVyc2F0aW9uc1wiLFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh1cGRhdGVkQ29udmVyc2F0aW9ucylcbiAgICAgICk7IC8vIFVwZGF0ZSBsb2NhbCBzdG9yYWdlXG5cbiAgXG5cbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGNvbnZlcnNhdGlvbnMgc3RhdGVcbiAgICAgICAgY29uc3QgdXBkYXRlZENvbnZlcnNhdGlvbnMgPSBjb252ZXJzYXRpb25zLmZpbHRlcihcbiAgICAgICAgICAoY29udm8pID0+IChjb252byBhcyBhbnkpLmNvbnZlcnNhdGlvbklkICE9PSBjb252ZXJzYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBzZXRDb252ZXJzYXRpb25zKHVwZGF0ZWRDb252ZXJzYXRpb25zKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHNlc3Npb24gc3RvcmFnZVxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAgIFwiY29udmVyc2F0aW9uc1wiLFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRDb252ZXJzYXRpb25zKVxuICAgICAgICApO1xuICAgICAgICByb3V0ZXIucHVzaChgL2FpL2NoYXRgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIGNvbnZlcnNhdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgYWxlcnQoXCJDb3VsZCBub3QgZGVsZXRlIHRoZSBjb252ZXJzYXRpb24uIFBsZWFzZSB0cnkgYWdhaW4uXCIpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxvY2FsU3RvcmFnZShcbiAgICB1cGRhdGVkQ29udmVyc2F0aW9uOiBhbnksXG4gICAgY29udmVyc2F0aW9uSWQ6IG51bWJlclxuICApIHtcbiAgICBjb25zdCBjYWNoZWRDb252ZXJzYXRpb25zID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImNvbnZlcnNhdGlvbnNcIik7XG5cbiAgICBpZiAoY2FjaGVkQ29udmVyc2F0aW9ucykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gUGFyc2UgdGhlIGNhY2hlZCBjb252ZXJzYXRpb25zXG4gICAgICAgIGNvbnN0IHBhcnNlZENvbnZlcnNhdGlvbnMgPSBKU09OLnBhcnNlKGNhY2hlZENvbnZlcnNhdGlvbnMpO1xuXG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHBhcnNlZENvbnZlcnNhdGlvbnMgaXMgYW4gYXJyYXlcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFyc2VkQ29udmVyc2F0aW9ucykpIHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkQ2FjaGUgPSBwYXJzZWRDb252ZXJzYXRpb25zLm1hcCgoY29udm8pID0+XG4gICAgICAgICAgICBjb252by5jb252ZXJzYXRpb25JZCA9PT0gY29udmVyc2F0aW9uSWRcbiAgICAgICAgICAgICAgPyB7IC4uLmNvbnZvLCB0aXRsZTogdXBkYXRlZENvbnZlcnNhdGlvbi50aXRsZSB9XG4gICAgICAgICAgICAgIDogY29udm9cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImNvbnZlcnNhdGlvbnNcIiwgSlNPTi5zdHJpbmdpZnkodXBkYXRlZENhY2hlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlBhcnNlZCBjYWNoZWQgY29udmVyc2F0aW9ucyBpcyBub3QgYW4gYXJyYXlcIik7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHBhcnNpbmcgY2FjaGVkIGNvbnZlcnNhdGlvbnM6XCIsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdFRpdGxlID0gYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IGZvcm0gc3VibWlzc2lvblxuICAgIGxldCB0aXRsZUNoYW5nZTogc3RyaW5nID0gXCJcIjtcblxuXG4gICAgY29uc29sZS5sb2coXCJFdmVudCBLZXlcIiwgZXZlbnQua2V5KTtcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgZm9ybSBzdWJtaXNzaW9uXG4gICAgICBjb25zdCBuZXdUaXRsZSA9IGVkaXRlZFRpdGxlOyAvLyBDYXB0dXJlIHRoZSB0aXRsZSBhdCB0aGUgdGltZSBvZiBzdWJtaXNzaW9uXG4gICAgICB0aXRsZUNoYW5nZSA9IGVkaXRUaXRsZUlkID8/IFwiXCI7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIk5ldyB0aXRsZSB0byBiZSBzZXQ6XCIsIG5ld1RpdGxlKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiTmV3IHRpdGxlIElkIGJlaW5nIGxvZ2dlZFwiLCBlZGl0VGl0bGVJZCk7XG5cbiAgICAgIGlmIChlZGl0VGl0bGVJZCAhPT0gbnVsbCAmJiBlZGl0VGl0bGVJZCAhPT0gXCJcIikge1xuICAgICAgICBjb25zdCB1cGRhdGVkQ29udmVyc2F0aW9ucyA9IGNvbnZlcnNhdGlvbnMubWFwKChjb252bykgPT5cbiAgICAgICAgICAoY29udm8gYXMgYW55KS5jb252ZXJzYXRpb25JZCA9PT0gZWRpdFRpdGxlSWRcbiAgICAgICAgICAgID8geyAuLi5jb252bywgdGl0bGU6IG5ld1RpdGxlIH1cbiAgICAgICAgICAgIDogY29udm9cbiAgICAgICAgKTtcbiAgICAgICAgc2V0Q29udmVyc2F0aW9ucyh1cGRhdGVkQ29udmVyc2F0aW9ucyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiVXBkYXRlZCBjb252ZXJzYXRpb25zOlwiLCB1cGRhdGVkQ29udmVyc2F0aW9ucyk7XG5cbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgICBcImNvbnZlcnNhdGlvbnNcIixcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeSh1cGRhdGVkQ29udmVyc2F0aW9ucylcbiAgICAgICAgKTtcblxuICAgICAgICBzZXRFZGl0VGl0bGVJZChudWxsKTsgLy8gRXhpdCBlZGl0IG1vZGVcbiAgICAgICAgc2V0RWRpdGVkVGl0bGUoXCJcIik7IC8vIENsZWFyIHRoZSBlZGl0ZWQgdGl0bGUgc3RhdGVcbiAgICAgICAgc2V0RWRpdGluZ1RpdGxlKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbG9jYWxDb252ZXJzYXRpb25JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudENvbnZlcnNhdGlvbklkXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiTG9jYWwgQ29udmVyc2F0aW9uIElEXCIsIGxvY2FsQ29udmVyc2F0aW9uSWQpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL3N1Ym1pdFRpdGxlL2AsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdGl0bGU6IGVkaXRlZFRpdGxlLCBpZDogbG9jYWxDb252ZXJzYXRpb25JZCB9KSwgLy8gU2VuZCBlZGl0ZWRUaXRsZSBkaXJlY3RseVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiQXJlIHlvdSBzZW5kaW5nIHRoZSBuZXcgVGl0bGVcIiwgZWRpdGVkVGl0bGUpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgLy8gYXdhaXQgZ2V0Q29udmVyc2F0aW9uKGVkaXRUaXRsZUlkKTtcbiAgICAgICAgc2V0RWRpdGluZ1RpdGxlKGZhbHNlKTtcbiAgICAgICAgc2V0VGl0bGVVcGRhdGVkKChwcmV2KSA9PiAhcHJldik7IC8vIFRvZ2dsZSB0aGUgdGl0bGVVcGRhdGVkIHN0YXRlXG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSB0aXRsZVwiKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHRpdGxlOlwiLCBlcnJvcik7XG5cbiAgICAgIC8vIElmIHRoZSB1cGRhdGUgZmFpbHMsIHJldmVydCB0aGUgY2hhbmdlIGluIHRoZSBVSSBhbmQgYWxlcnQgdGhlIHVzZXJcbiAgICAgIGNvbnN0IG9yaWdpbmFsQ29udmVyc2F0aW9ucyA9IGNvbnZlcnNhdGlvbnMubWFwKChjb252bykgPT5cbiAgICAgICAgY29udm8uY29udmVyc2F0aW9uSWQgPT09IGVkaXRUaXRsZUlkXG4gICAgICAgICAgPyB7IC4uLmNvbnZvLCB0aXRsZTogKGNvbnZvIGFzIGFueSkudGl0bGUgfVxuICAgICAgICAgIDogY29udm9cbiAgICAgICk7XG5cbiAgICAgIHNldENvbnZlcnNhdGlvbnMob3JpZ2luYWxDb252ZXJzYXRpb25zKTtcbiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgIFwiY29udmVyc2F0aW9uc1wiLFxuICAgICAgICBKU09OLnN0cmluZ2lmeShvcmlnaW5hbENvbnZlcnNhdGlvbnMpXG4gICAgICApO1xuXG4gICAgICBhbGVydChcIkZhaWxlZCB0byB1cGRhdGUgdGl0bGUsIHBsZWFzZSB0cnkgYWdhaW4uXCIpOyAvLyBJbmZvcm0gdGhlIHVzZXJcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2hhdERhc2hCb2FyZFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIC8vIENoZWNrIGZvciBzcGVjaWFsIGNvbW1hbmRzXG4gICAgY29uc3Qgc3BlY2lhbENvbW1hbmRzID0ge1xuICAgICAgJ2JyJzogJyRicicsXG4gICAgICAnZG93bic6ICckZG93bicsXG4gICAgICAnaGVscCc6ICckaGVscCcsXG4gICAgICAnbGlzdGJyJzogJyRsaXN0YnInLFxuICAgICAgJ25ldyc6ICckbmV3JyxcbiAgICAgICdwZGYnOiAnJHBkZicsXG4gICAgICAncmVtJzogJyRyZW0nLFxuICAgICAgJ3VzYWdlJzogJyR1c2FnZScsXG4gICAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGxvYWRQZGZJbWFnZXMgPSAoKSA9PiB7XG4gICAgICAvLyBBc3N1bWluZyB0aGUgcHVibGljIGZvbGRlciBpcyBhdCB0aGUgcm9vdCBvZiB5b3VyIHByb2plY3RcbiAgICAgIGNvbnN0IHBkZkltYWdlc0NvbnRleHQgPSByZXF1aXJlLmNvbnRleHQoXG4gICAgICAgIFwiL3B1YmxpYy9wZGZJbWFnZVwiLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgL1xcLihwbmd8anBlP2d8Z2lmKSQvaVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGltYWdlRmlsZXMgPSBwZGZJbWFnZXNDb250ZXh0XG4gICAgICAgIC5rZXlzKClcbiAgICAgICAgLm1hcCgoa2V5KSA9PiBgL3BkZkltYWdlJHtrZXkucmVwbGFjZShcIi5cIiwgXCJcIil9YCk7XG4gICAgICBzZXRQZGZJbWFnZXMoaW1hZ2VGaWxlcyk7XG4gICAgfTtcblxuICAgIGxvYWRQZGZJbWFnZXMoKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIChlOiBGb3JtRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZiAoIW1lc3NhZ2UudHJpbSgpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVtcHR5IG1lc3NhZ2UsIHJldHVybmluZ1wiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRNZXNzYWdlc0lzTG9hZGluZyh0cnVlKTtcblxuICAgIGNvbnN0IGNvbW1hbmQgPSBtZXNzYWdlLnRyaW0oKS5zcGxpdChcIiBcIilbMF0udG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwiL1wiLCBcIlwiKTtcblxuICAgIGNvbnNvbGUubG9nKFwiQ29tbWFuZFwiLCBjb21tYW5kKTtcblxuICAgIGlmIChjb21tYW5kID09PSBcIiRsaXN0YnJcIikge1xuICAgICAgc2V0UmVzcG9uc2VzKChwcmV2UmVzcG9uc2VzKSA9PiBbXG4gICAgICAgIC4uLnByZXZSZXNwb25zZXMsXG4gICAgICAgIHtcbiAgICAgICAgICBxdWVzdGlvbjogbWVzc2FnZSxcbiAgICAgICAgICByZXNwb25zZTogXCJIZXJlIGFyZSB5b3VyIFBERiBpbWFnZXM6XCIsXG4gICAgICAgICAgaW1hZ2VVcmw6IHBkZkltYWdlcywgLy8gQWRkIHRoZSBsb2FkZWQgUERGIGltYWdlc1xuICAgICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgIH0sXG4gICAgICBdKTtcbiAgICAgIHNldE1lc3NhZ2UoXCJcIik7IC8vIENsZWFyIHRoZSBtZXNzYWdlIGlucHV0XG4gICAgICBzZXRNZXNzYWdlc0lzTG9hZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm47IC8vIEV4aXQgdGhlIGZ1bmN0aW9uIGFmdGVyIGhhXG4gICAgfVxuXG4gICAgLy8gTmV3IGZ1bmN0aW9uYWxpdHkgdG8gaGFuZGxlbmRsZSAkYnIgPG51bT5cbiAgICBpZiAoY29tbWFuZC5zdGFydHNXaXRoKFwiJGJyXCIpKSB7XG5cbiAgICB9XG5cbiAgICBcblxuICAgIGlmIChjb21tYW5kID09PSBcIiRiclwiKSB7XG4gICAgICBcblxuICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChtZXNzYWdlLnNwbGl0KFwiIFwiKVsxXSwgMTApOyAvLyBHZXQgdGhlIG51bWJlciBhZnRlciAkYnJcbiAgICAgIGlmICghaXNOYU4oaW5kZXgpICYmIGluZGV4ID49IDAgJiYgaW5kZXggPCBwZGZJbWFnZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2VsZWN0ZWQgUERGIGltYWdlXCIsIGluZGV4LCBcIlBhdGg6XCIsIHBkZkltYWdlc1tpbmRleF0pO1xuICAgICAgICBcblxuICAgICAgICAvLyBMb2cgdGhlIHBhdGggdG8gdGhlIHNlbGVjdGVkIFBERiBpbWFnZVxuICAgICAgICBzZXRTZWxlY3RlZFBkZkltYWdlKHBkZkltYWdlc1tpbmRleF0pOyAvLyBTZXQgdGhlIHNlbGVjdGVkIFBERiBpbWFnZSBieSBpbmRleFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJJbnZhbGlkIGluZGV4IGZvciBQREYgc2VsZWN0aW9uXCIpO1xuICAgICAgfVxuICAgICAgc2V0TWVzc2FnZXNJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChjb21tYW5kID09PSBcIiRwZGZcIikge1xuXG4gICAgICBjb25zb2xlLmxvZyhcIlNlbGVjdGVkIFBERiBpbWFnZVwiLCBzZWxlY3RlZFBkZkltYWdlKTtcblxuICAgICAgdXBsb2FkSW1hZ2Uoc2VsZWN0ZWRQZGZJbWFnZSBhcyBzdHJpbmcsIG1lc3NhZ2UgYXMgc3RyaW5nKTtcbiAgICAgIHNldE1lc3NhZ2VzSXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmKGNvbW1hbmQgPT09IFwiJGhlbHBcIikge1xuICAgICAgY29uc3QgY29tbWFuZExpc3QgPSBPYmplY3Qua2V5cyhzcGVjaWFsQ29tbWFuZHMpLmpvaW4oXCIsIFwiKTsgLy8gQ3JlYXRlIGEgbGlzdCBvZiBjb21tYW5kc1xuICAgICAgc2V0UmVzcG9uc2VzKChwcmV2UmVzcG9uc2VzKSA9PiBbXG4gICAgICAgIC4uLnByZXZSZXNwb25zZXMsXG4gICAgICAgIHtcbiAgICAgICAgICBxdWVzdGlvbjogbWVzc2FnZSxcbiAgICAgICAgICByZXNwb25zZTogYEhlcmUgYXJlIHlvdXIgYXZhaWxhYmxlIGNvbW1hbmRzOiAkJHtjb21tYW5kTGlzdH1gLCAvLyBVcGRhdGUgcmVzcG9uc2UgdG8gc2hvdyBjb21tYW5kc1xuICAgICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgIH0sXG4gICAgICBdKTtcbiAgICAgIHNldE1lc3NhZ2VzSXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiB1cGxvYWRJbWFnZShpbWFnZVBhdGg6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAvLyBGZXRjaCB0aGUgaW1hZ2UgYXMgYSBCbG9iXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGltYWdlUGF0aCk7XG4gICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpOyAvLyBDb252ZXJ0IHRoZSByZXNwb25zZSB0byBhIEJsb2JcbiAgICAgIGNvbnN0IGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIFwiaW1hZ2UucG5nXCIsIHsgdHlwZTogYmxvYi50eXBlIH0pOyAvLyBDcmVhdGUgYSBGaWxlIG9iamVjdFxuICAgIFxuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpOyAvLyBDaGFuZ2UgJ2ZpbGVzJyB0byAnZmlsZSdcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnbWVzc2FnZScsIG1lc3NhZ2UpOyAvLyBBZGQgdGhlIG1lc3NhZ2UgdG8gdGhlIGZvcm0gZGF0YVxuXG4gICAgICBmZXRjaCgnaHR0cDovLzEyNy4wLjAuMTo1MDAwL3VwbG9hZCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICBcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSByZXNwb25zZSBpcyBhIFBERlxuICAgICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIik7XG4gICAgICAgICAgaWYgKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlLmluY2x1ZGVzKFwiYXBwbGljYXRpb24vcGRmXCIpKSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgUERGIGRvd25sb2FkXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuYmxvYigpLnRoZW4oYmxvYiA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgICBhLmhyZWYgPSB1cmw7XG4gICAgICAgICAgICAgIGEuZG93bmxvYWQgPSAnb3V0cHV0LnBkZic7IC8vIFNwZWNpZnkgdGhlIGRvd25sb2FkIG5hbWVcbiAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcbiAgICAgICAgICAgICAgYS5jbGljaygpO1xuICAgICAgICAgICAgICBhLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBKU09OIHJlc3BvbnNlXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcmsgcmVzcG9uc2Ugd2FzIG5vdCBvay4nKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnVXBsb2FkIHN1Y2Nlc3NmdWw6JywgZGF0YSk7XG4gICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwbG9hZGluZyBpbWFnZTonLCBlcnJvcik7IFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoY29tbWFuZCA9PT0gXCIkcmVtXCIpIHtcbiAgICAgIGF3YWl0IGhhbmRsZVVwbG9hZEZpbGUoZSk7IC8vIENhbGwgaGFuZGxlVXBsb2FkRmlsZSBkaXJlY3RseVxuICAgICAgY29uc29sZS5sb2coXCJSZW1vdmUgY29tbWFuZFwiLCBtZXNzYWdlKTtcbiAgICAgIHNldE1lc3NhZ2UoXCJcIik7XG4gICAgICByZXR1cm5cbiAgICB9XG5cblxuXG5cblxuXG5cbiAgICBcbiAgICBcblxuICAgIC8vIENoZWNrIGZvciB0aGUgL3Vwc2NhbGUgY29tbWFuZFxuICAgIGlmIChjb21tYW5kID09PSBcInVwc2NhbGVcIikge1xuICAgICAgYXdhaXQgaGFuZGxlVXBsb2FkRmlsZShlKTsgLy8gQ2FsbCBoYW5kbGVVcGxvYWRGaWxlIGRpcmVjdGx5XG4gICAgICByZXR1cm47IC8vIEV4aXQgdGhlIGZ1bmN0aW9uIGFmdGVyIGhhbmRsaW5nIHRoZSB1cHNjYWxlIGNvbW1hbmRcbiAgICB9XG5cbiAgICBpZiAoY29tbWFuZCBpbiBzcGVjaWFsQ29tbWFuZHMpIHtcbiAgICAgIC8vIEhhbmRsZSBzcGVjaWFsIGNvbW1hbmRcbiAgICAgIGF3YWl0IGhhbmRsZVNwZWNpYWxDb21tYW5kKGNvbW1hbmQsIG1lc3NhZ2UsIGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZWd1bGFyIGNoYXQgZmxvd1xuICAgICAgaWYgKGlzQ2xpZW50KCkpIHtcbiAgICAgICAgaWYgKCFjdXJyZW50Q29udmVyc2F0aW9uSWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkNyZWF0aW5nIG5ldyBjb252ZXJzYXRpb25cIik7XG4gICAgICAgICAgYXdhaXQgY3JlYXRlQ29udmVyc2F0aW9uKCkudGhlbigoY29udm9JRCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJOZXcgY29udmVyc2F0aW9uIGNyZWF0ZWQgd2l0aCBJRDpcIiwgY29udm9JRCk7XG4gICAgICAgICAgICBzZXRDdXJyZW50Q29udmVyc2F0aW9uSWQoY29udm9JRCk7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudENvbnZlcnNhdGlvbklkXCIsIGNvbnZvSUQpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50Q29udmVyc2F0aW9uSWRcIiwgY29udm9JRCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cGRhdGVkQ29udmVyc2F0aW9uSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcbiAgICAgICAgICBcImN1cnJlbnRDb252ZXJzYXRpb25JZFwiXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gMS4gU2V0IHVwIHRoZSBuZXcgcmVzcG9uc2Ugd2l0aG91dCBhbnkgYm90IHJlc3BvbnNlIHlldC5cbiAgICAgICAgY29uc3QgbmV3UmVzcG9uc2UgPSB7XG4gICAgICAgICAgcXVlc3Rpb246IG1lc3NhZ2UsXG4gICAgICAgICAgcmVzcG9uc2U6IFwiXCIsXG4gICAgICAgICAgaWQ6IFwidGVtcFwiLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFVzZSBmdW5jdGlvbmFsIHVwZGF0ZSBmb3Igc3RhdGVcbiAgICAgICAgc2V0UmVzcG9uc2VzKChyZXNwb25zZXMpID0+IFsuLi5yZXNwb25zZXMsIG5ld1Jlc3BvbnNlXSk7XG5cbiAgICAgICAgc2V0TWVzc2FnZShcIlwiKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcIkNoYXQgaXMgc3RpbGwgYmllbmcgY2FsbGVkXCIsIHJlc3BvbnNlcyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyAyLiBGZXRjaCBib3QgcmVwbHkgZnJvbSB0aGUgQVBJXG4gICAgICAgICAgY29uc3QgYm90UmVwbHkgPSBhd2FpdCBmZXRjaChjaGF0Qm90VXJsLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICB9LFxuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICB1c2VySWQ6IHNlc3Npb24/LnVzZXIuaWQsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBjdXJyZW50Q29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KS50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpO1xuICAgICAgICAgIHNldFJlc3BvbnNlTG9hZGluZyhmYWxzZSk7XG5cbiAgICAgICAgICAvLyAzLiBVcGRhdGUgdGhlIHJlc3BvbnNlcyBhcnJheSB3aXRoIHRoZSBib3QncyByZXBseVxuICAgICAgICAgIHNldFJlc3BvbnNlcygocHJldlJlc3BvbnNlcykgPT5cbiAgICAgICAgICAgIHByZXZSZXNwb25zZXMubWFwKChyZXNwKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChyZXNwLnF1ZXN0aW9uID09PSBtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucmVzcCwgcmVzcG9uc2U6IGJvdFJlcGx5LnJlc3BvbnNlIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3A7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkxvZ2dpbmcgdGhlIG5ldyBSZXNwb25zZXNcIiwgcmVzcG9uc2VzKTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9nZ2luZyB0aGUgYm90IHJlcGx5XCIsIGJvdFJlcGx5KTtcbiAgICAgICAgICBhd2FpdCBmZXRjaChcIi9hcGkvbWVzc2FnZXNcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICB1c2VySWQ6IHNlc3Npb24/LnVzZXIuaWQsIC8vIEVuc3VyZSB5b3UgaGF2ZSB0aGUgY3VycmVudCB1c2VyJ3MgSURcbiAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IHVwZGF0ZWRDb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgICAgdXNlckNvbnRlbnQ6IG1lc3NhZ2UsIC8vIFVzZXIncyBtZXNzYWdlXG4gICAgICAgICAgICAgIGJvdFJlc3BvbnNlOiBib3RSZXBseS5yZXNwb25zZSwgLy8gQm90J3MgcmVzcG9uc2UsIG9idGFpbmVkIHNlcGFyYXRlbHlcbiAgICAgICAgICAgICAgaW1hZ2VVcmw6IFwiXCIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vQWRkIHRoZSBjb252ZXJzYXRpb25zIGFycmF3eSBvciB1cGRhdGVcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaGFuZGxpbmcgc3VibWlzc2lvbjpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IFssIHNldGZpbGVVUkxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzZWxlY3RlZEZpbGUsIHNldHNlbGVjdGVkRmlsZV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3VwbG9hZGVkRmlsZSwgc2V0dXBsb2FkZWRGaWxlXSA9IHVzZVN0YXRlKHt9KTtcbiAgY29uc3QgW2lzVXBsb2FkaW5nLCBzZXRpc1VwbG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0ZpbGVVcGxvYWRlZCwgc2V0aXNGaWxlVXBsb2FkZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdXBsb2FkUHJvZ3Jlc3MsIHNldHVwbG9hZFByb2dyZXNzXSA9IHVzZVN0YXRlKDApO1xuICBsZXQgdXBsb2FkSW5wdXQgPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgXG5cbiAgLy8gVXBkYXRlIGhhbmRsZURyb3AgdG8gd29yayBsaWtlIGhhbmRsZVNlbGVjdEZpbGVcbiAgY29uc3QgaGFuZGxlU2VsZWN0RmlsZSA9IChlKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ZWRGaWxlTGlzdCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZS50YXJnZXQuZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNlbGVjdGVkRmlsZUxpc3QucHVzaChlLnRhcmdldC5maWxlcy5pdGVtKGkpKTtcbiAgICB9XG4gICAgc2V0c2VsZWN0ZWRGaWxlKHNlbGVjdGVkRmlsZUxpc3QpO1xuICB9O1xuXG4gIC8vIFVwbG9hZCBmaWxlIHRvIHNlcnZlclxuICBjb25zdCBoYW5kbGVVcGxvYWRGaWxlID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBzZXRpc1VwbG9hZGluZyh0cnVlKTtcbiAgICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgY29uc29sZS5sb2coXCJUSGUgdXBsb2FkIGlucHV0XCIsIHVwbG9hZElucHV0LmZpbGVzKTtcblxuICAgIC8vIEFwcGVuZCB0aGUgZmlsZSB0byB0aGUgcmVxdWVzdCBib2R5XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1cGxvYWRJbnB1dC5maWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgZGF0YS5hcHBlbmQoXCJmaWxlXCIsIHVwbG9hZElucHV0LmZpbGVzW2ldLCB1cGxvYWRJbnB1dC5maWxlc1tpXS5uYW1lKTtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdSZXNwb25zZSA9IHtcbiAgICAgIHF1ZXN0aW9uOiBtZXNzYWdlLFxuICAgICAgcmVzcG9uc2U6IFwiXCIsXG4gICAgICBpZDogXCJ0ZW1wXCIsXG4gICAgfTtcblxuICAgIHNldFJlc3BvbnNlcygocmVzcG9uc2VzKSA9PiBbLi4ucmVzcG9uc2VzLCBuZXdSZXNwb25zZV0pO1xuXG4gICAgc2V0TWVzc2FnZShcIlwiKTtcblxuICAgIGNvbnNvbGUubG9nKFwiTE9nZ2luIGhlIGRhdGFcIiwgZGF0YSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgb25VcGxvYWRQcm9ncmVzczogKHByb2dyZXNzRXZlbnQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IGxvYWRlZCwgdG90YWwgfSA9IHByb2dyZXNzRXZlbnQ7XG4gICAgICAgICAgc2V0dXBsb2FkUHJvZ3Jlc3MoTWF0aC5yb3VuZCgobG9hZGVkIC8gdG90YWwpICogMTAwKSk7XG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KFxuICAgICAgICBcImh0dHA6Ly8xMjcuMC4wLjE6NTAwMC9wcm9jZXNzX2ltYWdlXCIsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGNvbmZpZ1xuICAgICAgKTtcbiAgICAgIGNvbnN0IGJvZHkgPSByZXNwb25zZS5kYXRhO1xuXG4gICAgICBjb25zb2xlLmxvZyhcIkxvZ2dpbmcgdGhlIHJlc3BvbnNlXCIsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgc2V0UmVzcG9uc2VzKChwcmV2UmVzcG9uc2VzKSA9PlxuICAgICAgICBwcmV2UmVzcG9uc2VzLm1hcCgocmVzcCkgPT4ge1xuICAgICAgICAgIGlmIChyZXNwLnF1ZXN0aW9uID09PSBtZXNzYWdlKSB7XG4gICAgICAgICAgICAvLyBTZXQgaW1hZ2VVcmwgZGlyZWN0bHkgaW5zdGVhZCBvZiBhbiBhcnJheVxuICAgICAgICAgICAgY29uc3QgbmV3SW1hZ2VVcmwgPSByZXNwb25zZS5kYXRhLmltYWdlX3VybC5zdGFydHNXaXRoKCdodHRwJylcbiAgICAgICAgICAgICAgPyByZXNwb25zZS5kYXRhLmltYWdlX3VybCAvLyBVc2UgdGhlIGV4aXN0aW5nIFVSTCBpZiBpdCBhbHJlYWR5IGhhcyB0aGUgcHJvdG9jb2xcbiAgICAgICAgICAgICAgOiBgaHR0cDovLzEyNy4wLjAuMTo1MDAwJHtyZXNwb25zZS5kYXRhLmltYWdlX3VybH1gOyAvLyBQcmVwZW5kIHRoZSBiYXNlIFVSTCBpZiBub3RcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLnJlc3AsXG4gICAgICAgICAgICAgIGltYWdlVXJsOiBuZXdJbWFnZVVybCwgLy8gU2V0IHRoZSBuZXcgVVJMIGRpcmVjdGx5XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzcDtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhcIkxvZ2dpbmcgdGhlIHJlc3BvbnNlc1wiLCByZXNwb25zZXMpO1xuXG4gICAgICBjb25zdCB1cGRhdGVkQ29udmVyc2F0aW9uSWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFxuICAgICAgICBcImN1cnJlbnRDb252ZXJzYXRpb25JZFwiXG4gICAgICApO1xuXG4gICAgICBjb25zb2xlLmxvZyhcIkxvZ2dpbmcgdGhlIHJlc3BvbnNlIGRhdGFcIiwgcmVzcG9uc2UuZGF0YS5yZXNwb25zZXMpO1xuXG4gICAgICBhd2FpdCBmZXRjaChcIi9hcGkvbWVzc2FnZXNcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB1c2VySWQ6IHNlc3Npb24/LnVzZXIuaWQsIC8vIEVuc3VyZSB5b3UgaGF2ZSB0aGUgY3VycmVudCB1c2VyJ3MgSURcbiAgICAgICAgICBjb252ZXJzYXRpb25JZDogdXBkYXRlZENvbnZlcnNhdGlvbklkLFxuICAgICAgICAgIHVzZXJDb250ZW50OiBtZXNzYWdlLCAvLyBVc2VyJ3MgbWVzc2FnZVxuICAgICAgICAgIGltYWdlVXJsOiBgaHR0cDovLzEyNy4wLjAuMTo1MDAwJHtyZXNwb25zZS5kYXRhLmltYWdlX3VybH1gLCAvLyBJbWFnZSBVUkwgZnJvbSB0aGUgYm90XG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiUmV0dXJuaW5nIHRoZSBib2R5XCIsIGJvZHkpO1xuICAgICAgc2V0ZmlsZVVSTChgJHtjaGF0Qm90VXJsfS8ke2JvZHkuZmlsZW5hbWV9YCk7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgc2V0aXNGaWxlVXBsb2FkZWQodHJ1ZSk7IC8vIGZsYWcgdG8gc2hvdyB0aGUgdXBsb2FkZWQgZmlsZVxuICAgICAgICBzZXRpc1VwbG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHNldHVwbG9hZGVkRmlsZShzZWxlY3RlZEZpbGUpOyAvLyBzZXQgdGhlIHVwbG9hZGVkIGZpbGUgdG8gc2hvdyB0aGUgbmFtZVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHNldGlzVXBsb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZVNwZWNpYWxDb21tYW5kID0gYXN5bmMgKFxuICAgIGNvbW1hbmQ6IHN0cmluZyxcbiAgICBmdWxsTWVzc2FnZTogc3RyaW5nLFxuICAgIGU6IEZvcm1FdmVudFxuICApID0+IHtcbiAgICBjb25zdCBiYXNlVXJsID0gXCJodHRwOi8vMTI3LjAuMC4xOjUwMDBcIjtcbiAgICBsZXQgY29tbWFuZEVuZHBvaW50O1xuICAgIGxldCByZXF1ZXN0Qm9keTtcblxuICAgIGlmIChjb21tYW5kID09PSBcInVwc2NhbGVcIikge1xuICAgICAgY29uc29sZS5sb2coXCJVcHNjYWxlIENvbW1hbmRcIiwgZnVsbE1lc3NhZ2UpO1xuICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gXCJnZW5lcmF0ZVwiKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkdlbmVyYXRlIENvbW1hbmRcIiwgZnVsbE1lc3NhZ2UpO1xuICAgICAgY29uc29sZS5sb2coXCJVc2VyIElEOlwiLCBzZXNzaW9uPy51c2VyLmlkKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcIkNvbnRlbnQ6XCIsXG4gICAgICAgIGZ1bGxNZXNzYWdlLnN1YnN0cmluZyhmdWxsTWVzc2FnZS5pbmRleE9mKFwiIFwiKSArIDEpXG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coXCJMb2dvIEltYWdlOlwiLCBzZWxlY3RlZEZpbGUgPyBzZWxlY3RlZEZpbGVbMF0ubmFtZSA6IG51bGwpO1xuICAgICAgY29uc29sZS5sb2coXCJCYWNrZ3JvdW5kIEltYWdlOlwiLCBcIlwiKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcIkZpbGVuYW1lOlwiLFxuICAgICAgICBgdXNlcl9yZXBvcnRfJHtcbiAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWy06XS9nLCBcIlwiKS5zcGxpdChcIi5cIilbMF1cbiAgICAgICAgfS5wZGZgXG4gICAgICApO1xuXG4gICAgICBjb21tYW5kRW5kcG9pbnQgPSBnZW5lcmF0ZVBkZlVybDtcbiAgICAgIHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICB1c2VySWQ6IHNlc3Npb24/LnVzZXIuaWQsXG4gICAgICAgIGNvbnRlbnQ6IGZ1bGxNZXNzYWdlLnN1YnN0cmluZyhmdWxsTWVzc2FnZS5pbmRleE9mKFwiIFwiKSArIDEpLFxuICAgICAgICBsb2dvX2ltYWdlOiBzZWxlY3RlZEZpbGUgPyBzZWxlY3RlZEZpbGUubmFtZSA6IG51bGwsXG4gICAgICAgIGJhY2tncm91bmRfaW1hZ2U6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBgdXNlcl9yZXBvcnRfJHtcbiAgICAgICAgICBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWy06XS9nLCBcIlwiKS5zcGxpdChcIi5cIilbMF1cbiAgICAgICAgfS5wZGZgLFxuICAgICAgICBjb252ZXJzYXRpb25JZDogY3VycmVudENvbnZlcnNhdGlvbklkLFxuICAgICAgfTtcbiAgICAgIGNvbnNvbGUubG9nKFwiTG9nZ2luIHRoZSByZXF1ZXN0IGJvZHlcIiwgcmVxdWVzdEJvZHkpO1xuICAgICAgY29uc29sZS5sb2coXCJSZXF1ZXN0IEJvZHk6XCIsIEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5LCBudWxsLCAyKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbW1hbmRFbmRwb2ludCA9IGAke2Jhc2VVcmx9JHtcbiAgICAgICAgc3BlY2lhbENvbW1hbmRzW2NvbW1hbmQgYXMga2V5b2YgdHlwZW9mIHNwZWNpYWxDb21tYW5kc11cbiAgICAgIH1gO1xuICAgICAgcmVxdWVzdEJvZHkgPSB7XG4gICAgICAgIHVzZXJJZDogc2Vzc2lvbj8udXNlci5pZCxcbiAgICAgICAgbWVzc2FnZTogZnVsbE1lc3NhZ2UsXG4gICAgICAgIGNvbnZlcnNhdGlvbklkOiBjdXJyZW50Q29udmVyc2F0aW9uSWQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwiQ29tbWFuZCBFbmRwb2ludDpcIiwgY29tbWFuZEVuZHBvaW50KTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGNvbW1hbmRFbmRwb2ludCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBlcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbW1hbmQgPT09IFwiZ2VuZXJhdGVcIikge1xuICAgICAgICAvLyBIYW5kbGUgUERGIHJlc3BvbnNlXG4gICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgIGEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICBhLmhyZWYgPSB1cmw7XG4gICAgICAgIGEuZG93bmxvYWQgPSByZXF1ZXN0Qm9keS5maWxlbmFtZSBhcyBzdHJpbmc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XG4gICAgICAgIGEuY2xpY2soKTtcbiAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcblxuICAgICAgICAvLyBVcGRhdGUgVUkgdG8gaW5kaWNhdGUgc3VjY2Vzc2Z1bCBQREYgZ2VuZXJhdGlvblxuICAgICAgICBzZXRSZXNwb25zZXMoKHByZXZSZXNwb25zZXMpID0+IFtcbiAgICAgICAgICAuLi5wcmV2UmVzcG9uc2VzLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHF1ZXN0aW9uOiBmdWxsTWVzc2FnZSxcbiAgICAgICAgICAgIHJlc3BvbnNlOiBcIlBERiBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5LiBDaGVjayB5b3VyIGRvd25sb2Fkcy5cIixcbiAgICAgICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgSlNPTiByZXNwb25zZSBmb3Igb3RoZXIgY29tbWFuZHNcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgY29uc29sZS5sb2coYENvbW1hbmQgJHtjb21tYW5kfSByZXNwb25zZTpgLCBkYXRhKTtcblxuICAgICAgICAvLyBVcGRhdGUgVUkgd2l0aCBjb21tYW5kIHJlc3BvbnNlXG4gICAgICAgIHNldFJlc3BvbnNlcygocHJldlJlc3BvbnNlcykgPT4gW1xuICAgICAgICAgIC4uLnByZXZSZXNwb25zZXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgcXVlc3Rpb246IGZ1bGxNZXNzYWdlLFxuICAgICAgICAgICAgcmVzcG9uc2U6IGRhdGEucmVzcG9uc2UsXG4gICAgICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBleGVjdXRpbmcgY29tbWFuZCAke2NvbW1hbmR9OmAsIGVycm9yKTtcbiAgICAgIC8vIFVwZGF0ZSBVSSB3aXRoIGVycm9yIG1lc3NhZ2VcbiAgICAgIHNldFJlc3BvbnNlcygocHJldlJlc3BvbnNlcykgPT4gW1xuICAgICAgICAuLi5wcmV2UmVzcG9uc2VzLFxuICAgICAgICB7XG4gICAgICAgICAgcXVlc3Rpb246IGZ1bGxNZXNzYWdlLFxuICAgICAgICAgIHJlc3BvbnNlOiBgRXJyb3IgZXhlY3V0aW5nIGNvbW1hbmQ6ICR7XG4gICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiXG4gICAgICAgICAgfWAsXG4gICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuICAgICAgc2V0TWVzc2FnZXNJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRNZXNzYWdlc0lzTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUNvbnZlcnNhdGlvbkNsaWNrID0gKGNvbnZvSWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHRhcmdldFBhdGggPSBgL2FpL2NoYXQvJHtzZXNzaW9uPy51c2VyLmlkfS8ke2NvbnZvSWR9YDtcblxuICAgIHJvdXRlci5wdXNoKHRhcmdldFBhdGgsIHVuZGVmaW5lZCk7XG5cbiAgICAvL1N0b3JlIHRoZSBDdXJyZW50IGNvbnZlcmF0b2luSUQgaW4gbG9jYWwgdG8gcGVyc2l0IG9uIGNoYW5pbmcgdGhlIG5hdmlnYXRpb25cblxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudENvbnZlcnNhdGlvbklkXCIsIGNvbnZvSWQpO1xuICAgIC8vIGNvbnNvbGUubG9nKFxuICAgIC8vICAgXCJMb2dnaW5nIHRoZSBjdXJyZW50IGNvbnZlcnNhdGlvbiBJRFwiLFxuICAgIC8vICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50Q29udmVyc2F0aW9uSWRcIilcbiAgICAvLyApO1xuXG4gICAgY29uc3QgbG9jYWxTdG9yYWdlQ29udm9JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudENvbnZlcnNhdGlvbklkXCIpO1xuICAgIHNldEN1cnJlbnRDb252ZXJzYXRpb25JZChjb252b0lkKTtcbiAgfTtcblxuICAvL0dldCB0aGUgZnVsbCBNZXNzYWdlIENvbnZlcnNhdGlvbi5cblxuICBjb25zdCBjbGVhclN0b3JhZ2UgPSAoKSA9PiB7XG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShcImluaXRpYWxNZXNzYWdlXCIpO1xuICB9O1xuXG4gIC8vQW5vdGhlciBIb29rIENoZWNrIGZvciB0aGUgbG9jYWwgc3RvcmFnZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjdXJyZW50Q29udmVyc2F0aW9uSWQpIHtcbiAgICAgIGhhbmRsZUNvbnZlcnNhdGlvbkNsaWNrKGN1cnJlbnRDb252ZXJzYXRpb25JZCBhcyBzdHJpbmcpO1xuICAgIH1cbiAgICBjbGVhclN0b3JhZ2UoKTtcbiAgfSwgW2N1cnJlbnRDb252ZXJzYXRpb25JZF0pOyAvLyBEZXBlbmRlbmN5IGFycmF5IGluY2x1ZGVzIHN0YXRlIHRoYXQgdHJpZ2dlcnMgdGhpcyBlZmZlY3RcblxuICB1c2VFZmZlY3QoKCkgPT4ge30sIFtpc0xvYWRpbmddKTtcblxuICAvL0NoZWNraW5nIGlmIENoYXQgY29udmVyc2F0aW9ucyBpcyBsb2FkaW5nXG4gIHVzZUVmZmVjdCgoKSA9PiB7fSwgW21lc3NhZ2VzSXNMb2FkaW5nXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7fSwgW2lzUmVwb25zZUxvYWRpbmddKTtcblxuICAvL0ZldGNoIE1lc3NhZ2UgZm9yIHRoaXMgY29udmVyYXRpb25zXG4gIGNvbnN0IG1lc3NhZ2VzUmVmQ291bnRlciA9IHVzZVJlZigwKTtcbiAgdXNlRWZmZWN0KCgpID0+IHt9LCBbbWVzc2FnZXNSZWZDb3VudGVyXSk7XG4gIGNvbnN0IGZldGNoTWVzc2FnZXNGb3JDb252ZXJzYXRpb24gPSBhc3luYyAoY29udmVyc2F0aW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIG1lc3NhZ2VzUmVmQ291bnRlci5jdXJyZW50ICs9IDE7XG4gICAgaWYgKG1lc3NhZ2VzUmVmQ291bnRlci5jdXJyZW50ID4gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghc2Vzc2lvbiB8fCAhc2Vzc2lvbi51c2VyIHx8ICFzZXNzaW9uLnVzZXIuaWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyB1c2VyIHNlc3Npb24gYXZhaWxhYmxlXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRNZXNzYWdlc0lzTG9hZGluZyh0cnVlKTtcblxuICAgIGNvbnNvbGUubG9nKFwiRmV0Y2hpbmcgbWVzc2FnZXMgZm9yIGNvbnZlcnNhdGlvbjpcIiwgY29udmVyc2F0aW9uSWQpO1xuXG4gICAgaWYgKCFjb252ZXJzYXRpb25JZCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIm5vIGNvbnZlcnNhdG9pbiBJRFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgICBgL2FwaS9zdG9yZWRNZXNzYWdlcz9hdXRob3JJZD0ke3Nlc3Npb24/LnVzZXIuaWR9JmNvbnZlcnNhdGlvbklkPSR7Y29udmVyc2F0aW9uSWR9YFxuICAgICAgICApO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIG1lc3NhZ2VzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQWRkIHRoZSBJRFNcIixtZXNzYWdlcy5tYXAobXNncyA9PiBtc2dzLmlkKSlcblxuICAgICAgICAvLyBNYXAgQVBJIHJlc3BvbnNlIHRvIGV4cGVjdGVkIGZvcm1hdCBpbiBzdGF0ZVxuICAgICAgICAvL05hbWluZyBjb252ZW50aW9ucyBtYXR0ZXJcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1zZzogTWVzc2FnZSkgPT4gKHtcbiAgICAgICAgICBxdWVzdGlvbjogbXNnLnVzZXJDb250ZW50LFxuICAgICAgICAgIHJlc3BvbnNlOiBtc2cuYm90UmVzcG9uc2UsXG4gICAgICAgICAgaW1hZ2VVcmw6IG1zZy5pbWFnZVVybCxcbiAgICAgICAgICBpZDogbXNnLmlkLFxuICAgICAgICB9KSk7XG5cbiAgICAgICAgc2V0UmVzcG9uc2VzKFtdKTtcblxuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBzZXRSZXNwb25zZXMoZm9ybWF0dGVkTWVzc2FnZXMpO1xuICAgICAgICB9XG4gICAgICAgIHNldE1lc3NhZ2VzSXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHNldE1lc3NhZ2VzSXNMb2FkaW5nKHRydWUpO1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgbWVzc2FnZXM6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHt9LCBbcmVzcG9uc2VzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRSZXNwb25zZXMoW10pOyAvLyBDbGVhciBwcmV2aW91cyBtZXNzYWdlc1xuXG4gICAgaWYgKHN0YXR1cyA9PT0gXCJhdXRoZW50aWNhdGVkXCIgJiYgc2Vzc2lvbikge1xuICAgICAgLy8gRmV0Y2ggbWVzc2FnZXMgZm9yIHRoZSBjdXJyZW50IGNvbnZlcnNhdGlvbiBpZiBuZWVkZWRcbiAgICAgIGlmIChjdXJyZW50Q29udmVyc2F0aW9uSWQgPT09IG51bGwpIHtcbiAgICAgICAgZmV0Y2hNZXNzYWdlc0ZvckNvbnZlcnNhdGlvbihcbiAgICAgICAgICAoY3VycmVudENvbnZlcnNhdGlvbklkIGFzIGFueSkgfHwgbG9jYWxTdG9yYWdlQ29udm9JZFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJGZWNoIGlzIGRvaW5nIGdvb2RcIiwgY3VycmVudENvbnZlcnNhdGlvbklkKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjdXJyZW50Q29udmVyc2F0aW9uSWRdKTtcblxuICBpZiAoIWNvbnZlcnNhdGlvbnMpIHtcbiAgICByZXR1cm4gPHA+Tm8gY29udmVyc2F0aW9uIGZvdW5kLjwvcD47XG4gIH1cblxuICBjb25zdCBbY2hhdENvbnRhaW5lclNob3duLCBzZXRDaGF0Q29udGFpbmVyU2hvd25dID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCBjaGF0Q29udGFpbmVyVG9nZ2xlID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiSVMgdGhpcyBiZWluZyBjbGlja2VkPz8/IFNob3dvbiB5ZXMgb3Igbm9cIik7XG4gICAgc2V0Q2hhdENvbnRhaW5lclNob3duKCFjaGF0Q29udGFpbmVyU2hvd24pO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJSZXNwb25zZXNcIiwgc2VsZWN0ZWRGaWxlKTtcbiAgfSwgW3NlbGVjdGVkRmlsZV0pO1xuXG4gIC8vRnVuY3Rpb24gdGFrZXMgeW91IHRvIHRoZSBib3R0b20gb2YgdGhlIGRpdiBieSBjbGlja2luZyB0aGUgZmxvYXRpbmcgYnV0dG9uLlxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjaGF0RGFzaGJvYXJkIHRleHQtd2hpdGVcIj5cbiAgICAgIHsvKiBDaGF0IENvbnRhaW5lciBDb21wb25ldCAgKi99XG5cbiAgICAgIDxDaGF0Q29udGFpbmVyXG4gICAgICAgIHNldENvbnZlcnNhdGlvbnM9e3NldENvbnZlcnNhdGlvbnN9XG4gICAgICAgIGNvbnZlcnNhdGlvbnM9e2NvbnZlcnNhdGlvbnN9XG4gICAgICAgIGN1cnJlbnRDb252ZXJzYXRpb25JZD17Y3VycmVudENvbnZlcnNhdGlvbklkfVxuICAgICAgICBzcGxpdFVzZXJOYW1lPXtzcGxpdFVzZXJOYW1lfVxuICAgICAgICB1c2VyTmFtZT17dXNlck5hbWUgfHwgXCJcIn1cbiAgICAgICAgZW1haWw9e2VtYWlsIHx8IFwiXCJ9XG4gICAgICAgIG9uQ29udmVyc2F0aW9uQ2xpY2s9e2hhbmRsZUNvbnZlcnNhdGlvbkNsaWNrfVxuICAgICAgICBvbkRlbGV0ZUNvbnZvPXtkZWxldGVDb252ZXJzYXRpb259XG4gICAgICAgIG9uQ2hhbmdlQ29udm9UaXRsZT17aGFuZGxlU3VibWl0VGl0bGV9XG4gICAgICAgIGhhbmRsZVRpdGxlQ2xpY2s9e2hhbmRsZVRpdGxlQ2xpY2t9XG4gICAgICAgIGVkaXRUaXRsZUlkPXtlZGl0VGl0bGVJZH1cbiAgICAgICAgZWRpdGVkVGl0bGU9e2VkaXRlZFRpdGxlfVxuICAgICAgICBoYW5kbGVUaXRsZUNoYW5nZT17aGFuZGxlVGl0bGVDaGFuZ2V9XG4gICAgICAgIGVkaXRpbmdUaXRsZT17ZWRpdGluZ1RpdGxlfVxuICAgICAgICB0aXRsZVVwZGF0ZWQ9e3RpdGxlVXBkYXRlZH1cbiAgICAgICAgY2hhdENvbnRhaW5lclJlZj17Y2hhdENvbnRhaW5lclJlZiBhcyBhbnl9XG4gICAgICAgIGhhbmRsZU1vYmlsZUNoYXRCdG5DbGljaz17aGFuZGxlTW9iaWxlQ2hhdEJ0bkNsaWNrfVxuICAgICAgLz5cblxuICAgICAgey8qIENoYXQgQ29udGFpbmVyIENvbXBvbmV0ICAqL31cblxuICAgICAgPGRpdlxuICAgICAgICByZWY9e2NoYXREYXNoQm9hcmRSZWZ9XG4gICAgICAgIGNsYXNzTmFtZT1cImNoYXREYXNoYm9hcmRXcmFwcGVyIHctZnVsbCB0ZXh0LWxlZnRcIlxuICAgICAgPlxuICAgICAgICB7LyogPE9wZW5DaGF0Q29udGFpbmVyXG4gICAgICAgICAgY2hhdENvbnRhaW5lclRvZ2dsZT17Y2hhdENvbnRhaW5lclRvZ2dsZX1cbiAgICAgICAgICBjaGF0Q29udGFpbmVyU2hvd249e2NoYXRDb250YWluZXJTaG93bn1cbiAgICAgICAgLz4gKi99XG4gICAgICAgIHsvKiBHdWlkZWxpbmVzIEhhZGVyICovfVxuXG4gICAgICAgIHsvKiA8SGVhZGVyXG4gICAgICAgICAgc2hvd0d1aWRlbGluZXM9e3Nob3dHdWlkZWxpbmVzfVxuICAgICAgICAgIHNldFNob3dHdWlkZWxpbmVzPXtzZXRTaG93R3VpZGVsaW5lc31cbiAgICAgICAgICBoYW5kbGVNb2JpbGVDaGF0QnRuQ2xpY2s9e2hhbmRsZU1vYmlsZUNoYXRCdG5DbGlja31cbiAgICAgICAgLz4gKi99XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BjaGF0RGFzaEJvYXJkQ29udGFpbmVyIGB9PlxuICAgICAgICAgIHsvKiBEYXNoYm9hcmQgQ29tcG9uZW50ICAqL31cblxuICAgICAgICAgIHtyZXNwb25zZXMubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICAgIDxDaGF0TWVzc2FnZXNDb250YWluZXIgcmVzcG9uc2VzPXsocmVzcG9uc2VzIGFzIGFueSkgfHwgW119IC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgIHsvKiA8TG9hZGluZ0NvbXBvbmVudCAvPiAqL31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgLy8gPERhc2hib2FyZCB1c2VyTmFtZT17dXNlck5hbWUgfHwgXCJcIn0gLz5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAgey8qIERhc2hib2FyZCBDb21wb25lbnQgICovfVxuXG4gICAgICAgICAgey8qIDxVcGxvYWRGaWxlIC8+ICovfVxuXG4gICAgICAgICAgPGZvcm1cbiAgICAgICAgICAgIHJlZj17Zm9ybVJlZn1cbiAgICAgICAgICAgIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJjaGF0Rm9ybVN1Ym1pdFwiXG4gICAgICAgICAgICAvLyBvbkRyb3A9e2hhbmRsZURyb3B9XG4gICAgICAgICAgICBvbkRyYWdPdmVyPXsoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgdGV4dEFyZWFDb250YWluZXJcIj5cbiAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIG9uS2V5RG93bj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJlZi5jdXJyZW50Py5yZXF1ZXN0U3VibWl0KCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17bWVzc2FnZX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkFzayBUaG91IFF1ZXN0aW9uLi4uXCJcbiAgICAgICAgICAgICAgPjwvdGV4dGFyZWE+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0QXJlYUljb25XcmFwcGVyIGZsZXggZmxleC1yb3cgZ2FwLVsxMXB4XVwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICAgICAgICAgICAgaWQ9XCJmaWxlSW5wdXRcIlxuICAgICAgICAgICAgICAgICAgbXVsdGlwbGVcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6IFwibm9uZVwiIH19XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlU2VsZWN0RmlsZX1cbiAgICAgICAgICAgICAgICAgIHJlZj17KHJlZikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB1cGxvYWRJbnB1dCA9IHJlZjtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0QXJlYUljb25cIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaWxlSW5wdXRcIik/LmNsaWNrKCl9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIxOFwiXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE4XCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgICAgICAgICBkPVwiTTkgN2E1IDUgMCAwIDEgMTAgMHY4YTcgNyAwIDEgMS0xNCAwVjlhMSAxIDAgMCAxIDIgMHY2YTUgNSAwIDAgMCAxMCAwVjdhMyAzIDAgMSAwLTYgMHY4YTEgMSAwIDEgMCAyIDBWOWExIDEgMCAxIDEgMiAwdjZhMyAzIDAgMSAxLTYgMHpcIlxuICAgICAgICAgICAgICAgICAgICAgIGNsaXAtcnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICAgICAgICA+PC9wYXRoPlxuICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzc05hbWU9XCJ0ZXh0QXJlYUljb25cIj5cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlc0lzTG9hZGluZyA/ICA8QnV0dG9uTG9hZGluZ0NvbXBvbmVudCAvPiA6IChcbiAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMThcIlxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE4XCJcbiAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAzMiAzMlwiXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGwtcnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgZD1cIk0xNS4xOTIgOC45MDZhMS4xNDMgMS4xNDMgMCAwIDEgMS42MTYgMGw1LjE0MyA1LjE0M2ExLjE0MyAxLjE0MyAwIDAgMS0xLjYxNiAxLjYxNmwtMy4xOTItMy4xOTJ2OS44MTNhMS4xNDMgMS4xNDMgMCAwIDEtMi4yODYgMHYtOS44MTNsLTMuMTkyIDMuMTkyYTEuMTQzIDEuMTQzIDAgMSAxLTEuNjE2LTEuNjE2elwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlwLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgICAgICAgICA+PC9wYXRoPlxuICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7c2VsZWN0ZWRGaWxlICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yXCI+U2VsZWN0ZWQgZmlsZToge3NlbGVjdGVkRmlsZVswXS5uYW1lfTwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlUm91dGVyIiwiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVNlc3Npb24iLCJpc0NsaWVudCIsInVzZVNlc3Npb25TdG9yYWdlIiwiY2hlY2tTZXNzaW9uIiwiQnV0dG9uTG9hZGluZ0NvbXBvbmVudCIsInVzZUNoYXRDb252ZXJzYXRpb24iLCJ1c2VDcmVhdGVDb252ZXJzYXRpb24iLCJ1c2VDb252ZXJzYXRpb25zIiwiQ2hhdENvbnRhaW5lciIsIkNoYXRNZXNzYWdlc0NvbnRhaW5lciIsImF4aW9zIiwiQ29udmVyc2F0aW9uUGFnZSIsImNoYXRCb3RVcmwiLCJnZW5lcmF0ZVBkZlVybCIsInJvdXRlciIsImZvcm1SZWYiLCJzZXNzaW9uU3RhdHVzIiwic2V0U2Vzc2lvblN0YXR1cyIsInVzZXJJZCIsInNldFVzZXJJZCIsInNob3dHdWlkZWxpbmVzIiwic2V0U2hvd0d1aWRlbGluZXMiLCJwZGZJbWFnZXMiLCJzZXRQZGZJbWFnZXMiLCJzZWxlY3RlZFBkZkltYWdlIiwic2V0U2VsZWN0ZWRQZGZJbWFnZSIsImJhY2tncm91bmRJbWFnZXMiLCJzZXRCYWNrZ3JvdW5kSW1hZ2VzIiwidXNlck5hbWUiLCJzZXRVc2VyTmFtZSIsInNwbGl0VXNlck5hbWUiLCJlbWFpbCIsInNldEVtYWlsIiwic2V0U3BsaXRVc2VyTmFtZSIsInJlc3BvbnNlcyIsInNldFJlc3BvbnNlcyIsIm1lc3NhZ2UiLCJzZXRNZXNzYWdlIiwibG9jYWxTdG9yYWdlQ29udm9JZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXRDdXJyZW50Q29udmVyc2F0aW9uSWQiLCJkYXRhIiwic2Vzc2lvbiIsInN0YXR1cyIsIm1lc3NhZ2VzSXNMb2FkaW5nIiwic2V0TWVzc2FnZXNJc0xvYWRpbmciLCJpc1JlcG9uc2VMb2FkaW5nIiwic2V0UmVzcG9uc2VMb2FkaW5nIiwiY3VycmVudENvbnZlcnNhdGlvbklkIiwiY29udmVyc2F0aW9ucyIsImlzTG9hZGluZyIsInNldENvbnZlcnNhdGlvbnMiLCJjcmVhdGVDb252ZXJzYXRpb24iLCJuZXdUaXRsZSIsInNldE5ld1RpdGxlIiwiaXNDcmVhdGVMb2FkaW5nIiwiZXJyb3IiLCJjaGF0Q29udGFpbmVyUmVmIiwiaXNBdFplcm8iLCJzZXRJc0F0WmVybyIsImhhbmRsZU1vYmlsZUNoYXRCdG5DbGljayIsImN1cnJlbnQiLCJzdHlsZSIsInRyYW5zZm9ybSIsImhhbmRsZVJlc2l6ZSIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNlc3Npb25TdG9yYWdlIiwic2V0SXRlbSIsImVkaXRUaXRsZUlkIiwic2V0RWRpdFRpdGxlSWQiLCJlZGl0ZWRUaXRsZSIsInNldEVkaXRlZFRpdGxlIiwiZWRpdGluZ1RpdGxlIiwic2V0RWRpdGluZ1RpdGxlIiwidGl0bGVVcGRhdGVkIiwic2V0VGl0bGVVcGRhdGVkIiwiaGFuZGxlVGl0bGVDbGljayIsImNvbnZvSWQiLCJjb252ZXJzYXRpb24iLCJmaW5kIiwiY29udm8iLCJjb252ZXJzYXRpb25JZCIsInRpdGxlIiwiaGFuZGxlVGl0bGVDaGFuZ2UiLCJldmVudCIsInRhcmdldCIsInZhbHVlIiwiZ2V0Q29udmVyc2F0aW9uIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJ1cGRhdGVkQ29udmVyc2F0aW9uIiwianNvbiIsInByZXZDb252ZXJzYXRpb25zIiwibWFwIiwidXBkYXRlTG9jYWxTdG9yYWdlIiwiY29uc29sZSIsImRlbGV0ZUNvbnZlcnNhdGlvbiIsImN1cnJlbnRDb252ZXJzYXRpb25zIiwibG9nIiwidXBkYXRlZENvbnZlcnNhdGlvbnMiLCJmaWx0ZXIiLCJKU09OIiwic3RyaW5naWZ5IiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJpZCIsImNvbnZlcmF0b2luSUQiLCJwdXNoIiwiYWxlcnQiLCJjYWNoZWRDb252ZXJzYXRpb25zIiwicGFyc2VkQ29udmVyc2F0aW9ucyIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5IiwidXBkYXRlZENhY2hlIiwiZSIsImhhbmRsZVN1Ym1pdFRpdGxlIiwicHJldmVudERlZmF1bHQiLCJ0aXRsZUNoYW5nZSIsImtleSIsImxvY2FsQ29udmVyc2F0aW9uSWQiLCJwcmV2Iiwib3JpZ2luYWxDb252ZXJzYXRpb25zIiwiY2hhdERhc2hCb2FyZFJlZiIsInNwZWNpYWxDb21tYW5kcyIsImxvYWRQZGZJbWFnZXMiLCJwZGZJbWFnZXNDb250ZXh0IiwicmVxdWlyZSIsImNvbnRleHQiLCJpbWFnZUZpbGVzIiwia2V5cyIsInJlcGxhY2UiLCJoYW5kbGVTdWJtaXQiLCJ0cmltIiwiY29tbWFuZCIsInNwbGl0IiwidG9Mb3dlckNhc2UiLCJwcmV2UmVzcG9uc2VzIiwicXVlc3Rpb24iLCJpbWFnZVVybCIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInN0YXJ0c1dpdGgiLCJpbmRleCIsInBhcnNlSW50IiwiaXNOYU4iLCJsZW5ndGgiLCJ1cGxvYWRJbWFnZSIsImNvbW1hbmRMaXN0IiwiT2JqZWN0Iiwiam9pbiIsImltYWdlUGF0aCIsImJsb2IiLCJmaWxlIiwiRmlsZSIsInR5cGUiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwidGhlbiIsImNvbnRlbnRUeXBlIiwiZ2V0IiwiaW5jbHVkZXMiLCJ1cmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJhIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaHJlZiIsImRvd25sb2FkIiwiYXBwZW5kQ2hpbGQiLCJjbGljayIsInJlbW92ZSIsImNhdGNoIiwiaGFuZGxlVXBsb2FkRmlsZSIsImhhbmRsZVNwZWNpYWxDb21tYW5kIiwiY29udm9JRCIsInVwZGF0ZWRDb252ZXJzYXRpb25JZCIsIm5ld1Jlc3BvbnNlIiwiYm90UmVwbHkiLCJtb2RlIiwidXNlciIsInJlcyIsInJlc3AiLCJ1c2VyQ29udGVudCIsImJvdFJlc3BvbnNlIiwic2V0ZmlsZVVSTCIsInNlbGVjdGVkRmlsZSIsInNldHNlbGVjdGVkRmlsZSIsInVwbG9hZGVkRmlsZSIsInNldHVwbG9hZGVkRmlsZSIsImlzVXBsb2FkaW5nIiwic2V0aXNVcGxvYWRpbmciLCJpc0ZpbGVVcGxvYWRlZCIsInNldGlzRmlsZVVwbG9hZGVkIiwidXBsb2FkUHJvZ3Jlc3MiLCJzZXR1cGxvYWRQcm9ncmVzcyIsInVwbG9hZElucHV0IiwiY3JlYXRlUmVmIiwiaGFuZGxlU2VsZWN0RmlsZSIsInNlbGVjdGVkRmlsZUxpc3QiLCJpIiwiZmlsZXMiLCJpdGVtIiwibmFtZSIsImNvbmZpZyIsIm9uVXBsb2FkUHJvZ3Jlc3MiLCJwcm9ncmVzc0V2ZW50IiwibG9hZGVkIiwidG90YWwiLCJNYXRoIiwicm91bmQiLCJwb3N0IiwibmV3SW1hZ2VVcmwiLCJpbWFnZV91cmwiLCJmaWxlbmFtZSIsImZ1bGxNZXNzYWdlIiwiYmFzZVVybCIsImNvbW1hbmRFbmRwb2ludCIsInJlcXVlc3RCb2R5Iiwic3Vic3RyaW5nIiwiaW5kZXhPZiIsInRvSVNPU3RyaW5nIiwiY29udGVudCIsImxvZ29faW1hZ2UiLCJiYWNrZ3JvdW5kX2ltYWdlIiwiZGlzcGxheSIsInJldm9rZU9iamVjdFVSTCIsImhhbmRsZUNvbnZlcnNhdGlvbkNsaWNrIiwidGFyZ2V0UGF0aCIsInVuZGVmaW5lZCIsImNsZWFyU3RvcmFnZSIsInJlbW92ZUl0ZW0iLCJtZXNzYWdlc1JlZkNvdW50ZXIiLCJmZXRjaE1lc3NhZ2VzRm9yQ29udmVyc2F0aW9uIiwibWVzc2FnZXMiLCJmb3JtYXR0ZWRNZXNzYWdlcyIsIm1zZyIsInAiLCJjaGF0Q29udGFpbmVyU2hvd24iLCJzZXRDaGF0Q29udGFpbmVyU2hvd24iLCJjaGF0Q29udGFpbmVyVG9nZ2xlIiwiZGl2IiwiY2xhc3NOYW1lIiwib25Db252ZXJzYXRpb25DbGljayIsIm9uRGVsZXRlQ29udm8iLCJvbkNoYW5nZUNvbnZvVGl0bGUiLCJyZWYiLCJmb3JtIiwib25TdWJtaXQiLCJvbkRyYWdPdmVyIiwidGV4dGFyZWEiLCJvbkNoYW5nZSIsIm9uS2V5RG93biIsInNoaWZ0S2V5IiwicmVxdWVzdFN1Ym1pdCIsInBsYWNlaG9sZGVyIiwiaW5wdXQiLCJtdWx0aXBsZSIsImJ1dHRvbiIsIm9uQ2xpY2siLCJnZXRFbGVtZW50QnlJZCIsInN2ZyIsInhtbG5zIiwid2lkdGgiLCJoZWlnaHQiLCJmaWxsIiwidmlld0JveCIsInBhdGgiLCJmaWxsLXJ1bGUiLCJkIiwiY2xpcC1ydWxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/ai/chat/[userId]/[conversationId]/page.tsx\n"));

/***/ })

});